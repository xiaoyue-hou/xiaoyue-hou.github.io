<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>s-singbox搭建VPN</title>
      <link href="posts/3c789177.html"/>
      <url>posts/3c789177.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h1><h2 id="（一）VPS常用命令"><a href="#（一）VPS常用命令" class="headerlink" title="（一）VPS常用命令"></a>（一）VPS常用命令</h2><h3 id="1、登录"><a href="#1、登录" class="headerlink" title="1、登录"></a>1、登录</h3><p>ssh root@ip地址 -p 端口号； 然后输入密码就登录了</p><h3 id="2、看当前IP地址"><a href="#2、看当前IP地址" class="headerlink" title="2、看当前IP地址"></a>2、看当前IP地址</h3><p>curl ip.p3terx.com</p><h3 id="3、看能否正常访问google-scholar"><a href="#3、看能否正常访问google-scholar" class="headerlink" title="3、看能否正常访问google scholar"></a>3、看能否正常访问google scholar</h3><p>curl -I <a href="https://scholar.google.com/">https://scholar.google.com/</a></p><h2 id="（二）-选看-CloudFlare-域名托管"><a href="#（二）-选看-CloudFlare-域名托管" class="headerlink" title="（二）(选看) CloudFlare 域名托管"></a>（二）(选看) CloudFlare 域名托管</h2><p><strong>(选看)：这部分不是必须步骤，只有配置argo专用通道时才会用到</strong></p><h3 id="1、digitalplat注册账号"><a href="#1、digitalplat注册账号" class="headerlink" title="1、digitalplat注册账号"></a>1、digitalplat注册账号</h3><p>登录<a href="https://dash.domain.digitalplat.org/auth/login?next=%2F">digitalplat</a>，进行注册（注册时除了邮箱其他的随意填，符合格式就行，记得最后要通过邮箱链接验证），然后登录通过Github验证，便可进入后台。</p><img src="/posts/3c789177.htm/3c789177/image-20260110131025793.png" class title="image-20260110131025793"><h3 id="2、digitalplat提升免费域名上限"><a href="#2、digitalplat提升免费域名上限" class="headerlink" title="2、digitalplat提升免费域名上限"></a>2、digitalplat提升免费域名上限</h3><p>初始每个账号仅可注册 1 个域名，可通过 <strong>Star 官方 GitHub 项目</strong>额外获得 1 个免费名额。进入<a href="https://github.com/DigitalPlatDev/FreeDomain">Freedom</a>，点右上角star，便可注册2个域名。</p><img src="/posts/3c789177.htm/3c789177/image-20260110131211403.png" class title="image-20260110131211403"><h3 id="3、digitalplat注册域名"><a href="#3、digitalplat注册域名" class="headerlink" title="3、digitalplat注册域名"></a>3、digitalplat注册域名</h3><p>点击左侧注册域名，自己定义二级域名前缀，注意这里的.us.kg需要key，其他的都不需要，可以选其他的域名后缀。如果域名有效，系统会提示填写 DNS 服务器地址。</p><img src="/posts/3c789177.htm/3c789177/image-20260110134610962.png" class title="image-20260110134610962"><img src="/posts/3c789177.htm/3c789177/image-20260110134813419.png" class title="image-20260110134813419"><h3 id="4、配置DNS"><a href="#4、配置DNS" class="headerlink" title="4、配置DNS"></a>4、配置DNS</h3><p>（1）登录 <a href="https://dash.cloudflare.com/">Cloudflare</a>，添加新域名（刚申请的域名lisa.dpdns.org）。</p><img src="/posts/3c789177.htm/3c789177/image-20260110133742180.png" class title="image-20260110133742180"><p>（2）然后点免费计划</p><img src="/posts/3c789177.htm/3c789177/image-20260110134420239.png" class title="image-20260110134420239"><p>（3）后面什么都不用添加，直接前往激活</p><img src="/posts/3c789177.htm/3c789177/image-20260110134435980.png" class title="image-20260110134435980"><p>（4）忽略添加DNS记录<img src="/posts/3c789177.htm/3c789177/image-20260110134518200.png" class title="image-20260110134518200"></p><p>（5）继续就出现了CF名称服务器的两个地址</p><img src="/posts/3c789177.htm/3c789177/image-20260110135027246.png" class title="image-20260110135027246"><p>（6）复制到digitalplat中最后一个页面中的NS1和NS2中。然后两个页面都点继续或者注册<img src="/posts/3c789177.htm/3c789177/image-20260110135217488.png" class title="image-20260110135217488"></p><h3 id="5、CF完成域名托管："><a href="#5、CF完成域名托管：" class="headerlink" title="5、CF完成域名托管："></a>5、CF完成域名托管：</h3><p>（1）回到 Cloudflare，点击“立即检查名称服务器”，需要等一段时间到CF中状态显示活动就好了。</p><img src="/posts/3c789177.htm/3c789177/image-20260110135411394.png" class title="image-20260110135411394"><p>（2）点击域名地址，进去DNS记录，添加记录</p><img src="/posts/3c789177.htm/3c789177/image-20260110135633829.png" class title="image-20260110135633829"><p>（3）添加记录，这里的A是值ipv4，名称root用@，填入VPS的ip地址，后面的小黄云是是否开启代理，如果不开启就是VPS的真实ip，如果开启了可能就是代理地址。然后点保存</p><img src="/posts/3c789177.htm/3c789177/image-20260110135738246.png" class title="image-20260110135738246"><p>然后可以去itdog中DNS查询，输入刚刚的域名，可以解析VPS的ip地址，刚开始解析正确的比例比较低，需要等一段时间，当比例高了就可以正常用了。</p><h3 id="6、-选看-配置H-UI，并配置CF域名登录"><a href="#6、-选看-配置H-UI，并配置CF域名登录" class="headerlink" title="6、(选看) 配置H-UI，并配置CF域名登录"></a>6、(选看) 配置H-UI，并配置CF域名登录</h3><p>（1）配置H-UI<a href="https://github.com/jonssonyan/h-ui/blob/main/README_ZH.md">教程</a></p><p>（2）配置CF域名登录H-UI<a href="https://blog.csdn.net/u010522887/article/details/140786338">教程</a></p><h2 id="（三）-选看-常用小网站"><a href="#（三）-选看-常用小网站" class="headerlink" title="（三）(选看) 常用小网站"></a>（三）(选看) 常用小网站</h2><h3 id="1、网站一致性"><a href="#1、网站一致性" class="headerlink" title="1、网站一致性"></a>1、<a href="https://ip111.cn/">网站一致性</a></h3><h3 id="2、IP分数"><a href="#2、IP分数" class="headerlink" title="2、IP分数"></a>2、<a href="测试ip分数">IP分数</a></h3><h3 id="3、DNS查询"><a href="#3、DNS查询" class="headerlink" title="3、DNS查询"></a>3、<a href="https://www.itdog.cn/">DNS查询</a></h3><h3 id="4、IP地址"><a href="#4、IP地址" class="headerlink" title="4、IP地址"></a>4、<a href="https://whatismyipaddress.com/">IP地址</a></h3><h1 id="二、s-singbox搭建VPN"><a href="#二、s-singbox搭建VPN" class="headerlink" title="二、s-singbox搭建VPN"></a>二、s-singbox搭建VPN</h1><h2 id="（一）安装s-singbox"><a href="#（一）安装s-singbox" class="headerlink" title="（一）安装s-singbox"></a>（一）安装s-singbox</h2><h3 id="1、用命令行安装"><a href="#1、用命令行安装" class="headerlink" title="1、用命令行安装"></a>1、用命令行安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -fsSL https://raw.githubusercontent.com/sindricn/s-singbox/main/install.sh)</span><br></pre></td></tr></table></figure><img src="/posts/3c789177.htm/3c789177/image-20260110152628088.png" class title="image-20260110152628088"><h3 id="2、进入s-singbox，安装内核运行"><a href="#2、进入s-singbox，安装内核运行" class="headerlink" title="2、进入s-singbox，安装内核运行"></a>2、进入s-singbox，安装内核运行</h3><p>（1） 进入s-singbox，可以看到内核未安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s-singbox</span><br></pre></td></tr></table></figure><img src="/posts/3c789177.htm/3c789177/image-20260110152830184.png" class title="image-20260110152830184"><p>（2）进入1.sing-box管理，1. 安装 sing-box（默认安装最新稳定版就可以），返回到主页面就已经在运行了。</p><img src="/posts/3c789177.htm/3c789177/image-20260110153052260.png" class title="image-20260110153052260"><h2 id="（二）-选看-Argo伪装入站"><a href="#（二）-选看-Argo伪装入站" class="headerlink" title="（二）(选看) Argo伪装入站"></a>（二）(选看) Argo伪装入站</h2><p>Argo通道是为了伪装入站IP，这样可以让你的客户端防火墙不会拦截你发出的流量，它分临时通道和专用通道，临时通道的稳定性差，是CF的一项测试服务，会导致域名经常变化，前面我们用CF域名托管，就是为了给它配置专用通道。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/3c789177.htm/3c789177/image-20260110173851358.png" class title="image-20260110173851358"></div><h3 id="1、CF授权"><a href="#1、CF授权" class="headerlink" title="1、CF授权"></a>1、CF授权</h3><p>（1）进入9. CF隧道管理，1. Argo隧道管理 ，7.  CF授权管理。下面授权名称和备注自己命名就可以，授权顶级域名要填CF托管后的域名，然后就会出来一个网址，粘贴到浏览器中打开，选择对应的域名进行授权就可以了。</p><img src="/posts/3c789177.htm/3c789177/image-20260110175907324.png" class title="image-20260110175907324"><img src="/posts/3c789177.htm/3c789177/image-20260110174754361.png" class title="image-20260110174754361"><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/3c789177.htm/3c789177/image-20260110174805447.png" class title="image-20260110174805447"></div><h3 id="2、创建专用隧道"><a href="#2、创建专用隧道" class="headerlink" title="2、创建专用隧道"></a>2、创建专用隧道</h3><p>可以在这里创建隧道，再加入节点，也可以在创建节点的时候一起加入创建隧道，我们采用后者在后面创建节点的时候展示。</p><h2 id="（四）建立节点"><a href="#（四）建立节点" class="headerlink" title="（四）建立节点"></a>（四）建立节点</h2><h3 id="1、不同节点的区别"><a href="#1、不同节点的区别" class="headerlink" title="1、不同节点的区别"></a>1、不同节点的区别</h3><img src="/posts/3c789177.htm/3c789177/image-20260110171828118.png" class title="image-20260110171828118"><h3 id="2、新建节点：VLESS-Reality"><a href="#2、新建节点：VLESS-Reality" class="headerlink" title="2、新建节点：VLESS + Reality"></a>2、新建节点：VLESS + Reality</h3><p>这个节点一般用大公司的域名伪装入站，可以防止被墙，但出站IP是不影响的，搭配开启的WARP分流，可以轻松访问google等网站。</p><img src="/posts/3c789177.htm/3c789177/image-20260110172607370.png" class title="image-20260110172607370"><p>（1）进入1.新建节点，q.快速搭建节点，1.  VLESS + Reality。端口不要设置冲突了，这里设置一下为6011，域名默认选最快的。</p><img src="/posts/3c789177.htm/3c789177/image-20260110172857762.png" class title="image-20260110172857762"><h3 id="2、新建节点：Hysteria2"><a href="#2、新建节点：Hysteria2" class="headerlink" title="2、新建节点：Hysteria2"></a>2、新建节点：Hysteria2</h3><p>这个节点没有入站伪装，特点是快速，当然也搭配分流WARP。</p><p>（1）进入1.新建节点，q.快速搭建节点，2.  Hysteria2。端口不要设置冲突了，这里设置一下为6012，域名默认，下面的限速和跳跃端口也默认，直接回车。</p><img src="/posts/3c789177.htm/3c789177/image-20260110173254294.png" class title="image-20260110173254294"><h3 id="3、新建节点：Argo-VLESS-WS"><a href="#3、新建节点：Argo-VLESS-WS" class="headerlink" title="3、新建节点：Argo+VLESS+WS"></a>3、新建节点：Argo+VLESS+WS</h3><p>这个节点采用 Argo隧道（必须采用WS协议），再搭配WARP。</p><p>（1）进入1.新建节点，q.快速搭建节点，3.  Argo+VLESS+WS。这里端口设置6013，默认WS协议，默认伪装域名，并配置专用通道。</p><img src="/posts/3c789177.htm/3c789177/image-20260110203437316.png" class title="image-20260110203437316"><p>（2）选择之前授权的CF凭证lisahou，然后设置隧道名称RackNerd1，绑定域名是RackNerd1.lisahou618.qzz.io（隧道名.之前的域名），然后配置6013这个节点加入这个隧道</p><img src="/posts/3c789177.htm/3c789177/image-20260110203702428.png" class title="image-20260110203702428"><p>（3）可以测试一次，用客户端ping一下这个域名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -4 RackNerd1.lisahou618.qzz.io</span><br></pre></td></tr></table></figure><img src="/posts/3c789177.htm/3c789177/image-20260110220056429.png" class title="image-20260110220056429"><h2 id="（五）生成订阅"><a href="#（五）生成订阅" class="headerlink" title="（五）生成订阅"></a>（五）生成订阅</h2><h3 id="1、通用订阅"><a href="#1、通用订阅" class="headerlink" title="1、通用订阅"></a>1、通用订阅</h3><p>（1）4. 订阅管理，1.生成订阅链接，名称随便设置，IP地址默认，订阅端口设置9618</p><img src="/posts/3c789177.htm/3c789177/image-20260110205315789.png" class title="image-20260110205315789"><p>（2）导入到v2ray中，可以看到采用Argo的入站地址是域名，说明入站伪装成功，测试速度和延迟发现它没法检测，这是由于进入了CF服务器，需要点击这个节点进行设置，指纹改成Chrome，跳过证书验证，再测试就好了。</p><img src="/posts/3c789177.htm/3c789177/image-20260110210039402.png" class title="image-20260110210039402"><div style="width: 80%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/3c789177.htm/3c789177/image-20260110210311963.png" class title="image-20260110210311963"></div><h3 id="2、clash订阅"><a href="#2、clash订阅" class="headerlink" title="2、clash订阅"></a>2、clash订阅</h3><img src="/posts/3c789177.htm/3c789177/image-20260110215145824.png" class title="image-20260110215145824"><h3 id="3、sing-box订阅"><a href="#3、sing-box订阅" class="headerlink" title="3、sing-box订阅"></a>3、sing-box订阅</h3><img src="/posts/3c789177.htm/3c789177/image-20260110215353444.png" class title="image-20260110215353444"><h2 id="（六）-选看-WARP伪装出站"><a href="#（六）-选看-WARP伪装出站" class="headerlink" title="（六） (选看) WARP伪装出站"></a>（六） (选看) WARP伪装出站</h2><p><strong>主要为了混淆身份，防止机房IP被Google/Netflix等网站拒绝</strong>。我们这里对部分流量采用WARP伪装，因为①WARP分配的IP地址是是很多人共享出口，甚至不如我们的机房IP，可能会被认为是机器人，而且会超级慢。②WARP全局会导致我们后面如果设置Argo入站隧道的流量也走这，会超时崩溃。<strong>所以我们在这里采用智能分流出站规则。</strong>如果不设置Argo入站伪装，想尝试让节点全局WARP可以进入9. CF隧道管理中进行WARP 把节点关联到就可以。</p><p><strong>解释稳定性</strong>：</p><p>①通过Cloudflare  WARP隧道，会分配一个免费匿名用户和证书（WARP 账户很稳定：这是 Cloudflare 的正式产品。脚本帮你注册的这个免费账户是永久有效的。只要 Cloudflare 不倒闭，这个账户就能一直连，不会出现“过段时间服务就没了”的情况。）</p><p>②每次 Sing-box 启动，它就拿着这个证书去连接 Cloudflare 的机房。Cloudflare 看到证书有效，就从它的机房里随机拿一个空闲的 IP 借给你用。（这个IP地址是会变的，这可能而是好事：IP 越常变，隐匿性越好。 因为Google 无法锁定“就是这个人”，它只知道“这是 Cloudflare 的用户”）</p><p>③每次CF分配IP的时候一般是从离你的 VPS 最近的 Cloudflare 机房分配，这样就相当于你拿着手机在城市中出行，不会被google封号，而频繁的改VPS才可能被封号，最坏的情况是这个IP被其他滥用，此时可能会遇到频繁的人机验证。这时去重启一下s-singbox就会再分一个新的IP了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sing-box</span><br></pre></td></tr></table></figure><h3 id="1、开启WARP-隧道管理"><a href="#1、开启WARP-隧道管理" class="headerlink" title="1、开启WARP 隧道管理"></a>1、开启WARP 隧道管理</h3><p>进入9. CF隧道管理，2. WARP 隧道管理，依次进行1.2.3.4.启动WARP连接，进入6.查看WARP状态，就没问题了。</p><img src="/posts/3c789177.htm/3c789177/image-20260110162842035.png" class title="image-20260110162842035"><img src="/posts/3c789177.htm/3c789177/image-20260110162949220.png" class title="image-20260110162949220"><h3 id="2、设置分流WARP规则-手动"><a href="#2、设置分流WARP规则-手动" class="headerlink" title="2、设置分流WARP规则-手动"></a>2、设置分流WARP规则-手动</h3><p><strong>注意：因为s-singbox是自动修改配置文件不会读取当前文件内容，而我们是手动修改，所以如果当我们配置好分流WARP后，再用s-singbox进行过改动，可能需要重新执行（3）中的 ③ ④ 和（4）。可以去 <a href="https://whatismyipaddress.com/">what is my ip</a> 上查看一下，如果变成了VPS的真IP，就需要执行一下。</strong></p><p>（1）进入7.出站规则，可以看到现有的出站规则是直接出去的</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/3c789177.htm/3c789177/image-20260110163224417.png" class title="image-20260110163224417"></div><p>（2）退出s-singbox，可以去到/etc/sing-box/config.json去看现在的配置文件。</p><img src="/posts/3c789177.htm/3c789177/image-20260110164313078.png" class title="image-20260110164313078"><p>（3）增加分流规则：</p><p><strong>Outbounds (出站)：</strong> 在 <code>direct-out</code> 下面增加了一个 <code>warp-out</code> (绑定 <code>wgcf</code>)。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      &quot;type&quot;: &quot;direct&quot;,</span><br><span class="line">      &quot;tag&quot;: &quot;warp-out&quot;,</span><br><span class="line">      &quot;bind_interface&quot;: &quot;wgcf&quot;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p><strong>Route (路由)：</strong> 增加了规则列表，把 Google/AI/Netflix 等域名的流量指向 <code>warp-out</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;domain_suffix&quot;: [</span><br><span class="line">          &quot;scholar.google.com&quot;,</span><br><span class="line">          &quot;scholar.google.cn&quot;,</span><br><span class="line">          &quot;scholar.google.com.hk&quot;,</span><br><span class="line">          &quot;gemini.google.com&quot;,</span><br><span class="line">          &quot;google.com&quot;,</span><br><span class="line">          &quot;youtube.com&quot;,</span><br><span class="line">          &quot;google.dev&quot;,</span><br><span class="line">          &quot;openai.com&quot;,</span><br><span class="line">          &quot;claude.ai&quot;,</span><br><span class="line">          &quot;anthropic.com&quot;,</span><br><span class="line">          &quot;netflix.com&quot;,</span><br><span class="line">          &quot;googleapis.com&quot;,</span><br><span class="line">          &quot;gstatic.com&quot;,</span><br><span class="line">          &quot;googleusercontent.com&quot;,</span><br><span class="line">          &quot;ggpht.com&quot;,</span><br><span class="line">          &quot;ytimg.com&quot;,</span><br><span class="line">          &quot;recaptcha.net&quot;,</span><br><span class="line">          &quot;whatismyipaddress.com&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;outbound&quot;: &quot;warp-out&quot;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>① 手动添加太麻烦了，所以写了一个固定的脚本</p><p>先安装执行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install -y jq</span><br></pre></td></tr></table></figure><p>② 写入脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /root/fix_warpout.sh &lt;&lt; &#x27;EOF&#x27;</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># 配置文件路径</span><br><span class="line">CONFIG_FILE=&quot;/etc/sing-box/config.json&quot;</span><br><span class="line"></span><br><span class="line"># 检查 jq 是否安装</span><br><span class="line">if ! command -v jq &amp;&gt; /dev/null; then</span><br><span class="line">    echo &quot;❌ 错误: 未安装 jq，正在自动安装...&quot;</span><br><span class="line">    apt-get update &amp;&amp; apt-get install -y jq</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;🔄 正在读取当前的节点信息 (Inbounds)...&quot;</span><br><span class="line"></span><br><span class="line"># 1. 定义你的完美出站规则 (Outbounds)</span><br><span class="line">#    包含 Direct, WARP(wgcf), Block</span><br><span class="line">OUTBOUNDS=&#x27;[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;type&quot;: &quot;direct&quot;,</span><br><span class="line">    &quot;tag&quot;: &quot;direct-out&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;type&quot;: &quot;direct&quot;,</span><br><span class="line">    &quot;tag&quot;: &quot;warp-out&quot;,</span><br><span class="line">    &quot;bind_interface&quot;: &quot;wgcf&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;type&quot;: &quot;block&quot;,</span><br><span class="line">    &quot;tag&quot;: &quot;block-out&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]&#x27;</span><br><span class="line"></span><br><span class="line"># 2. 定义你的完美路由规则 (Route)</span><br><span class="line">#    包含 Google全家桶、AI、Netflix 等分流</span><br><span class="line">ROUTE=&#x27;&#123;</span><br><span class="line">  &quot;default_domain_resolver&quot;: &quot;dns-local&quot;,</span><br><span class="line">  &quot;rules&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;protocol&quot;: &quot;dns&quot;,</span><br><span class="line">      &quot;action&quot;: &quot;route&quot;,</span><br><span class="line">      &quot;outbound&quot;: &quot;direct-out&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;domain_suffix&quot;: [</span><br><span class="line">         &quot;scholar.google.com&quot;,</span><br><span class="line">         &quot;scholar.google.cn&quot;,</span><br><span class="line">         &quot;scholar.google.com.hk&quot;,</span><br><span class="line">         &quot;gemini.google.com&quot;,</span><br><span class="line">         &quot;google.com&quot;,</span><br><span class="line">         &quot;youtube.com&quot;,</span><br><span class="line">         &quot;google.dev&quot;,</span><br><span class="line">         &quot;openai.com&quot;,</span><br><span class="line">         &quot;claude.ai&quot;,</span><br><span class="line">         &quot;anthropic.com&quot;,</span><br><span class="line">         &quot;netflix.com&quot;,</span><br><span class="line">         &quot;googleapis.com&quot;,</span><br><span class="line">         &quot;gstatic.com&quot;,</span><br><span class="line">         &quot;googleusercontent.com&quot;,</span><br><span class="line">         &quot;ggpht.com&quot;,</span><br><span class="line">         &quot;ytimg.com&quot;,</span><br><span class="line">         &quot;recaptcha.net&quot;,</span><br><span class="line">         &quot;whatismyipaddress.com&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;outbound&quot;: &quot;warp-out&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;final&quot;: &quot;direct-out&quot;,</span><br><span class="line">  &quot;auto_detect_interface&quot;: true</span><br><span class="line">&#125;&#x27;</span><br><span class="line"></span><br><span class="line"># 3. 核心魔法：用 jq 把你的规则“缝合”进配置文件</span><br><span class="line">#    逻辑：保留原文件的 .inbounds，替换掉 .outbounds 和 .route</span><br><span class="line">jq --argjson new_out &quot;$OUTBOUNDS&quot; --argjson new_route &quot;$ROUTE&quot; \</span><br><span class="line">   &#x27;.outbounds = $new_out | .route = $new_route&#x27; \</span><br><span class="line">   &quot;$CONFIG_FILE&quot; &gt; &quot;$CONFIG_FILE.tmp&quot; &amp;&amp; mv &quot;$CONFIG_FILE.tmp&quot; &quot;$CONFIG_FILE&quot;</span><br><span class="line"></span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">    echo &quot;✅ 配置文件修改成功！已注入 WARP 分流规则。&quot;</span><br><span class="line">    echo &quot;🚀 正在重启 sing-box 服务...&quot;</span><br><span class="line">    systemctl restart sing-box</span><br><span class="line">    echo &quot;🎉 搞定！现在你的节点既是最新的，又有 WARP 分流了。&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;❌ 修改失败，请检查配置文件格式。&quot;</span><br><span class="line">fi</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 给脚本添加执行权限</span><br><span class="line">chmod +x /root/fix_warpout.sh</span><br></pre></td></tr></table></figure><p>③ 执行脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./fix_warpout.sh</span><br></pre></td></tr></table></figure><p>④ 然后重启s-singbox</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sing-box</span><br></pre></td></tr></table></figure><p>（4）然后重新进入s-singbox，进入7.出站规则，就可以看到识别到一个新的出站规则，选择1.同步到规则库，就变成3个出站规则了，这样分流伪装就好了。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/3c789177.htm/3c789177/image-20260110170700733.png" class title="image-20260110170700733"></div><p>然后就可以看到出站的IP已经伪装了</p><img src="/posts/3c789177.htm/3c789177/image-20260110214531722.png" class title="image-20260110214531722">]]></content>
      
      
      <categories>
          
          <category> 奇奇怪怪的小tips </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Zotero</title>
      <link href="posts/8fbede65.html"/>
      <url>posts/8fbede65.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、常规设置"><a href="#一、常规设置" class="headerlink" title="一、常规设置"></a>一、常规设置</h1><h2 id="1、Zotero与Onedrive联动"><a href="#1、Zotero与Onedrive联动" class="headerlink" title="1、Zotero与Onedrive联动"></a>1、Zotero与Onedrive联动</h2><p>mklink /j “C:\Users\Lenovo\Zotero\storage” “F:\OneDrive\Zotero\storage”</p><h2 id="2、常规中自定义文件名格式："><a href="#2、常规中自定义文件名格式：" class="headerlink" title="2、常规中自定义文件名格式："></a>2、常规中自定义文件名格式：</h2><h3 id="（1）规范ISO日期——脚本"><a href="#（1）规范ISO日期——脚本" class="headerlink" title="（1）规范ISO日期——脚本"></a>（1）规范ISO日期——脚本</h3><p>规范化所有日期为ISO格式：2010-08-06。需要在工具→开发者→执行Java script中的&gt;下输入以下脚本执行。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> items = <span class="title class_">ZoteroPane</span>.<span class="title function_">getSelectedItems</span>();</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!item.<span class="title function_">isRegularItem</span>()) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">let</span> oldDate = item.<span class="title function_">getField</span>(<span class="string">&#x27;date&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!oldDate) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newDate = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. 优先处理图片中出现的 &quot;MM/YYYY&quot; 或 &quot;M/YYYY&quot; 反向格式 (如 06/2013, 10/2016)</span></span><br><span class="line">    <span class="keyword">let</span> reverseMatch = oldDate.<span class="title function_">match</span>(<span class="regexp">/^(\d&#123;1,2&#125;)[\/\-\.](\d&#123;4&#125;)$/</span>);</span><br><span class="line">    <span class="keyword">if</span> (reverseMatch) &#123;</span><br><span class="line">        <span class="keyword">let</span> month = reverseMatch[<span class="number">1</span>].<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> year = reverseMatch[<span class="number">2</span>];</span><br><span class="line">        newDate = year + <span class="string">&quot;-&quot;</span> + month;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 2. 使用 Zotero 原生引擎处理标准顺序但格式凌乱的日期 (如 2018-10-1, 2012/5/29)</span></span><br><span class="line">        <span class="keyword">let</span> parsedDate = <span class="title class_">Zotero</span>.<span class="property">Date</span>.<span class="title function_">strToDate</span>(oldDate);</span><br><span class="line">        <span class="keyword">if</span> (parsedDate.<span class="property">year</span>) &#123;</span><br><span class="line">            newDate = parsedDate.<span class="property">year</span>.<span class="title function_">toString</span>();</span><br><span class="line">            <span class="comment">// 如果原始数据包含月份，则补零统一</span></span><br><span class="line">            <span class="keyword">if</span> (parsedDate.<span class="property">month</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> month = (parsedDate.<span class="property">month</span> + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                newDate += <span class="string">&quot;-&quot;</span> + month;</span><br><span class="line">                <span class="comment">// 如果原始数据包含日期，则补零统一</span></span><br><span class="line">                <span class="keyword">if</span> (parsedDate.<span class="property">day</span> !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">                    <span class="keyword">let</span> day = parsedDate.<span class="property">day</span>.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                    newDate += <span class="string">&quot;-&quot;</span> + day;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 执行物理更新</span></span><br><span class="line">    <span class="keyword">if</span> (newDate &amp;&amp; newDate !== oldDate) &#123;</span><br><span class="line">        <span class="comment">// 只有在真正有变化时才保存，确保不破坏 Zotero 的同步逻辑</span></span><br><span class="line">        item.<span class="title function_">setField</span>(<span class="string">&#x27;date&#x27;</span>, newDate);</span><br><span class="line">        <span class="keyword">await</span> item.<span class="title function_">saveTx</span>();</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;【执行完毕】\n共扫描条目：&quot;</span> + items.<span class="property">length</span> + <span class="string">&quot; 条\n成功格式化：&quot;</span> + count + <span class="string">&quot; 条凌乱日期&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="（2）命名加评级——脚本"><a href="#（2）命名加评级——脚本" class="headerlink" title="（2）命名加评级——脚本"></a>（2）命名加评级——脚本</h3><p>若想加上评级，需要在工具→开发者→error console中的&gt;下输入以下脚本，并回车</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> items = <span class="keyword">await</span> <span class="title class_">Zotero</span>.<span class="property">Items</span>.<span class="title function_">getAll</span>(<span class="title class_">Zotero</span>.<span class="property">Libraries</span>.<span class="property">userLibraryID</span>);</span><br><span class="line">    <span class="keyword">let</span> changedCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> items) &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="title function_">isAttachment</span>()) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> tags = [];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> item.<span class="property">getTags</span> === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">            tags = item.<span class="title function_">getTags</span>().<span class="title function_">map</span>(<span class="function"><span class="params">t</span> =&gt;</span> <span class="keyword">typeof</span> t === <span class="string">&quot;string&quot;</span> ? t : t.<span class="property">tag</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(item.<span class="property">tags</span>)) &#123;</span><br><span class="line">            tags = item.<span class="property">tags</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> starTag = tags.<span class="title function_">find</span>(<span class="function"><span class="params">t</span> =&gt;</span> t.<span class="title function_">match</span>(<span class="regexp">/⭐+/</span>));</span><br><span class="line">        <span class="keyword">if</span> (starTag) &#123;</span><br><span class="line">            <span class="keyword">let</span> starMatch = starTag.<span class="title function_">match</span>(<span class="regexp">/⭐+/</span>);</span><br><span class="line">            <span class="keyword">if</span> (starMatch) &#123;</span><br><span class="line">                <span class="keyword">let</span> hashes = <span class="string">&quot;#&quot;</span>.<span class="title function_">repeat</span>(starMatch[<span class="number">0</span>].<span class="property">length</span>);</span><br><span class="line">                item.<span class="title function_">setField</span>(<span class="string">&#x27;seriesText&#x27;</span>, hashes);</span><br><span class="line">                <span class="keyword">await</span> item.<span class="title function_">saveTx</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`条目 &quot;<span class="subst">$&#123;item.getField(<span class="string">&quot;title&quot;</span>)&#125;</span>&quot; (<span class="subst">$&#123;item.key&#125;</span>) seriesText字段覆盖为: <span class="subst">$&#123;hashes&#125;</span>`</span>);</span><br><span class="line">                changedCount++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`执行完毕，共覆盖写入<span class="subst">$&#123;changedCount&#125;</span>个seriesText字段`</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>⭐：非常一般<br>⭐⭐：还行，基本用不上<br>⭐⭐⭐：还行的工作，可能能用上<br>⭐⭐⭐⭐：很有意义的工作，值得借鉴学习<br>⭐⭐⭐⭐⭐：和我做的非常相关</p><h3 id="（3）命名格式"><a href="#（3）命名格式" class="headerlink" title="（3）命名格式"></a>（3）命名格式</h3><p>这样所有的评级都会写入父条目的seriesText字段，这样的Zotero命名格式要设置成以下:</p><img src="/posts/8fbede65.htm/8fbede65/image-20251229143607604.png" class title="image-20251229143607604"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;seriesText&#125;&#125;</span><br><span class="line">&#123;&#123; year suffix=<span class="string">&quot;_&quot;</span>&#125;&#125;</span><br><span class="line">&#123;&#123; title truncate=<span class="string">&quot;200&quot;</span> &#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">if</span> journalAbbreviation&#125;&#125;(&#123;&#123;journalAbbreviation&#125;&#125;)&#123;&#123;endif&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">if</span> firstCreator&#125;&#125;_&#123;&#123;endif&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">if</span> language == <span class="string">&quot;zh&quot;</span>&#125;&#125;&#123;&#123;firstCreator&#125;&#125;</span><br><span class="line">&#123;&#123;elseif language ==<span class="string">&quot;zh-CN&quot;</span>&#125;&#125;&#123;&#123;firstCreator&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">else</span>&#125;&#125;&#123;&#123;creators name=<span class="string">&quot;family-given&quot;</span> max=<span class="string">&quot;1&quot;</span> suffix=<span class="string">&quot; et al&quot;</span>&#125;&#125;</span><br><span class="line">&#123;&#123; endif &#125;&#125;</span><br></pre></td></tr></table></figure><p>评级修改后本来是应该选中子条目，然后按父级元数据命名，但是这样很麻烦，所以可以尝试全选父条目，右击Zotmoov移动到预设目录，这样应该也可以一起改名</p><p>tips:{ date suffix=”_”  replaceFrom=”,”  replaceTo=”-“  regexOpts=”g” }</p><h2 id="3、基础设置"><a href="#3、基础设置" class="headerlink" title="3、基础设置"></a>3、基础设置</h2><h3 id="（1）常规"><a href="#（1）常规" class="headerlink" title="（1）常规"></a>（1）常规</h3><img src="/posts/8fbede65.htm/8fbede65/image-20251229143758179.png" class title="image-20251229143758179"><h3 id="（2）同步"><a href="#（2）同步" class="headerlink" title="（2）同步"></a>（2）同步</h3><img src="/posts/8fbede65.htm/8fbede65/image-20251229144649055.png" class title="image-20251229144649055"><h3 id="（3）引用"><a href="#（3）引用" class="headerlink" title="（3）引用"></a>（3）引用</h3><p>选好格式在写初稿的时候插入word</p><h3 id="（4）高级"><a href="#（4）高级" class="headerlink" title="（4）高级"></a>（4）高级</h3><img src="/posts/8fbede65.htm/8fbede65/image-20251229155245681.png" class title="image-20251229155245681"><h3 id="（5）订阅"><a href="#（5）订阅" class="headerlink" title="（5）订阅"></a>（5）订阅</h3><h4 id="①-Cities"><a href="#①-Cities" class="headerlink" title="① Cities"></a>① Cities</h4><p><a href="https://rss.sciencedirect.com/publication/science/02642751">https://rss.sciencedirect.com/publication/science/02642751</a></p><h4 id="②-Computers-Environment-and-Urban-Systems"><a href="#②-Computers-Environment-and-Urban-Systems" class="headerlink" title="② Computers, Environment and Urban Systems"></a>② Computers, Environment and Urban Systems</h4><p><a href="https://rss.sciencedirect.com/publication/science/01989715">https://rss.sciencedirect.com/publication/science/01989715</a></p><h4 id="③-Habitat-International"><a href="#③-Habitat-International" class="headerlink" title="③ Habitat International"></a>③ Habitat International</h4><p><a href="https://rss.sciencedirect.com/publication/science/01973975">https://rss.sciencedirect.com/publication/science/01973975</a></p><h4 id="④-Interface"><a href="#④-Interface" class="headerlink" title="④ Interface"></a>④ Interface</h4><p><a href="https://royalsocietypublishing.org/rss/site_1000019/1000012.xml">https://royalsocietypublishing.org/rss/site_1000019/1000012.xml</a></p><h4 id="⑤-Nature"><a href="#⑤-Nature" class="headerlink" title="⑤ Nature"></a>⑤ Nature</h4><p><a href="https://www.nature.com/nature.rss">https://www.nature.com/nature.rss</a></p><h4 id="⑥-Nature-Cities"><a href="#⑥-Nature-Cities" class="headerlink" title="⑥ Nature Cities"></a>⑥ Nature Cities</h4><p><a href="https://www.nature.com/natcities.rss">https://www.nature.com/natcities.rss</a></p><h4 id="⑦-Nature-Communications"><a href="#⑦-Nature-Communications" class="headerlink" title="⑦ Nature Communications"></a>⑦ Nature Communications</h4><p><a href="http://feeds.nature.com/ncomms/rss/current">http://feeds.nature.com/ncomms/rss/current</a></p><h4 id="⑧-Nature-Computational-Science"><a href="#⑧-Nature-Computational-Science" class="headerlink" title="⑧ Nature Computational Science"></a>⑧ Nature Computational Science</h4><p><a href="https://www.nature.com/natcomputsci.rss">https://www.nature.com/natcomputsci.rss</a></p><h4 id="⑨-Nature-Human-Behaviour"><a href="#⑨-Nature-Human-Behaviour" class="headerlink" title="⑨ Nature Human Behaviour"></a>⑨ Nature Human Behaviour</h4><p><a href="http://feeds.nature.com/nathumbehav/rss/current">http://feeds.nature.com/nathumbehav/rss/current</a></p><h4 id="⑩-Nature-Physics"><a href="#⑩-Nature-Physics" class="headerlink" title="⑩ Nature Physics"></a>⑩ Nature Physics</h4><p><a href="https://www.nature.com/nphys.rss">https://www.nature.com/nphys.rss</a></p><h4 id="⑪Nature-Scientific-Data"><a href="#⑪Nature-Scientific-Data" class="headerlink" title="⑪Nature Scientific Data"></a>⑪Nature Scientific Data</h4><p><a href="https://www.nature.com/sdata.rss">https://www.nature.com/sdata.rss</a></p><h4 id="⑫-Nature-Sustainability"><a href="#⑫-Nature-Sustainability" class="headerlink" title="⑫ Nature Sustainability"></a>⑫ Nature Sustainability</h4><p><a href="https://www.nature.com/natsustain.rss">https://www.nature.com/natsustain.rss</a></p><h4 id="⑬-npj-Urban-Sustainability"><a href="#⑬-npj-Urban-Sustainability" class="headerlink" title="⑬ npj Urban Sustainability"></a>⑬ npj Urban Sustainability</h4><p><a href="https://www.nature.com/npjurbansustain.rss">https://www.nature.com/npjurbansustain.rss</a></p><h4 id="⑭-PNAS-Physical-Sciences"><a href="#⑭-PNAS-Physical-Sciences" class="headerlink" title="⑭ PNAS: Physical Sciences"></a>⑭ PNAS: Physical Sciences</h4><p><a href="https://www.pnas.org/action/showFeed?type=searchTopic&amp;taxonomyCode=topic&amp;tagCode=phys-sci">https://www.pnas.org/action/showFeed?type=searchTopic&amp;taxonomyCode=topic&amp;tagCode=phys-sci</a></p><h4 id="⑮-PNAS-Social-Sciences"><a href="#⑮-PNAS-Social-Sciences" class="headerlink" title="⑮ PNAS: Social Sciences"></a>⑮ PNAS: Social Sciences</h4><p><a href="https://www.pnas.org/action/showFeed?type=searchTopic&amp;taxonomyCode=topic&amp;tagCode=soc-sci">https://www.pnas.org/action/showFeed?type=searchTopic&amp;taxonomyCode=topic&amp;tagCode=soc-sci</a></p><h4 id="⑯-Science-Advances"><a href="#⑯-Science-Advances" class="headerlink" title="⑯ Science Advances"></a>⑯ Science Advances</h4><p><a href="https://www.science.org/action/showFeed?type=etoc&amp;feed=rss&amp;jc=sciadv">https://www.science.org/action/showFeed?type=etoc&amp;feed=rss&amp;jc=sciadv</a></p><h4 id="⑰-Scientific-Reports"><a href="#⑰-Scientific-Reports" class="headerlink" title="⑰ Scientific Reports"></a>⑰ Scientific Reports</h4><p><a href="https://www.nature.com/srep.rss">https://www.nature.com/srep.rss</a></p><h4 id="⑱-Sustainable-Cities-and-Society"><a href="#⑱-Sustainable-Cities-and-Society" class="headerlink" title="⑱ Sustainable Cities and Society"></a>⑱ Sustainable Cities and Society</h4><p><a href="https://rss.sciencedirect.com/publication/science/22106707">https://rss.sciencedirect.com/publication/science/22106707</a></p><h4 id="⑲Travel-Behaviour-and-Society"><a href="#⑲Travel-Behaviour-and-Society" class="headerlink" title="⑲Travel Behaviour and Society"></a>⑲Travel Behaviour and Society</h4><p><a href="https://rss.sciencedirect.com/publication/science/2214367X">https://rss.sciencedirect.com/publication/science/2214367X</a></p><h1 id="二、Zotero插件"><a href="#二、Zotero插件" class="headerlink" title="二、Zotero插件"></a>二、Zotero插件</h1><img src="/posts/8fbede65.htm/8fbede65/image-20251229162352635.png" class title="image-20251229162352635"><h2 id="1、翻译"><a href="#1、翻译" class="headerlink" title="1、翻译"></a>1、翻译</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161216188.png" class title="image-20251229161216188"><h2 id="2、绿青蛙"><a href="#2、绿青蛙" class="headerlink" title="2、绿青蛙"></a>2、绿青蛙</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161319981.png" class title="image-20251229161319981"><p>easyscholar网址：[<a href="https://www.easyscholar.cc/">https://www.easyscholar.cc/</a></p><h2 id="3、茉莉花"><a href="#3、茉莉花" class="headerlink" title="3、茉莉花"></a>3、茉莉花</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161349429.png" class title="image-20251229161349429"><h2 id="4、arXiv工作流"><a href="#4、arXiv工作流" class="headerlink" title="4、arXiv工作流"></a>4、arXiv工作流</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161407482.png" class title="image-20251229161407482"><h2 id="5、Better-Notes"><a href="#5、Better-Notes" class="headerlink" title="5、Better Notes"></a>5、Better Notes</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161434919.png" class title="image-20251229161434919"><h2 id="6、Linter"><a href="#6、Linter" class="headerlink" title="6、Linter"></a>6、Linter</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161723025.png" class title="image-20251229161723025"><h2 id="7、PDF下载"><a href="#7、PDF下载" class="headerlink" title="7、PDF下载"></a>7、PDF下载</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161855622.png" class title="image-20251229161855622"><p><a href="https://sci-hub.se/{doi};https://sci-hub.st/{doi};https://sci-hub.ru/{doi};https://sci-hub.ren/{doi};https://sci-hub.wf/{doi};https://sci-hub.ee/{doi}">https://sci-hub.se/{doi};https://sci-hub.st/{doi};https://sci-hub.ru/{doi};https://sci-hub.ren/{doi};https://sci-hub.wf/{doi};https://sci-hub.ee/{doi}</a></p><h2 id="7、Reference"><a href="#7、Reference" class="headerlink" title="7、Reference"></a>7、Reference</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229161942449.png" class title="image-20251229161942449"><h2 id="8、Style"><a href="#8、Style" class="headerlink" title="8、Style"></a>8、Style</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229162034877.png" class title="image-20251229162034877"><h3 id="1-视图"><a href="#1-视图" class="headerlink" title="(1) 视图"></a>(1) 视图</h3><img src="/posts/8fbede65.htm/8fbede65/image-20251229142327022.png" class title="image-20251229142327022"><img src="/posts/8fbede65.htm/8fbede65/image-20251229142335016.png" class title="image-20251229142335016"><img src="/posts/8fbede65.htm/8fbede65/image-20251229142339944.png" class title="image-20251229142339944"><img src="/posts/8fbede65.htm/8fbede65/image-20251229142346305.png" class title="image-20251229142346305"><img src="/posts/8fbede65.htm/8fbede65/image-20251229142353472.png" class title="image-20251229142353472"><p>在阅读页面按shift+p，标注所有颜色的label</p><img src="/posts/8fbede65.htm/8fbede65/image-20251229142412875.png" class title="image-20251229142412875"><img src="/posts/8fbede65.htm/8fbede65/image-20251229142510745.png" class title="image-20251229142510745"><h2 id="9、Zotero-IF"><a href="#9、Zotero-IF" class="headerlink" title="9、Zotero IF"></a>9、Zotero IF</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229162201787.png" class title="image-20251229162201787"><h2 id="10、ZotMoov"><a href="#10、ZotMoov" class="headerlink" title="10、ZotMoov"></a>10、ZotMoov</h2><img src="/posts/8fbede65.htm/8fbede65/image-20251229162234754.png" class title="image-20251229162234754"><p>注意：这里的添加格式：pdf、epub、docx、doc、djvu、html、xlsx、mp4、pptx</p><h2 id="11、笔记模板——进去新建条目"><a href="#11、笔记模板——进去新建条目" class="headerlink" title="11、笔记模板——进去新建条目"></a>11、笔记模板——进去新建条目</h2><h3 id="（1）PaperNote"><a href="#（1）PaperNote" class="headerlink" title="（1）PaperNote"></a>（1）PaperNote</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- <span class="title class_">Title</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#eef9fd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">    const date = topItem.getField(&quot;date&quot;).split(&#x27;T&#x27;)[0];</span></span><br><span class="line"><span class="language-xml">    const title = topItem.getField(&quot;title&quot;);</span></span><br><span class="line"><span class="language-xml">    const titleTranslation = topItem.getField(&quot;titleTranslation&quot;);</span></span><br><span class="line"><span class="language-xml">    if (date &amp;&amp; titleTranslation) &#123;</span></span><br><span class="line"><span class="language-xml">      return `($&#123;date&#125;) $&#123;title&#125; ($&#123;titleTranslation&#125;)`;</span></span><br><span class="line"><span class="language-xml">    &#125; else if (date) &#123;</span></span><br><span class="line"><span class="language-xml">      return `($&#123;date&#125;) $&#123;title&#125;`;</span></span><br><span class="line"><span class="language-xml">    &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">      return `$&#123;title&#125;`;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">  &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="title class_">Meta</span> <span class="title class_">Data</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Author --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Author:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> $&#123;topItem.getCreators().slice(0, 10).map((v) =&gt; v.firstName + &quot; &quot; + v.lastName).join(&quot;; &quot;) + (topItem.getCreators().length &gt; 10 ? &quot;; et al.&quot; : &quot;;&quot;)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Journal --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47;&quot;</span>&gt;</span>Journal: </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span> <span class="attr">style</span>=<span class="string">&quot;color:#FF0000&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        $&#123;topItem.getField(&#x27;publicationTitle&#x27;)&#125;,</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;(()=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">        const volume = topItem.getField(&#x27;volume&#x27;);</span></span><br><span class="line"><span class="language-xml">        const issue = topItem.getField(&#x27;issue&#x27;);</span></span><br><span class="line"><span class="language-xml">        const pages = topItem.getField(&#x27;pages&#x27;);</span></span><br><span class="line"><span class="language-xml">        const year = topItem.getField(&#x27;date&#x27;).split(&#x27;-&#x27;)[0];</span></span><br><span class="line"><span class="language-xml">        let line = &quot;&quot;;</span></span><br><span class="line"><span class="language-xml">        if (volume) &#123;</span></span><br><span class="line"><span class="language-xml">          line += volume;</span></span><br><span class="line"><span class="language-xml">          if (issue) &#123;</span></span><br><span class="line"><span class="language-xml">            line += &#x27;(&#x27; + issue + &#x27;)&#x27;;</span></span><br><span class="line"><span class="language-xml">            line += pages ? &quot;: &quot; + pages + &quot;,&quot; : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">          &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">            line += pages ? &quot;: &quot; + pages + &quot;,&quot; : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">        &#125; else if (issue) &#123;</span></span><br><span class="line"><span class="language-xml">          line += &#x27;(&#x27; + issue + &#x27;)&#x27;;</span></span><br><span class="line"><span class="language-xml">          line += pages ? &quot;: &quot; + pages : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          line += pages ? pages + &quot;,&quot; : &quot;&quot;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        line += year ? &quot; &quot; + year + &quot;.&quot; : &quot;&quot;; </span></span><br><span class="line"><span class="language-xml">        return line;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Journal Tags --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Journal Tags: <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- In Zotero7, the tags of Ethereal Style plugin are referenced. Please install Ethereal Style in advance. --&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;&#123;</span></span><br><span class="line"><span class="language-xml">      let space = &quot; ㅤㅤ ㅤㅤ&quot;</span></span><br><span class="line"><span class="language-xml">      return Array.prototype.map.call(</span></span><br><span class="line"><span class="language-xml">        Zotero.ZoteroStyle.api.renderCell(topItem, &quot;publicationTags&quot;).childNodes,</span></span><br><span class="line"><span class="language-xml">        e =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          e.innerText =  space + e.innerText + space;</span></span><br><span class="line"><span class="language-xml">          return e.outerHTML</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        ).join(space)</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;$</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Local Link --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const attachments = Zotero.Items.get(topItem.getAttachments());</span></span><br><span class="line"><span class="language-xml">        const pdf = attachments.filter((i) =&gt; i.isPDFAttachment());</span></span><br><span class="line"><span class="language-xml">        if (pdf &amp;&amp; pdf.length &gt; 0) &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>Local Link: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;zotero://open-pdf/0_$&#123;pdf[0].key&#125;&quot;</span>&gt;</span>$&#123;pdf[0].getFilename()&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125; else if (attachments &amp;&amp; attachments.length &gt; 0) &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>Local Link: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;zotero://open-pdf/0_$&#123;attachments[0].key&#125;&quot;</span>&gt;</span>$&#123;attachments[0].getFilename()&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>Local Link: <span class="tag">&lt;/<span class="name">b</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- DOI or URL --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const doi = topItem.getField(&quot;DOI&quot;);</span></span><br><span class="line"><span class="language-xml">        if (doi) &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>DOI: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://doi.org/$&#123;topItem.getField(&#x27;DOI&#x27;)&#125;&quot;</span>&gt;</span>$&#123;topItem.getField(&#x27;DOI&#x27;)&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>URL: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;topItem.getField(&#x27;url&#x27;)&#125;&quot;</span>&gt;</span>$&#123;topItem.getField(&#x27;url&#x27;)&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Abstract --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const abstractTranslation = topItem.getField(&#x27;abstractTranslation&#x27;);</span></span><br><span class="line"><span class="language-xml">        if (abstractTranslation) &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>Abstract Translation: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>$&#123;abstractTranslation&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>Abstract: <span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>$&#123;topItem.getField(&#x27;abstractNote&#x27;)&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Tags --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Filter and display tags starting with # --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">b</span>&gt;</span>Tags:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> $&#123;topItem.getTags().map(tagObj =&gt; tagObj.tag.startsWith(&#x27;#&#x27;) ? tagObj.tag + &#x27; ,&#x27;:&#x27;&#x27;).join(&#x27; &#x27;) || &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Note Date --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Note Date: <span class="tag">&lt;/<span class="name">b</span>&gt;</span>$&#123;new Date().toLocaleString()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="title class_">Main</span> <span class="title class_">Content</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;color:#e0ffff; background-color:#66cdaa;&quot;</span>&gt;</span>📜 Research Content<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>💧 Data<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>👩🏻‍💻 Method<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>⚙️ Content<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>📜 Conclusion<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;color:#20b2aa; background-color:#afeeee;&quot;</span>&gt;</span>🔁 Research Core<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>💡 Innovations<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>🧩 Shortcomings<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>📌 To be resolved<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;color:#004d99; background-color:#87cefa;&quot;</span>&gt;</span>🤔 Personal Summary<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>🙋‍♀️ Key Records<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>💭 Thought Inspiration<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="（2）PaperItem"><a href="#（2）PaperItem" class="headerlink" title="（2）PaperItem"></a>（2）PaperItem</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="title class_">Meta</span> <span class="title class_">Data</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Title --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#BAD8B6; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Title：<span class="tag">&lt;/<span class="name">b</span>&gt;</span> $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">    const year = topItem.getField(&quot;year&quot;).split(&#x27;T&#x27;)[0];</span></span><br><span class="line"><span class="language-xml">    const title = topItem.getField(&quot;title&quot;);</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    // 提取标签中的星号评级，如果没有则为空</span></span><br><span class="line"><span class="language-xml">    let stars = &quot;&quot;;</span></span><br><span class="line"><span class="language-xml">let tagList = topItem.getTags().map(t =&gt; typeof t === &quot;string&quot; ? t : t.tag);</span></span><br><span class="line"><span class="language-xml">let starTag = tagList.find(tag =&gt; tag.includes(&quot;⭐&quot;));</span></span><br><span class="line"><span class="language-xml">if (starTag) &#123;</span></span><br><span class="line"><span class="language-xml">let match = starTag.match(/⭐+/);</span></span><br><span class="line"><span class="language-xml">stars = match ? match[0].replace(/⭐/g, &quot;#&quot;) : &quot;&quot;;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    if (year) &#123;</span></span><br><span class="line"><span class="language-xml">        return stars ? `$&#123;stars&#125;$&#123;year&#125;_$&#123;title&#125;` : `$&#123;year&#125;_$&#123;title&#125;`;</span></span><br><span class="line"><span class="language-xml">    &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">        return stars ? `$&#123;stars&#125;$&#123;title&#125;` : `$&#123;title&#125;`;</span></span><br><span class="line"><span class="language-xml">    &#125;</span></span><br><span class="line"><span class="language-xml">&#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Author --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Author：<span class="tag">&lt;/<span class="name">b</span>&gt;</span> $&#123;topItem.getCreators().slice(0, 10).map((v) =&gt; v.firstName + &quot; &quot; + v.lastName).join(&quot;; &quot;) + (topItem.getCreators().length &gt; 10 ? &quot;; et al.&quot; : &quot;;&quot;)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- Journal --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47;&quot;</span>&gt;</span>Journal：<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        $&#123;topItem.getField(&#x27;publicationTitle&#x27;)&#125;,</span></span><br><span class="line"><span class="language-xml">      </span></span><br><span class="line"><span class="language-xml">      $&#123;(()=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">        const volume = topItem.getField(&#x27;volume&#x27;);</span></span><br><span class="line"><span class="language-xml">        const issue = topItem.getField(&#x27;issue&#x27;);</span></span><br><span class="line"><span class="language-xml">        const pages = topItem.getField(&#x27;pages&#x27;);</span></span><br><span class="line"><span class="language-xml">        const year = topItem.getField(&#x27;date&#x27;).split(&#x27;-&#x27;)[0];</span></span><br><span class="line"><span class="language-xml">        let line = &quot;&quot;;</span></span><br><span class="line"><span class="language-xml">        if (volume) &#123;</span></span><br><span class="line"><span class="language-xml">          line += volume;</span></span><br><span class="line"><span class="language-xml">          if (issue) &#123;</span></span><br><span class="line"><span class="language-xml">            line += &#x27;(&#x27; + issue + &#x27;)&#x27;;</span></span><br><span class="line"><span class="language-xml">            line += pages ? &quot;: &quot; + pages + &quot;,&quot; : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">          &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">            line += pages ? &quot;: &quot; + pages + &quot;,&quot; : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">          &#125;</span></span><br><span class="line"><span class="language-xml">        &#125; else if (issue) &#123;</span></span><br><span class="line"><span class="language-xml">          line += &#x27;(&#x27; + issue + &#x27;)&#x27;;</span></span><br><span class="line"><span class="language-xml">          line += pages ? &quot;: &quot; + pages : &quot;,&quot;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          line += pages ? pages + &quot;,&quot; : &quot;&quot;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        line += year ? &quot; &quot; + year + &quot;.&quot; : &quot;&quot;; </span></span><br><span class="line"><span class="language-xml">        return line;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="title class_">Journal</span> <span class="title class_">Tags</span> --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Journal Tags：<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- In Zotero7, the tags of Ethereal Style plugin are referenced. Please install Ethereal Style in advance. --&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;&#123;</span></span><br><span class="line"><span class="language-xml">      let space = &quot;ㅤ&quot;</span></span><br><span class="line"><span class="language-xml">      return Array.prototype.map.call(</span></span><br><span class="line"><span class="language-xml">        Zotero.ZoteroStyle.api.renderCell(topItem, &quot;publicationTags&quot;).childNodes,</span></span><br><span class="line"><span class="language-xml">        e =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          e.innerText =  space + e.innerText + space;</span></span><br><span class="line"><span class="language-xml">          return e.outerHTML</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        ).join(&quot;; ㅤ&quot;)</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;$</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  &lt;!-- <span class="variable constant_">DOI</span> or <span class="variable constant_">URL</span> --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      $&#123;(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const doi = topItem.getField(&quot;DOI&quot;);</span></span><br><span class="line"><span class="language-xml">        if (doi) &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>DOI：<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://doi.org/$&#123;topItem.getField(&#x27;DOI&#x27;)&#125;&quot;</span>&gt;</span>$&#123;topItem.getField(&#x27;DOI&#x27;)&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125; else &#123;</span></span><br><span class="line"><span class="language-xml">          return `<span class="tag">&lt;<span class="name">b</span>&gt;</span>URL：<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;topItem.getField(&#x27;url&#x27;)&#125;&quot;</span>&gt;</span>$&#123;topItem.getField(&#x27;url&#x27;)&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>`;</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      &#125;)()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line">  </span><br><span class="line">  &lt;!-- <span class="title class_">Key</span> <span class="title class_">Records</span> --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Key Records：<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line">  </span><br><span class="line">  &lt;!-- <span class="title class_">Tags</span> --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#dbeedd; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- Filter and display tags starting with # --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">b</span>&gt;</span>Tags：<span class="tag">&lt;/<span class="name">b</span>&gt;</span> $&#123;topItem.getTags().map(tagObj =&gt; tagObj.tag.startsWith(&#x27;#&#x27;) ? tagObj.tag + &#x27; ,&#x27;:&#x27;&#x27;).join(&#x27; &#x27;) || &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  &lt;!-- <span class="title class_">Note</span> <span class="title class_">Date</span> --&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;color:#193c47; background-color:#f3faf4; padding:8px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">b</span>&gt;</span>Note Date：<span class="tag">&lt;/<span class="name">b</span>&gt;</span>$&#123;new Date().toLocaleString()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 奇奇怪怪的小tips </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>百词斩导出词库到pdf</title>
      <link href="posts/34ef32c.html"/>
      <url>posts/34ef32c.html</url>
      
        <content type="html"><![CDATA[<h1 id="1、找到百词斩数据库"><a href="#1、找到百词斩数据库" class="headerlink" title="1、找到百词斩数据库"></a>1、找到百词斩数据库</h1><p>在文件管理：Android/data/com.jiongji.andriod.card/files/baicizhan/lookup.db 长下面这样</p><img src="/posts/34ef32c.htm/34ef32c/image-20251004171330047.png" class title="image-20251004171330047"><h1 id="2、找到当前背诵的词书"><a href="#2、找到当前背诵的词书" class="headerlink" title="2、找到当前背诵的词书"></a>2、找到当前背诵的词书</h1><p>在文件管理：Android/data/com.jiongji.andriod.card/files/baicizhan/roadmap里面的.baicizhan文件，可以拷贝出来命名为json文件，长下面这样</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/34ef32c.htm/34ef32c/image-20251004171527320.png" class title="image-20251004171527320"></div><h1 id="3、放到同一文件夹下"><a href="#3、放到同一文件夹下" class="headerlink" title="3、放到同一文件夹下"></a>3、放到同一文件夹下</h1><p>用以下代码匹配索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on Sat Oct  4 16:42:03 2025</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: 猴猴猴</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># --- 文件路径配置 ---</span></span><br><span class="line">JSON_FILE_PATH = <span class="string">&#x27;liuji.json&#x27;</span></span><br><span class="line">DB_FILE_PATH = <span class="string">&#x27;lookup.db&#x27;</span></span><br><span class="line">OUTPUT_CSV_PATH = <span class="string">&#x27;output.csv&#x27;</span></span><br><span class="line">TXT_OUTPUT_PREFIX = <span class="string">&#x27;单词列表&#x27;</span></span><br><span class="line">WORDS_PER_TXT_FILE = <span class="number">500</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_dict_tables</span>(<span class="params">cursor</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    从数据库中查询所有以 &#x27;dict_&#x27; 开头的表名。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    cursor.execute(<span class="string">&quot;SELECT name FROM sqlite_master WHERE type=&#x27;table&#x27; AND name LIKE &#x27;dict_%&#x27;&quot;</span>)</span><br><span class="line">    tables = [row[<span class="number">0</span>] <span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall()]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;在数据库中找到 <span class="subst">&#123;<span class="built_in">len</span>(tables)&#125;</span> 个单词表: <span class="subst">&#123;tables&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> tables</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_data</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    主处理函数：读取JSON和DB，生成CSV和分块的TXT文件。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始处理...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1. 读取 liuji.json 文件</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(JSON_FILE_PATH, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json_data = json.load(f)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;成功读取 <span class="subst">&#123;<span class="built_in">len</span>(json_data)&#125;</span> 条记录从 <span class="subst">&#123;JSON_FILE_PATH&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;错误: 未找到JSON文件 at &#x27;<span class="subst">&#123;JSON_FILE_PATH&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">except</span> json.JSONDecodeError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;错误: <span class="subst">&#123;JSON_FILE_PATH&#125;</span> 文件格式不正确，无法解析。&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. 连接 lookup.db 数据库</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn = sqlite3.connect(DB_FILE_PATH)</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;成功连接到数据库: <span class="subst">&#123;DB_FILE_PATH&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> sqlite3.Error <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;错误: 无法连接到数据库 at &#x27;<span class="subst">&#123;DB_FILE_PATH&#125;</span>&#x27;: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取所有相关的单词表</span></span><br><span class="line">    dict_tables = get_dict_tables(cursor)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> dict_tables:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;错误: 在数据库中没有找到任何 &#x27;dict_&#x27; 开头的表。请检查数据库文件。&quot;</span>)</span><br><span class="line">        conn.close()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 准备存储合并后的数据和所有单词</span></span><br><span class="line">    combined_data_for_csv = []</span><br><span class="line">    all_words = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. 遍历JSON数据，在所有dict表中查询并合并</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正在从数据库查询单词信息...&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> index, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(json_data):</span><br><span class="line">        topic_id = item.get(<span class="string">&#x27;topic_id&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> topic_id:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;警告: 找到一条没有 topic_id 的记录，已跳过: <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        found_in_db = <span class="literal">False</span></span><br><span class="line">        <span class="comment"># 遍历所有单词表去寻找 topic_id</span></span><br><span class="line">        <span class="keyword">for</span> table_name <span class="keyword">in</span> dict_tables:</span><br><span class="line">            <span class="comment"># 注意: 表名不能通过 &#x27;?&#x27; 参数化，但因为我们是从数据库自身获取的表名，所以这里使用f-string是安全的。</span></span><br><span class="line">            query = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                SELECT word, accent, mean_cn, freq, word_length</span></span><br><span class="line"><span class="string">                FROM `<span class="subst">&#123;table_name&#125;</span>` </span></span><br><span class="line"><span class="string">                WHERE topic_id = ?</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                cursor.execute(query, (topic_id,))</span><br><span class="line">                db_result = cursor.fetchone()</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> db_result:</span><br><span class="line">                    <span class="comment"># 找到了！解包数据</span></span><br><span class="line">                    word, accent, mean_cn, freq, word_length = db_result</span><br><span class="line">                    </span><br><span class="line">                    <span class="comment"># 将 options 列表转换为字符串以便写入CSV</span></span><br><span class="line">                    options_str = json.dumps(item.get(<span class="string">&#x27;options&#x27;</span>, []), ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">                    merged_record = &#123;</span><br><span class="line">                        <span class="string">&#x27;topic_id&#x27;</span>: topic_id,</span><br><span class="line">                        <span class="string">&#x27;word&#x27;</span>: word,</span><br><span class="line">                        <span class="string">&#x27;accent&#x27;</span>: accent,</span><br><span class="line">                        <span class="string">&#x27;mean_cn&#x27;</span>: mean_cn,</span><br><span class="line">                        <span class="string">&#x27;freq&#x27;</span>: freq,</span><br><span class="line">                        <span class="string">&#x27;word_length&#x27;</span>: word_length,</span><br><span class="line">                        <span class="string">&#x27;source_table&#x27;</span>: table_name,  <span class="comment"># 记录是在哪个表中找到的</span></span><br><span class="line">                        <span class="string">&#x27;options&#x27;</span>: options_str,</span><br><span class="line">                        <span class="string">&#x27;tag_id&#x27;</span>: item.get(<span class="string">&#x27;tag_id&#x27;</span>),</span><br><span class="line">                        <span class="string">&#x27;word_level_id&#x27;</span>: item.get(<span class="string">&#x27;word_level_id&#x27;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                    combined_data_for_csv.append(merged_record)</span><br><span class="line">                    all_words.append(word)</span><br><span class="line">                    found_in_db = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">break</span> <span class="comment"># 找到后就不用再查其他表了，跳出内层循环</span></span><br><span class="line">            <span class="keyword">except</span> sqlite3.OperationalError <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;查询表 &#x27;<span class="subst">&#123;table_name&#125;</span>&#x27; 时出错: <span class="subst">&#123;e&#125;</span>. 可能该表结构不同，已跳过。&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> found_in_db:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;警告: 在所有单词表中均未找到 topic_id &#x27;<span class="subst">&#123;topic_id&#125;</span>&#x27; 对应的单词。&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 关闭数据库连接</span></span><br><span class="line">    conn.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;数据库查询完成，连接已关闭。&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4. 生成CSV文件 (代码与之前相同)</span></span><br><span class="line">    <span class="keyword">if</span> combined_data_for_csv:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;正在生成CSV文件: <span class="subst">&#123;OUTPUT_CSV_PATH&#125;</span>&quot;</span>)</span><br><span class="line">        csv_headers = [</span><br><span class="line">            <span class="string">&#x27;topic_id&#x27;</span>, <span class="string">&#x27;word&#x27;</span>, <span class="string">&#x27;accent&#x27;</span>, <span class="string">&#x27;mean_cn&#x27;</span>, <span class="string">&#x27;freq&#x27;</span>, <span class="string">&#x27;word_length&#x27;</span>, </span><br><span class="line">            <span class="string">&#x27;source_table&#x27;</span>, <span class="string">&#x27;options&#x27;</span>, <span class="string">&#x27;tag_id&#x27;</span>, <span class="string">&#x27;word_level_id&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(OUTPUT_CSV_PATH, <span class="string">&#x27;w&#x27;</span>, newline=<span class="string">&#x27;&#x27;</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                writer = csv.DictWriter(f, fieldnames=csv_headers)</span><br><span class="line">                writer.writeheader()</span><br><span class="line">                writer.writerows(combined_data_for_csv)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;CSV文件生成成功！&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;错误: 写入CSV文件失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;没有可写入CSV的数据。&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5. 生成分块的TXT文件 (代码与之前相同)</span></span><br><span class="line">    <span class="keyword">if</span> all_words:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在生成分块的TXT文件...&quot;</span>)</span><br><span class="line">        total_words = <span class="built_in">len</span>(all_words)</span><br><span class="line">        num_files = math.ceil(total_words / WORDS_PER_TXT_FILE)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_files):</span><br><span class="line">            start_index = i * WORDS_PER_TXT_FILE</span><br><span class="line">            end_index = start_index + WORDS_PER_TXT_FILE</span><br><span class="line">            word_chunk = all_words[start_index:end_index]</span><br><span class="line">            txt_filename = <span class="string">f&quot;<span class="subst">&#123;TXT_OUTPUT_PREFIX&#125;</span>_<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>_of_<span class="subst">&#123;num_files&#125;</span>.txt&quot;</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(txt_filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    f.write(<span class="string">&quot;,&quot;</span>.join(word_chunk))</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;成功生成文件: <span class="subst">&#123;txt_filename&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> IOError <span class="keyword">as</span> e:</span><br><span class="line">                 <span class="built_in">print</span>(<span class="string">f&quot;错误: 写入TXT文件 <span class="subst">&#123;txt_filename&#125;</span> 失败: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;没有可写入TXT文件的数据。&quot;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\n所有处理已完成！&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    process_data()</span><br></pre></td></tr></table></figure><h1 id="4、导入到百词斩单词本"><a href="#4、导入到百词斩单词本" class="headerlink" title="4、导入到百词斩单词本"></a>4、导入到百词斩单词本</h1><p>csv文件可以自己看，txt文件需要自己复制到百词斩的单词本中手动添加（单次添加500词），添加完就可以导出pdf了</p>]]></content>
      
      
      <categories>
          
          <category> 奇奇怪怪的小tips </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>人类移动与城市科学</title>
      <link href="posts/d456ed28.html"/>
      <url>posts/d456ed28.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、人类移动"><a href="#一、人类移动" class="headerlink" title="一、人类移动"></a>一、人类移动</h1><h2 id="1、城市数据反应人的行为"><a href="#1、城市数据反应人的行为" class="headerlink" title="1、城市数据反应人的行为"></a>1、城市数据反应人的行为</h2><div class="table-container"><table><thead><tr><th><strong>Title：</strong>#### 2024_A universal framework for inclusive 15-minute cities</th></tr></thead><tbody><tr><td><strong>Author：</strong> Matteo Bruno; Hygor Piaget Monteiro Melo; Bruno Campanelli; Vittorio Loreto;</td></tr><tr><td><strong>Journal：</strong> Nature Cities, 1(10): 633-641, 2024.</td></tr><tr><td><strong>Journal Tags：</strong>  一区top</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1038/s44284-024-00119-4">10.1038/s44284-024-00119-4</a></td></tr><tr><td><strong>Key Records：</strong>15分钟城市在提供便利的同时也造成了高度的不平等与隔离，已有研究提出了很多从人动角度的优化方法。本文从优化设施分配的角度提出对可达性的提升：1、首先计算了50多个城市的可达性，发现城市内和城市间的都存在明显的差异（可达时间和满足15分钟人口比例），中心可达性更好；然后根据人口密度的空间分布均等分配设施，发现可达性在潜在增强（人均享有的POI），周边会提升而且中心也没有被剥夺；最后增加服务设施来达到15分钟城市条件，发现各城市差距很大，这取决于城市人口密度和人口分布，对于密度较低分散的城市不适合15分钟城市。<br><br><strong>Data：</strong> 服务设施：OSM上的POI；城市边界划分正六边形；人口分布是worldpop的100m人口密度栅格；可达时间用OSRM接口算</td></tr><tr><td><strong>Tags：</strong>15分钟城市通用框架<br><div style="width: 45%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251005202409802.png" class title="image-20251005202409802"></div><div style="width: 35%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251005202440837.png" class title="image-20251005202440837"></div></td></tr><tr><td><strong>Note Date：</strong>2025/10/5 19:45:10</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong>#2023_From lockdown to precise prevention: adjusting epidemic-related spatial regulations from the perspectives of the 15-minute city and spatiotemporal planning</th></tr></thead><tbody><tr><td><strong>Author：</strong> Yanxi Li; Yanwei Chai; Zifeng Chen; Chunjiang Li;</td></tr><tr><td><strong>Journal：</strong> Sustainable Cities and Society, 92: 104490, 2023.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 10.5ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤ中科院 工程技术2区ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.scs.2023.104490">10.1016/j.scs.2023.104490</a></td></tr><tr><td><strong>Key Records：</strong>以15分钟城市的视角考虑15分钟社区，在社区内被视为是必须的活动，然后实施一些控制出行或者限制地点开放的政策，来满足基本的需求并控制疫情的发展。</td></tr><tr><td><strong>Tags：</strong>样本量非常小，看起来只有100个个体的调查数据，没什么新意。</td></tr><tr><td><strong>Note Date：</strong>2025/10/5 20:28:39</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong>### (2025-07) Modelling active travel accessibility at the micro-scale using multi-source built environment data</th></tr></thead><tbody><tr><td><strong>Author：</strong> Corin Staves; Irena Itova; Belen Zapata-Diomedi; Audrey De Nazelle; Jenna Panter; Lucy Gunn; Alan Both; Yuchen Li; Ismail Saadi; James Woodcock; et al.</td></tr><tr><td><strong>Journal：</strong> Computers, Environment and Urban Systems, 119: 102270, 2025.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 7.1ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.compenvurbsys.2025.102270">10.1016/j.compenvurbsys.2025.102270</a></td></tr><tr><td><strong>Key Records：</strong>考虑街道、绿化等多种建筑环境，构建计算坐标级别可达性的计算框架。</td></tr><tr><td><strong>Tags：</strong> 开源框架，里面考虑了POI多样性的方法。<br><br><div style="width: 40%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251005213738751.png" class title="image-20251005213738751"></div></td></tr><tr><td><strong>Note Date：</strong>2025/10/5 21:35:08</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ##2025_Proximity-centred accessibility – A conceptual debate involving planning practitioners worldwide</th></tr></thead><tbody><tr><td><strong>Author：</strong> Cecília Silva; Benjamin Büttner; Sebastian Seisenberger; João Filipe Teixeira; María Teresa Baquero-Larriva; Eda Beyazit; Maxime Hachette; Diego Hernandez; Wambui Kariuki; Patxi J. Lamíquiz-Daudén; et al.</td></tr><tr><td><strong>Journal：</strong> Cities, 167: 106376, 12/2025.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 6.0ㅤ; ㅤㅤAJG 2ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.cities.2025.106376">10.1016/j.cities.2025.106376</a></td></tr><tr><td><strong>Key Records：</strong> 调查问卷调研了22个国家的规划从业者对可达性的一些问题回答，时间上的邻近性普遍是15分钟，距离上是1600m，无论采用何种交通方式（尤其是步行），都能实现合理的出行时间；不同的活动的旅行门槛差异大；背景在和活动相关性或者设定活动阈值时起到很大作用；无论什么情况，基础活动都很重要。</td></tr><tr><td><strong>Tags：</strong>1600m的阈值</td></tr><tr><td><strong>Note Date：</strong>2025/10/5 21:49:12</td></tr></tbody></table></div><h2 id="2、复杂网络"><a href="#2、复杂网络" class="headerlink" title="2、复杂网络"></a>2、复杂网络</h2><h2 id="3、个体轨迹恢复"><a href="#3、个体轨迹恢复" class="headerlink" title="3、个体轨迹恢复"></a>3、个体轨迹恢复</h2><h2 id="4、个体模型"><a href="#4、个体模型" class="headerlink" title="4、个体模型"></a>4、个体模型</h2><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251015223452436.png" class title="image-20251015223452436"></div><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251015223506719.png" class title="image-20251015223506719"></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ####2021_Characteristics of human mobility patterns revealed by high-frequency cell-phone position data</th></tr></thead><tbody><tr><td><strong>Author：</strong> Chen Zhao; An Zeng; Chi Ho Yeung;</td></tr><tr><td><strong>Journal：</strong> EPJ Data Science, 10(1): 5, 12/2021.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 3.0ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤ中科院 工程技术3区ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1140/epjds/s13688-021-00261-2">10.1140/epjds/s13688-021-00261-2</a></td></tr><tr><td><strong>Key Records：</strong>采用17年的5w个体轨迹数据(至少3min停留点)，构建个体移动网络，节点代表地点，链接代表两个位置间的转移。1、发现真实轨迹与空模型（随机打乱访问）相比，具有更少的访问pair对，更经常走较少的频繁走的路，具有更小的loop，以及更长的总距离。在群体方面表现，地点流出的度值分布都是幂律，真实数据前期更高，更陡，地点间流量分布也是幂律，真实数据前期更低，更缓。<br><br><img src="/posts/d456ed28.htm/d456ed28/image-20251010212552534.png" class title="image-20251010212552534">2、在时间维度上，在每个位置的停留时间分布表现幂律头(0-6h)和指数尾部。将时间分辨率降低（即删掉停留时间小于T的轨迹），发现地点访问的平均数和T表现出幂律关系。然后观察阈值T对于真实数据和空模型之间差异的影响，发现当时间分辨率较高时，差异不明显。（这里考虑了差异不明显是不是由随机打乱导致的，生成空模型并打乱的差异，与真实和打乱的差异作对比，很全面）。对于集体层面的地点出度分布和流量分布，当T较大时差异也不明显。当 T 较大时，打乱过程不会显著改变模式分布，而当 T 较小时，真实数据和打乱数据中的模式分布之间的差异是显著的。<br><br><img src="/posts/d456ed28.htm/d456ed28/image-20251010212530350.png" class title="image-20251010212530350"><br>3、观察个体从一个地点到下一个地点的转移概率，真实的呈现出一些特定对之间的频繁转移。随机模型中个体从一个地点转移到其他地点的概率分布与所有地点到地点总访问概率的分布表现一致。表明真实用户访问的下个地点不一定是访问频率最高的地点，而是强烈依赖于他当前的位置。<br><br><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251010213537267.png" class title="image-20251010213537267"></div><br>4、构建模型，重现个体真实轨迹与集体访问模式，以下是4种常见模型。<br><img src="/posts/d456ed28.htm/d456ed28/image-20251010214042492.png" class title="image-20251010214042492"><br>分别表示个体α在时间 t 之前访问位置 j 的实证频率和人口在时间 t 之前从位置 i 到 j 的旅行经验频率。其中IPT表现最好<br><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251010214400457.png" class title="image-20251010214400457"></div></td></tr><tr><td><strong>Tags：</strong>构建了人类流动性网络，发现个人在短期尺度上的流动性表现出与出发点相关的、路径偏好的模式。当数据的时间分辨率较高时，这些行为尤为突出，因此在前人研究中被忽视。揭示了由一阶马尔可夫过程特征表示的个人偏好转换机制可以在所有相关时间尺度上定量地再现观察到的旅行模式。</td></tr><tr><td><strong>Note Date：</strong>2025/10/10 20:54:37</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ###2021_Bursty visitation of locations in human mobility</th></tr></thead><tbody><tr><td><strong>Author：</strong> Junyu Lv; Chen Zhao; An Zeng;</td></tr><tr><td><strong>Journal：</strong> Physica A: Statistical Mechanics and its Applications, 567: 125674, 04/2021.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 2.8ㅤ; ㅤㅤSCI Q2ㅤ; ㅤㅤ中科院 物理3区ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.physa.2020.125674">10.1016/j.physa.2020.125674</a></td></tr><tr><td><strong>Key Records：</strong>采用石家庄1000个个体轨迹数据（14天-3min）和北京182个志愿者GPS日志（3个月-3min），观察地点访问量的变化。发现个体平均访问不同地点数量随时间增长（每小时、每天）呈现幂律关系；最常访问的位置的频率遵循 Zipf 定律；地点访问量的互补累积分布呈现出长尾。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011151406557.png" class title="image-20251011151406557"></div><br>然后定义地点的爆发性增长衡量为t+1到t时间的访问量差值除以t时刻的t时刻访问量，即增长斜率，以下是两个数据集每天每周的访问量变化分布呈现长尾（截断幂律），发现EPR模型无法刻画尾部。<br><div style="width: 37%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011151845074.png" class title="image-20251011151845074"></div><br>之后改进EPR模型，探索新地点时与EPR模型一致，偏好返回时遵循rank排名偏好，每一个位置都有 $\theta$ 的概率跳转到前面任意一个排名，然后按照新的排名偏好选择去过的位置。模型如下图：<br><div style="width: 47%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011153104028.png" class title="image-20251011153104028"></div><br>发现新模型可以实现EPR模型中的特征，而且比EPR更好的绘制地点访问的尾部<br><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011154818626.png" class title="image-20251011154818626"></div></td></tr><tr><td><strong>Tags：</strong> 构建了基于外生变量导致地点排名的思想，改进EPR模型，重现的地点访问的burst访问的尾部。文中有对分布函数的KS统计，之后可学习参考。</td></tr><tr><td><strong>Note Date：</strong>2025/10/11 14:28:46</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> 2016_The TimeGeo modeling framework for urban mobility without travel surveys</th></tr></thead><tbody><tr><td><strong>Author：</strong> Shan Jiang; Yingxiang Yang; Siddharth Gupta; Daniele Veneziano; Shounak Athavale; Marta C. González;</td></tr><tr><td><strong>Journal：</strong> Proceedings of the National Academy of Sciences, 113(37): E5370-E5378, 2016.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 9.4ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤ中科院 综合性期刊1区ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1073/pnas.1524261113">10.1073/pnas.1524261113</a></td></tr><tr><td><strong>Key Records：</strong>用CDR数据提出了一种机制建模框架（TimeGeo），采用 rank-based exploration and preferential return (r-EPR)能够有效地生成分辨率为 10 分钟、精度达数百米的城市交通模式。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121190036204.png" class title="image-20251121190036204"></div><br>构建移动模型：一个个体首先看当前位置是否在家，如果在家是否选择移动，$P<em>{t}$是活跃度脉搏，$n</em>{w}$是个体一周从家外出次数，如果选择出行就看是否进行探索，这里的探索与EPR不同的是加入了一个距离排名，排名越大就越可能去，返回机制和EPR一样根据返回频率。如果他不在家，看是否选择移动，$β<em>{1}$在外面外出相对于从家外出的倍数，如果移动，看是否选择回家，$β</em>{2}$是在外面选择连续外出的一个参数，类似于对家的不依恋程度，然后继续移动模型。这个模型每10分钟执行一次，这样这个人动模型既保证的在空间上的移动，也有在时间上的停留。这些参数都是从已有数据中获取或者拟合得到的。</td></tr><tr><td><strong>Tags：</strong>TimeGeo构建个体在时空层面的出行轨迹，区分从家和在外的出行，空间维度用R-EPR模型，时间维度用一些节律参数。</td></tr><tr><td><strong>Note Date：</strong>2025/11/8 15:32:19</td></tr></tbody></table></div><h2 id="5、个体行为"><a href="#5、个体行为" class="headerlink" title="5、个体行为"></a>5、个体行为</h2><div class="table-container"><table><thead><tr><th><strong>Title：</strong> #####2025_Universal expansion of human mobility across urban scales</th></tr></thead><tbody><tr><td><strong>Author：</strong> Lu Zhong; Lei Dong; Qi Wang; Chaoming Song; Jianxi Gao;</td></tr><tr><td><strong>Journal：Nature cities</strong> , 2025.</td></tr><tr><td><strong>Journal Tags：</strong> 一区top</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1038/s44284-025-00268-0">https://doi.org/10.1038/s44284-025-00268-0</a></td></tr><tr><td><strong>Key Records：</strong> 数据集：Cuebiq 提供6个月200w匿名用户的全美GPS数据；塞内加尔（30w）与科特迪瓦（5w）2周 的CDR 数据<br>根据每个个体轨迹构建有向加权网络，边的加权权重为$w(θ<em>i, θ</em>{i+1})=log(d ̃/d(θ<em>i,θ</em>{i+1} )$ d ̃对于每一个城市是一个定值，节点是每一个location，对网络进行社团结构划分，颜色代表不同社区。<br><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121121534517.png" class title="image-20251121121534517"></div><br>Fig 1c 横轴的是$d<em>{c}$社团质心到个体家的距离，$r</em>{c}$：社团内所有停留点到该模块质心的平均距离。发现3个个体表现出幂律关系，然后d-f中展示了不同地区都表现出同样的幂律关系，即：个体离家越远所探索的范围越广。<br>这个如何理解呢，Fig 2进行了解释，初始用边长为9m的六边形网格划分，作为level 1；随后根据网格之间的人流量聚合到level 2，然后再根据level 2的网格继续聚合到更高等级<br><img src="/posts/d456ed28.htm/d456ed28/image-20251121131728970.png" class title="image-20251121131728970"><br>Fig 2a展示了不同层级范围，b图展示了波士顿区域内，所有个体离家的模块$d_{c}$内部移动呈现。如果某一层级 L 的空间单元能够覆盖该社团80% 以上 的停留点，那么该社团就被定义为属于层级 L离家越远，个体的移动模块就越倾向于落在高层级的空间单元中。可以看到d图：随着离家距离的指数增长，在城市系统中跃迁的层级是线性增长的，层级随距离对数增长。e图中：社团半径R随层级指数增长。这证明了人类移动的空间扩张（图 1 的现象）本质上是由城市系统的层级结构（图 2 的机制)所驱动的。当离家越远，我们不仅仅是在移动，而是在不断解锁并跃迁到更高层级、更大尺度的城市功能区中进行活动。后续还研究了rc换成面积，以及不同社会人口属性，都存在同样的标度律且指数相同。<br>我们自己用14天轨迹构建个体网络，用转移pair频次加权边（频次和距离呈反比，和文章里是一个意思)，也同样发现社团回转半径和离家距离存在标度律关系，而且工作地也存在同样关系。<br><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121144041460.png" class title="image-20251121144041460"></div></td></tr><tr><td><strong>Tags：</strong> 根据每个个体轨迹构建网络，非常相关。发现个体轨迹划分社团后，社团内部半径与离家距离呈现标度律，这是由于人类移动跃迁到更高层级城市功能区移动。</td></tr><tr><td><strong>Note Date：</strong>2025/11/21 11:56:25</td></tr></tbody></table></div><h2 id="6、个体移动轨迹异质性"><a href="#6、个体移动轨迹异质性" class="headerlink" title="6、个体移动轨迹异质性"></a>6、个体移动轨迹异质性</h2><h2 id="7、群体模型"><a href="#7、群体模型" class="headerlink" title="7、群体模型"></a>7、群体模型</h2><img src="/posts/d456ed28.htm/d456ed28/image-20251015223524725.png" class title="image-20251015223524725"><img src="/posts/d456ed28.htm/d456ed28/image-20251015223539450.png" class title="image-20251015223539450"><h2 id="8、群体行为"><a href="#8、群体行为" class="headerlink" title="8、群体行为"></a>8、群体行为</h2><h2 id="9、社会因素"><a href="#9、社会因素" class="headerlink" title="9、社会因素"></a>9、社会因素</h2><h2 id="10、思考启示"><a href="#10、思考启示" class="headerlink" title="10、思考启示"></a>10、思考启示</h2><h2 id="11、综述"><a href="#11、综述" class="headerlink" title="11、综述"></a>11、综述</h2><h2 id="12、colocation"><a href="#12、colocation" class="headerlink" title="12、colocation"></a>12、colocation</h2><h1 id="二、-城市科学"><a href="#二、-城市科学" class="headerlink" title="二、 城市科学"></a>二、 城市科学</h1><h2 id="1、15mins"><a href="#1、15mins" class="headerlink" title="1、15mins"></a>1、15mins</h2><h2 id="2、标度律与框架"><a href="#2、标度律与框架" class="headerlink" title="2、标度律与框架"></a>2、标度律与框架</h2><div class="table-container"><table><thead><tr><th>**Title：###2025_A mechanics-based theoretical framework of urban sprawl force: a case study in nanjing, wuxi, and yangzhou, china</th></tr></thead><tbody><tr><td><strong>Author：</strong> Xiaoshun Li; Haitao Ji; Xin Chen; Xizhao Liu; Yiwei Geng; Bixia Deng; Fan Li;</td></tr><tr><td><strong>Journal：</strong> Land Use Policy, 150: 107450, 2025.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 5.9ㅤ; ㅤㅤAJG 2ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.landusepol.2024.107450">10.1016/j.landusepol.2024.107450</a></td></tr><tr><td><strong>Key Records：</strong>提出城市蔓延力学理论框架，构建统一分析框架与综合城市蔓延力模型。城市蔓延加速度（a）：以人均 GDP 表征经济发展，建成区面积表征蔓延水平，进行logistic曲线拟合，求二阶导数是加速度；城市质量（m）：构建含 12 个指标的评价体系（如普通高校数量、GDP 总量），用熵权法（差异越大熵越小权重越大）确定权重后计算综合值；综合城市蔓延力计算：基于 F=m・a 模型，代入 a 与 m 的测算结果；然后根据城市现状提出建议。</td></tr><tr><td><strong>Tags：</strong>  力学框架<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251007143011627.png" class title="image-20251007143011627"></div></td></tr><tr><td><strong>Note Date：</strong>2025/10/7 14:28:52</td></tr></tbody></table></div><h2 id="3、城市区域"><a href="#3、城市区域" class="headerlink" title="3、城市区域"></a>3、城市区域</h2><h2 id="4、-城市群"><a href="#4、-城市群" class="headerlink" title="4、 城市群"></a>4、 城市群</h2><h2 id="5、复杂网络"><a href="#5、复杂网络" class="headerlink" title="5、复杂网络"></a>5、复杂网络</h2><h2 id="6、空间结构"><a href="#6、空间结构" class="headerlink" title="6、空间结构"></a>6、空间结构</h2><h2 id="7、模型"><a href="#7、模型" class="headerlink" title="7、模型"></a>7、模型</h2><h2 id="8、-人动数据反应城市"><a href="#8、-人动数据反应城市" class="headerlink" title="8、 人动数据反应城市"></a>8、 人动数据反应城市</h2><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ####2024_Behaviour-based dependency networks between places shape urban economic resilience</th></tr></thead><tbody><tr><td><strong>Author：</strong> Takahiro Yabe; Bernardo García Bulle Bueno; Morgan R. Frank; Alex Pentland; Esteban Moro;</td></tr><tr><td><strong>Journal：</strong> Nature Human Behaviour, 20241223.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 21.4ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤAJG 4ㅤ; ㅤㅤ中科院 医学1区ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1038/s41562-024-02072-7">10.1038/s41562-024-02072-7</a></td></tr><tr><td><strong>Key Records：</strong>数据集：Spectus 提供的美国5个大都市地区100w台设备的GPS位置记录，停留时间10min-10h。根据访问地点i和j在6小时内，先后访问时间步为1步之内的人数，构建地点之间的依赖关系wij。平均依赖权重随距离呈现幂律衰减。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121145457589.png" class title="image-20251121145457589"></div><br>为了讨论依赖权重是否完全依赖于距离，构建引力模型改了构建空模型：保留经验网络中的节点总入度和入权重，构建$𝒈<em>{𝒊𝒋}=(𝒏</em>𝒊 𝒏<em>𝒋)/(𝒅</em>𝟎+𝒅_{𝒊𝒋} )^𝜸 $ 引力网络空模型，经验网络更分散（图a），表明地点间存在长距离依赖关系；空模型有更高聚集系数，在局部更聚集。然后对这个依赖关系构建回归模型，考虑距离、地点类别、区域效应三种因素，发现还存在其他显著特征和依赖关系有关。节点访问量越多、距离越短，依赖权重越大。<br> <img src="/posts/d456ed28.htm/d456ed28/image-20251121150319065.png" class title="image-20251121150319065"><br>随后考虑将这个依赖关系用到地点在疫情前后的访问量上，b图去看地点i访问量的变化和所有依赖地点的变化的相关性(聚合到POI)，然后考虑了3种回归模型：（1）地点自身区域和类别固定效应；（2）地点自身固定效应和基于引力的模型权重的依赖关系（3)地点自身固定效应和基于真实地点间流动权重的依赖关系，发现（3)模型解释最好<br><div style="width: 40%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121182843295.png" class title="image-20251121182843295"></div><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121184155444.png" class title="image-20251121184155444"></div><br>最后进行一些模拟，计算当学校关闭50%之后，对依赖它的POI怎么影响。当关闭一类POI后，它的影响范围和影响效果有多大。<br></td></tr><tr><td><strong>Tags：</strong>场所之间存在的依赖关系是人类行为偏好和决策的复杂产物，而非仅仅由城市形态决定。根据地点间的人流动构建地点依赖关系，证实这种依赖关系的效应是比较强的。用人动数据反应城市地块间的联系。</td></tr><tr><td><strong>Note Date：</strong>2025/11/21 14:48:03</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ####2025_Using human mobility data to quantify experienced urban inequalities</th></tr></thead><tbody><tr><td><strong>Author：</strong> Fengli Xu; Qi Wang; Esteban Moro; Lin Chen; Arianna Salazar Miranda; Marta C. González; Michele Tizzoni; Chaoming Song; Carlo Ratti; Luis Bettencourt; et al.</td></tr><tr><td><strong>Journal：</strong> Nature Human Behaviour, 9(4): 654-664, 2025.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 21.4ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤAJG 4ㅤ; ㅤㅤ中科院 医学1区ㅤ; ㅤㅤSSCI Q1ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1038/s41562-024-02079-0">10.1038/s41562-024-02079-0</a></td></tr><tr><td><strong>Key Records：</strong>用人动数据去探究社会中的不平等现象：社会混合和隔离，不同社会背景的人的相遇，不同地点上收入水平的人的隔离；城市地点的不平等访问，个体访问地点的多样性，静态数据中西班牙裔为主的社区附近公园很多，但他们实际的访问量却是最少的；对外生冲击的自适应性，疫情中穷人活跃度不会减少特别多，因为不得不工作。<br><div style="width: 40%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121184815725.png" class title="image-20251121184815725"></div><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121185441765.png" class title="image-20251121185441765"></div><br><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121185542141.png" class title="image-20251121185542141"></div></td></tr><tr><td><strong>Tags：</strong>perspective，提出要用人类出行数据和地点构建二分网络，去讨论城市中的不平等问题</td></tr><tr><td><strong>Note Date：</strong>2025/11/21 14:50:41</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ###2024_Effect of mobile food environments on fast food visits</th></tr></thead><tbody><tr><td><strong>Author：</strong> Bernardo García Bulle Bueno; Abigail L. Horn; Brooke M. Bell; Mohsen Bahrami; Burçin Bozkaya; Alex Pentland; Kayla De La Haye; Esteban Moro;</td></tr><tr><td><strong>Journal：</strong> Nature Communications, 15(1): 2291, 2024.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 14.7ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤ中科院 综合性期刊1区ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1038/s41467-024-46425-2">10.1038/s41467-024-46425-2</a></td></tr><tr><td><strong>Key Records：</strong>美国存在严重的快餐文化，对居民健康不好，所以实行了一系列的关闭政策，这篇文章提出来用移动过程中的快餐接触关闭，来提高这种政策的有效性。之前政策会关闭家附近的快餐店，现在他提出来i个体在时间t位置$C_{it}$接触的快餐环境也会影响个体是否吃快餐的行为。B图中去超市买东西做饭或者正常food的离家距离都比快餐店近，说明不是家周围的快餐店近导致的快餐行为<br><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121195931672.png" class title="image-20251121195931672"></div><div style="width: 60%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121200522221.png" class title="image-20251121200522221"></div><br>对家附近、移动过程中、实际访问快餐店比例做回归分析，发现黑人多的、长距离通勤、低技能群体快餐比例要更高，每天中午吃饭和吃快餐的比例最高。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121200755638.png" class title="image-20251121200755638"></div><br>然后对实际行为中是否访问快餐店进行回归分析，考虑个人偏好，每天的浮动变化，以及在吃饭前所处环境的快餐比例进行回归，发现这个吃饭前的环境确实影响很大。然后观察长期的行为中，吃饭前这个环境变化对吃快餐的影响，蓝色色带分别代表从低快餐比例环境到低比例，和从高快餐比例环境到高比例，他们的快餐行为都是不变的，但是从低比例到高比例和高比例到低比例，都会引起吃快餐次数的增加和减少。<br><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251121201316722.png" class title="image-20251121201316722"></div><br>最后通过模拟分析了，关闭美食热点、美食荒漠、食品获取度较低环境中的快餐店（或者把快餐店变成便民商店等）这些政策都不如移动环境中感知的关闭更有效。</td></tr><tr><td><strong>Tags：</strong>用个体轨迹数据研究快餐店的关闭问题，相较于静态关闭家附近或者工作地附近的快餐店要好很多，通过个体轨迹研究城市问题。</td></tr><tr><td><strong>Note Date：</strong>2025/11/21 19:56:31</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th><strong>Title：</strong> ###2022_Ranking locations in a city via the collective home-work relations in human mobility data</th></tr></thead><tbody><tr><td><strong>Author：</strong> Yifan He; Chen Zhao; An Zeng;</td></tr><tr><td><strong>Journal：</strong> Physica A: Statistical Mechanics and its Applications, 608: 128283, 12/2022.</td></tr><tr><td><strong>Journal Tags：</strong> ㅤIF 2.8ㅤ; ㅤㅤSCI Q2ㅤ; ㅤㅤ中科院 物理3区ㅤ</td></tr><tr><td><strong>DOI：</strong><a href="https://doi.org/10.1016/j.physa.2022.128283">10.1016/j.physa.2022.128283</a></td></tr><tr><td><strong>Key Records：</strong>采用石家庄市120w个体家和工作地的关系（14天包含周末），构建有向加权的home-work、home-weekend stay的两个网络（基站用optics聚类成2200个位置）。计算各种网络指标，发现家和工作地入度和出度基本一致，下面可以轻微看到外围人们更倾向于去市中心工作，人们更倾向于去周边过周末。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011203002333.png" class title="image-20251011203002333"></div><br>对各个区提取骨架网络，从最小权重开始删，以下是保留边占原来边的比，选择阈值的位置,然后看网络特征。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011203543268.png" class title="image-20251011203543268"></div><br>根据地点来源的流量对网络进行pagerank排名，发现pagerank的排名和单纯以访问量定的有区别，对有差异的地点在行政区层面上访问频次进行汇总，pagerank更高的中心区域访问量更多，说明它更能有效识别出关键位置。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011204532320.png" class title="image-20251011204532320"></div><br>然后进一步进行验证，（1）栅格化地块，比房价排名和pagerank排名的sperman。（2）中山路商业街最繁华，用AUC方法评估pagerank在评估正负样本准确率 （3）石家庄一环内人口密度最高，同样用AUC评估。发现pagerank方法在识别重要地点方面更好，还分析了居住在不同等级的人都去哪工作。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011205440746.png" class title="image-20251011205440746"></div></td></tr><tr><td>**Tags：基于用户的流动性记录，构建建有向加权的home-work、home-weekend stay的两个网络，发现尽管大多数用户离家去工作并在周末活动，但他们更愿意在同一区域内居住和工作。为了确定城市中的重要位置，使用加权 PageRank 算法对城市内部网络中的节点进行排序，验证了在确定关键位置时，PageRank 比仅使用表示位置访问频率的 in-strength 更有效。<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251011212721028.png" class title="image-20251011212721028"></div></td></tr><tr><td><strong>Note Date：</strong>2025/10/11 20:02:48</td></tr></tbody></table></div><h2 id="9、社会因素-1"><a href="#9、社会因素-1" class="headerlink" title="9、社会因素"></a>9、社会因素</h2><h2 id="10、思考启示-1"><a href="#10、思考启示-1" class="headerlink" title="10、思考启示"></a>10、思考启示</h2><h2 id="11、-智慧城市"><a href="#11、-智慧城市" class="headerlink" title="11、 智慧城市"></a>11、 智慧城市</h2><h1 id="三、时空过程"><a href="#三、时空过程" class="headerlink" title="三、时空过程"></a>三、时空过程</h1><h1 id="四、数据集"><a href="#四、数据集" class="headerlink" title="四、数据集"></a>四、数据集</h1><h2 id="数据公司"><a href="#数据公司" class="headerlink" title="数据公司"></a>数据公司</h2><div class="table-container"><table><thead><tr><th>Foursquare（<a href="https://location.foursquare.com/）**:**">https://location.foursquare.com/）**:**</a> 基于一个app的位置信息，提供全球二百多个国家的poi位置信息以及商家评价等许多字段。这个app类似于带游戏机制（大富翁）的大众点评，可以在里面搜索或被推送商家评价的信息，还可以在里面进行签到，获取各种打卡徽章，而且还可以同步推特的好友，看到好友的成就或发布信息，也可以进行分享等社交互动。（基于谷歌地图，在国内使用有偏移使用少）</th></tr></thead><tbody><tr><td>Agoop（<a href="https://agoop.co.jp/service/dynamic-population-data/）：一个日本的公司，提供个体轨迹数据包括id，时间，经纬度，速度，方向。但这个id是每天零点就随机打乱，因此不具有个体连续多天的数据，但和一些第三方平台合作为个体提供了收入等个人属性。其基于一个app，类似于微信步数，开启后可后台获取个体的gps信息，用步数积分可以兑换奖励。">https://agoop.co.jp/service/dynamic-population-data/）：一个日本的公司，提供个体轨迹数据包括id，时间，经纬度，速度，方向。但这个id是每天零点就随机打乱，因此不具有个体连续多天的数据，但和一些第三方平台合作为个体提供了收入等个人属性。其基于一个app，类似于微信步数，开启后可后台获取个体的gps信息，用步数积分可以兑换奖励。</a></td></tr><tr><td>Cuebiq（<a href="https://www.cuebiq.com/）是一家地理商业智能及消费者洞察公司，分析匿名、汇总的位置数据，为品牌提供消费者洞察和测量解决方案。Cuebiq">https://www.cuebiq.com/）是一家地理商业智能及消费者洞察公司，分析匿名、汇总的位置数据，为品牌提供消费者洞察和测量解决方案。Cuebiq</a> 开发了 Spectus 这个平台，专注于提供一种数据清洁室解决方案，用于人类移动性数据的分析。Spectus平台可以获取匿名化的轨迹数据，获取gps信息的app有很多，通过将SDK应用于各种app中获取信息。</td></tr><tr><td>Safegraph(<a href="https://www.safegraph.com/）：提供全球POI，建筑轮廓大小及周边poi信息，银行卡消费信息，人口普查块信息，应该也能定制轨迹数据。从app中获取gps数据。">https://www.safegraph.com/）：提供全球POI，建筑轮廓大小及周边poi信息，银行卡消费信息，人口普查块信息，应该也能定制轨迹数据。从app中获取gps数据。</a></td></tr></tbody></table></div><h2 id="1、人动数据"><a href="#1、人动数据" class="headerlink" title="1、人动数据"></a>1、人动数据</h2><div class="table-container"><table><thead><tr><th style="text-align:left"><strong>Title：</strong>#### (2024-04-18) YJMob100K: city-scale and longitudinal dataset of anonymized human mobility trajectories</th></tr></thead><tbody><tr><td style="text-align:left"><strong>Author：</strong> Takahiro Yabe; Kota Tsubouchi; Toru Shimizu; Yoshihide Sekimoto; Kaoru Sezaki; Esteban Moro; Alex Pentland;</td></tr><tr><td style="text-align:left"><strong>Journal：</strong> Scientific Data, 11(1): 397, 2024.</td></tr><tr><td style="text-align:left"><strong>Journal Tags：</strong> ㅤIF 5.8ㅤ; ㅤㅤSCI Q1ㅤ; ㅤㅤ中科院 综合性期刊2区ㅤ</td></tr><tr><td style="text-align:left"><strong>DOI：</strong><a href="https://doi.org/10.1038/s41597-024-03237-9">10.1038/s41597-024-03237-9</a></td></tr><tr><td style="text-align:left"><strong>Key Records：</strong>基于日本雅虎公司提供的手机位置数据，构建的开源人类移动数据集。500*500m的栅格（隐藏经纬度，共有200*200个），时间跨度为30分钟(每天48个时间段)。YJMob100K 数据集由于缺乏个体性质和地理位置，只能作为人类流动性预测任务的基准数据，而不是用于城市科学或人类行为研究。<br><br>dataset1 : 日本一个未公开的大都市区10w人（大约占栅格居住人口的5%）在75个正常天（隐藏具体的日期day0-74）的移动轨迹。（ 111,535,175条） <br><br>dataset2：日本一个未公开的大都市区2.5w人包含60天的正常行为和15天的异常行为紧急情况（共75天）。（29,389,749 条） 组成：user ID； day(0-74)； timeslot（0-47）；x（1-200）；y（1-200） <br><br>dataset3（“POI dataset” (Yabe 等, 2024, p. 3)）: 栅格的POI类别。x（1-200）；y（1-200）； POI category (Integer 1-85)；of POIs (Integer) 这个栅格里面该类POI的数量 <br><br>dataset4（“POI category list” (Yabe 等, 2024, p. 3)）：85个POI的类别</td></tr><tr><td style="text-align:left"><strong>Tags：日本个体轨迹数据集——是目前个体级别人数较多的数据集。</strong>不含地点经纬度；不知道具体哪类POI；不区分周中周末；个体轨迹有缺失；<br><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/d456ed28.htm/d456ed28/image-20251005164513915.png" class title="image-20251005164513915"></div></td></tr><tr><td style="text-align:left"><strong>Note Date：</strong>2025/10/4 22:34:11</td></tr></tbody></table></div><h2 id="2、城市数据"><a href="#2、城市数据" class="headerlink" title="2、城市数据"></a>2、城市数据</h2>]]></content>
      
      
      <categories>
          
          <category> 文献调研 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>COVID-19精读文献记录</title>
      <link href="posts/aa003cf.html"/>
      <url>posts/aa003cf.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、COVID-19-and-human-mobility"><a href="#一、COVID-19-and-human-mobility" class="headerlink" title="一、COVID-19 and human mobility"></a>一、COVID-19 and human mobility</h1><h2 id="（一）接触追踪"><a href="#（一）接触追踪" class="headerlink" title="（一）接触追踪"></a>（一）接触追踪</h2><h3 id="1、Contact-tracing-is-an-imperfect-tool-for-controlling-COVID-19-transmission-and-relies-on-population-adherence"><a href="#1、Contact-tracing-is-an-imperfect-tool-for-controlling-COVID-19-transmission-and-relies-on-population-adherence" class="headerlink" title="1、Contact tracing is an imperfect tool for controlling COVID-19 transmission and relies on population adherence."></a>1、Contact tracing is an imperfect tool for controlling COVID-19 transmission and relies on population adherence.</h3><p>（1）abstract：根据现有模型扩展找缺陷，改进——&gt;找影响因素——&gt;改进后作用——&gt;结论</p><p>（2）introduction：现有模型无法解释后期爆发 paragraph1</p><p> 追踪接触没有预期有效-&gt;证据——&gt;可能影响的原因paragraph2-4</p><p> 扩展模型本身存在的问题——&gt; 需要进一步研究paragraph5</p><p> 我们做了什么 paragraph6</p><p>（3）results：a.接触追踪的效力：考虑3个场景，图一中显示自我报告和依从性有中等到较大的效力</p><p> b.诊断权衡：测试延迟95%与实时65%差别不对</p><p> c.接触追踪的爆发阈值：average and boost 病例数一定，coverage越大 pro越大</p><p>（4）conclusion：表现较好的追踪接触带来15%的R值下降</p><p> self-reporting and adherence 最重要影响因素</p><p> coverage、sensitivity、speed影响因素</p><p> 总结不能作为唯一的控制因素，可结合k</p><p>重点 ：pre-symptomatic period</p><h2 id="（二）复合种群"><a href="#（二）复合种群" class="headerlink" title="（二）复合种群"></a>（二）复合种群</h2><h3 id="1、Modelling-and-predicting-the-effect-of-social-distancing-and-travel-restrictions-on-COVID-19-spreading"><a href="#1、Modelling-and-predicting-the-effect-of-social-distancing-and-travel-restrictions-on-COVID-19-spreading" class="headerlink" title="1、Modelling and predicting the effect of social distancing and travel restrictions on COVID-19 spreading"></a>1、Modelling and predicting the effect of social distancing and travel restrictions on COVID-19 spreading</h3><p>通过一个复合种群（融入活动驱动网络ADNS）模型来研究实行社交距离（更侧重于接触网络）和旅行限制（更侧重于社区之间的流动模式）的效力，结果表明，流动限制很大程度上取决于及时实施NPI的可能性，而在疫情爆发后优先考虑减少活动。</p><p>（1）模型：</p><p>（2）校准：</p><p>在校准模型时，用死亡人数校准，以致死率f<del>1</del>=0.045%和f<del>2</del>=5.6%；初始E、I定位6月24日观察到病例总数的k<del>1</del>、k<del>2</del>部分；补全2.24日前20天的0死亡数，修正2.20-23中7例死亡数</p><p>（3）方法：</p><p>将感染函数融入模型中，通过调整两个参数α和β进行模拟。3.5-3.20 15天之间调整α线性下降从1-0.176，而流动限制没有全国统一实施，3.1西北东北中欧下降，3.7南部和岛屿下降，从1下降到0</p><p>（4）发现：</p><p>①只有在疫情爆发早期实施行动限制，并辅以适当减少活动政策，才更有效</p><p>②移动限制影响与空间密切相关——分为两组</p><p>③仅对可能发生病的年龄组限制</p><p>④流动限制在早期有用，后期没用，适当放松活动减少</p><h3 id="2、Agent-based-modelling-of-reactive-vaccination-of-workplaces-and-schools-against-COVID-19"><a href="#2、Agent-based-modelling-of-reactive-vaccination-of-workplaces-and-schools-against-COVID-19" class="headerlink" title="2、Agent-based modelling of reactive vaccination of workplaces and schools against COVID-19"></a>2、Agent-based modelling of reactive vaccination of workplaces and schools against COVID-19</h3><p>这篇文章建模研究了在发现病例的学校和工作地注射反应疫苗带来的影响，对比了反应疫苗和非反应疫苗的3种接种策略单独执行和联合的效果，评估了对疫情动态和疫苗接种不同阶段的影响。</p><p>模型：（1）非反应性疫苗策略：保留个人接种意愿， V daily∈[50,500]</p><p>①在所有人中（mass）：每天抽取不超过V daily 个愿意接种的人接种</p><p>②在工作地/大学：每天随机几个位置，选中地愿意接种且未被隔离的12岁以上的人 每天接种不超过V daily个人</p><p>③在除大学外其他学校：每天随机几个学校，选中地愿意接种且未被隔离的12岁以上的学生及其家庭每天接种不超过V daily个人</p><p> （2）反应性疫苗策略：当确诊人数达到阈值（1个）时，根据TTI（test-trace-isolate）策略，将确诊者的家庭成员和同一工作 场所/学校的人接种疫苗，所有大于12岁且未被隔离的人（认为他们都有接种意愿）进行接种，每天接种人数V daily不设置上限</p><p> （3）对比参考情景：模拟过程中不开展接种活动，接种覆盖率处于初始状态</p><p>数据：这篇文章用到的数据是基于国家统计局和经济研究所的，选取了法国一个典型的中型城市梅茨市（包含11.7万居民）的人口统计数据，包含①个体及其年龄、家庭、工作地或学校；②共288个工作地的规模大小和131所学校的类型（图a中）③特定场景下（家庭、社区、交通、工作地、学校）每天face to face的接触，并记录每天的频次，以便模拟日常性和偶发性接触。————图b就是人口结构、反应疫苗接种、接触者追踪的示意图。显示了复合种群在多层动态网络中的联系，图中隐藏了交通和社区，只显示了家庭、学校、工作地三个场景，当发现传染性个体（紫色），就会隔离他的密切接触者（带有橙色边的），然后对同一工作地、学校、家庭的当天还没隔离的人注射疫苗（绿色的部分），但有一个点很奇怪</p><p>Fig 1c:新冠传播和接种的分室模型。当易感性个体接触到传染性个体并被传染后，进入暴露期，经过一段时间后会成为具有传染性的亚临床病例（无症状感染）和临床病例（有明显症状的感染），在此之前会先进入一个出现症状前的阶段，这个阶段的感染性要比出现症状后的有一定比例的缩小，然后从感染期以μ的速率恢复。</p><p>纵向是探讨了注射疫苗（两针剂，间隔三周）的情况，当易感者注射疫苗后进入S（v,0），此时疫苗还没有起保护作用，注射第1针两周后进入S(v,1)状态（此时疫苗具有中等级保护性），注射第1针5周后（注射第2针2周）进入S(v,2)状态（此时疫苗具有高等级保护性），它具有更低的概率被传染成接种后的暴露型，而接种后的暴露型和正常暴露型相比，有更小的概率成为临床病例，而接种后的感染者的传染性是不会降低的，只是他们的传染时间会减少25%。 在疫苗中等保护期，假设它感染后可以以Pv的概率变成接种暴露型，也可以以1-Pv的概率变成暴露型。</p><p>Fig 1d:确诊病例实施反应疫苗策略时间线，出现症状后rd=3.6天确诊，确诊便可立即隔离家人中的密接，rct=1天后对除了家人以外的所有密接都隔离，rv=2天后对不隔离的同家庭、学校/工作地的人员进行接种</p><p>图2是对上面提到的三种非反应性疫苗接种和1种反应性疫苗接种进行对比。所有的策略都采用基准模型，设定一些参数：假设32%人口由于之前感染而对病毒完全免疫，初始发病率为每十万人每周160例，可再生数R=1.6，TTI（test-tract-isolate）中出现症状到检测出平均为3.6天，1个病例平均检测和隔离接触者2.8个，假设50%的临床病例，10%的亚临床病例可以被检测出。（下面说的疫苗剂量都是针对第一剂）</p><p>Fig2a、d、g：描述了四种策略在三种不同的初始覆盖率（[12,60] 15%，40%，65%；60+ 90%）下，两个月的发病率的相对减少（和参考模型——模拟过程中不进行注射的病例减少比）随平均每天每十万人接种数的变化。</p><p>a 图中可以明显看出反应性疫苗策略平均每天每十万人注射417剂可降低20%发病率。</p><p>d 图中发现非反应性疫苗策略和低覆盖率基本一样，这是因为实际上愿意在工作地/学校接种的人很少，在人口层面对发病率的减少影响不大，从a-g发现当初始疫苗覆盖率很高的时候，反应性疫苗的效果可能不如非反应性疫苗策略。</p><p>Fig2b、e、h：采用相同的疫苗剂量，在不同的初始覆盖率下，探究每周（每十万人）临床病例的变化，图中可以看出非反应性疫苗接种策略达到的效果基本相似，其中大规模接种策略效果最低，因为这是随机抽取，而在工作地或学校抽取的人属于相对活跃活动人口。而反应性疫苗达到效果比等剂量下的非反应性疫苗策略的效果都好。</p><p>Fig2c:采用与前面相同参数，黑色的曲线是每天每十万人接种反应疫苗剂量变化，起初每天接种量很高，最高峰达到每10万人1200剂，但很快就下降到了105剂。粉色曲线是每天需要接种的工作地或学校的数量，缓慢达到一个高峰然后下降，可以看出大量疫苗最初是在大环境中需要很多，随着流行病的传播，到达了多个小环境，但只有少数人进行接种。</p><p>Fig2f:相同剂量不同策略的发病率的相对减少随不同初始覆盖率的变化，由图中看大致呈线性下降，图中中下等覆盖率，反应疫苗总是比非反应的效果好，但当初始覆盖率增大，接种人群数量逐渐减少，最终达到比非反应性策略还不好的效果。</p><p>Fig2i:在初始中等疫苗覆盖率下，对比疫苗不同效力所带来的影响，较低的疫苗效力导致疫苗接种效果下降，反应性疫苗接种和非反应接种的差距也会减少。</p><p>补充图5探究了中等覆盖率下一些关键系数R、初始免疫人群比例等值带来的影响，R、初始免疫人群比例、疫苗间生效时间的增加，会使反应性接种影响降低，接种疫苗遵从性上升，反应性疫苗和非反应性疫苗接种影响增加，其他参数影响不大。</p><p>图3：在上图中初始接种范围较小时，反应性疫苗表现效果比较好；但当初始接种范围比较大时，我们探索大规模疫苗和反应性疫苗联合接种对控制COVID-19持续传播的影响。</p><p>Fig3a：采用中等覆盖率，对比相同疫苗剂量下，联合接种和单独大规模接种的效果，可以明显看出联合接种的效果更好。</p><p>但由于疫苗的可用性和后期限制问题，基准模型的一些参数也会影响联合策略的效果，于是探究3个因素的影响。</p><p>Fig3b和3c:都是将每天可分配给反应性疫苗接种的最大疫苗（基准模型是不限）设置上限为50-250剂，b中是限制反应疫苗不同条件下 每天每十万人接种疫苗数随时间的变化，可以看出上限的不同会造成很大的影响，从而影响联合接种疫苗策略达到的效果。</p><p>Fig 3c-e:是发病率的相对减少随平均每天每十万人接种数的变化。3c是设置每天反应疫苗上限，如果每天最多接种反应疫苗50剂，那联合接种的效果和大规模接种类似，发病率的相对减少从原来的16%下降到6%；3d是从检测到病例到接种疫苗不同延时时间带来的影响，基准模型是2天，当延迟到4天时，发病率的减少从16%降到15%影响不大；3e是一个地点触发疫苗接种策略病例数的阈值带来的影响，基准模型是1例，当涨到2例时，发病率的相对减少就从16%降到了11%，影响还是比较大的。</p><p>Fig3f:在上面联合模型中，大规模接种数和反应性疫苗接种数是一样的，但实际上并未使反应性疫苗接种中所有可接种的人数都接种（反应性疫苗摄入量没有达到100%），于是就考虑将反应性疫苗接种调至100%，这样当平均每天每十万人接种480剂，发病率的相对减少值达到22%。在中高等初始疫苗覆盖率下，联合接种在合适的参数下也能达到很好的效果。</p><p>Fig4:探索反应疫苗和大规模疫苗联合接种对COVID-19爆发的控制能力。依旧采用中等初始疫苗覆盖率的情况，考虑加强TTI（70%临床 30%亚临床 家庭外隔离者达3倍）和基准TTI（50% 10%）；联合模型中反应疫苗摄入量达100%与基准联合模型（反应疫苗和大规模各一般）之间的对比，</p><p>假设开始采用大规模接种每天每十万人150剂，开始将3个携带新变种病毒的人引入到人群，执行TTI策略，当确诊数达到阈值时，就在大规模的基础上开展反应疫苗。</p><p>图中比较了联合接种和同等剂量的单独大规模对比，联合接种中考虑触发反应疫苗接种的阈值分别为1、5、10人。在基准模型中 发现1例就执行TTI，比大规模接种的发病率降低了10%，当随着干预开始时间的退后，发病率有一定的上升，而且加强的TTI策略以及反应疫苗的摄入量增加都会使发病率有明显性的降低。</p><p>所以在初始疫苗覆盖率较低时，引入反应性疫苗接种策略的效果比较明显。但当初始疫苗覆盖率较高时，纳入大规模疫苗和反应性疫苗的结合，并融入增强TTI政策和增加疫苗摄入量，首次发现变种病例后尽早执行反应性疫苗策略，会达到很好的效果。</p><h2 id="（三）局部个体传播"><a href="#（三）局部个体传播" class="headerlink" title="（三）局部个体传播"></a>（三）局部个体传播</h2><h3 id="1、20210609-Tracing-contacts-to-evaluate-the-transmission-of-COVID-19-from-highly-exposed-individuals-in-public-transportation"><a href="#1、20210609-Tracing-contacts-to-evaluate-the-transmission-of-COVID-19-from-highly-exposed-individuals-in-public-transportation" class="headerlink" title="1、20210609-Tracing contacts to evaluate the transmission of COVID-19 from highly exposed individuals in public transportation"></a>1、20210609-Tracing contacts to evaluate the transmission of COVID-19 from highly exposed individuals in public transportation</h3><p>在这项工作中使用了两个流行病学模型，以了解巴西福塔莱萨 COVID-19疫情期间的公共交通传播。采用接触追踪模型估计城市公交车内部传播(微观尺度)，再采用分室模型（SEIIR）评估整个城市(宏观尺度)内传播，结果显示，除了第一波和第二波每日病例之间的三个月，$Re^{bus}$在当地COVID-19暴发期间一直跟踪$Re^{city}$。此外，直到7月底，由公共汽车内医护人员传播的$Re^{health}$值持续大于$Re^{bus}$值。医护人员等其他高度暴露人群也可能以类似方式影响病毒传播动态。因此必须提出特殊政策来支持(或避免)高度暴露人群的流离失所</p><h3 id="2、Using-high-resolution-contact-networks-to-evaluate-SARS-CoV-2-transmission-and-control-in-large-scale-multi-day-events"><a href="#2、Using-high-resolution-contact-networks-to-evaluate-SARS-CoV-2-transmission-and-control-in-large-scale-multi-day-events" class="headerlink" title="2、Using high-resolution contact networks to evaluate SARS-CoV-2 transmission and control in large-scale multi-day events"></a>2、Using high-resolution contact networks to evaluate SARS-CoV-2 transmission and control in large-scale multi-day events</h3><p>abstract：采用邮轮上乘客与船员之间接触的高分辨率数据，与网络传播模型相结合，进行真实接触及模拟传播，平均每乘客每天接触次数为20次，发现疫苗覆盖率和高速抗原检测比单独戴口罩有很大的效果，揭示联合干预措施的效果。</p><p>data：20年11月-21年2月，多次航行平均1000船员和1300乘客的联系数据（共5216乘客和4197船员），由此产生社交网络。抽取3天4次航行，37小时数据手机到1846312独特联系对的联系事件，邮轮50%载客量，乘客船员1:1。</p><p>model：接触数据生成无向网络，节点和边缘分布代表个体和他们之间的接触。扩展社区网络传播模型，模拟7天内delta的传播，考虑4种干预措施：(i)起航前一天的一次性PCR检测(以留出检测时间)，(ii)在活动开始和中途进行快速抗原检测，(iii)在可行的环境中佩戴口罩(iv)参与者的疫苗接种覆盖率影响。假设呈阳性立即隔离，抗原检测随病毒载量变化，乘客和船员接触均带口罩，乘客和船员组内接触遵循。90% 在事件发生后才出现症状，症状前传播占传播的25%，因此在该事件中有时可能发生两代以上的感染</p><p>calculate：船员平均每天10个接触次数，乘客20个；71%发生在餐饮地，其中23%和38%发生在自助餐厅和包容性餐厅，16%发生在娱乐场所，8%发生在体育场所。通过引入一个一次性的PCR测试巡航的开始之前的一天,该指数是孤立在49%的时间,而5%的剩余的模拟结果不传播由于早期疾病传播的随机性质和社交网络的结构(图4 b)。结果，超过一半的模拟没有二次病例。通过PCR干预，10例以上爆发的风险降低到22%。然而，在事件开始和中途进行快速抗原检测，只有3%的模拟结果导致大规模爆发。</p><p>problem：大型事件在真实世界网络传播动态还有待探索；了解传播对接触网络的属性进行分析；邮轮接触率较高</p><h2 id="（四）个体数据分析"><a href="#（四）个体数据分析" class="headerlink" title="（四）个体数据分析"></a>（四）个体数据分析</h2><h3 id="1、A-data-driven-agent-based-model-that-recommends-non-pharmaceutical-interventions-to-suppress-Coronavirus-disease-2019-resurgence-in-megacities"><a href="#1、A-data-driven-agent-based-model-that-recommends-non-pharmaceutical-interventions-to-suppress-Coronavirus-disease-2019-resurgence-in-megacities" class="headerlink" title="1、A data driven agent-based model that recommends non-pharmaceutical interventions to suppress Coronavirus disease 2019 resurgence in megacities"></a>1、A data driven agent-based model that recommends non-pharmaceutical interventions to suppress Coronavirus disease 2019 resurgence in megacities</h3><h2 id="（五）群体——区域流动数据"><a href="#（五）群体——区域流动数据" class="headerlink" title="（五）群体——区域流动数据"></a>（五）群体——区域流动数据</h2><h3 id="干预措施的影响"><a href="#干预措施的影响" class="headerlink" title="干预措施的影响"></a>干预措施的影响</h3><h4 id="1、20200912-Mobile-device-data-reveal-the-dynamics-in-a-positive-relationship-between-human-mobility-and-COVID-19-infections"><a href="#1、20200912-Mobile-device-data-reveal-the-dynamics-in-a-positive-relationship-between-human-mobility-and-COVID-19-infections" class="headerlink" title="1、20200912-Mobile device data reveal the dynamics in a positive relationship between human mobility and COVID-19 infections"></a>1、20200912-Mobile device data reveal the dynamics in a positive relationship between human mobility and COVID-19 infections</h4><p>使用移动设备定位数据，每日更新美国3141个县的OD旅行需求分析和流动流量，通过一个时变系数的联立方程建模过程，刻画了人口流入和感染人数之间的量化的正关系，在整个研究期间，锁定组的系数始终高于重新开放组的系数，表明锁定县的流动流入存在更高的风险。全国平均系数为0.243，表明如果今天观察到的流入人口增加了10%，在其他条件相同的情况下，预计一周后感染人数将增加2.34%(即模型滞后= 7)。这种正相关关系在COVID-19发病期间急剧增加，然后在国家逐渐进入锁定状态时减弱。在重新开放发布大约两周后，它开始反弹。</p><h4 id="2、20200331-An-investigation-of-transmission-control-measures-during-the-first-50-days-of-the-COVID-19-epidemic-in-China"><a href="#2、20200331-An-investigation-of-transmission-control-measures-during-the-first-50-days-of-the-COVID-19-epidemic-in-China" class="headerlink" title="2、20200331-An investigation of transmission control measures during the first 50 days of the COVID-19 epidemic in China"></a>2、20200331-An investigation of transmission control measures during the first 50 days of the COVID-19 epidemic in China</h4><p>采用武汉到其他城市的流动量，发现武汉停运与其他城市新冠肺炎疫情延误2.91天有关。与较晚开始控制的城市(20.6)相比，提前实施控制措施的城市在疫情爆发的第一周报告的病例平均较少(13.0例)。模拟如果不实行应急措施和武汉禁行的命令（实行武汉禁令影响流动性），在2月19日(第50天)预估会产生74.4万例，与实际相比避免了几十万例病例。</p><h4 id="3、The-impact-of-relaxing-interventions-on-human-contact-patterns-and-SARS-Cov-2-transmission-in-China"><a href="#3、The-impact-of-relaxing-interventions-on-human-contact-patterns-and-SARS-Cov-2-transmission-in-China" class="headerlink" title="3、The impact of relaxing interventions on human contact patterns and SARS-Cov-2 transmission in China"></a>3、The impact of relaxing interventions on human contact patterns and SARS-Cov-2 transmission in China</h4><h2 id="（六）经济制衡"><a href="#（六）经济制衡" class="headerlink" title="（六）经济制衡"></a>（六）经济制衡</h2><h3 id="1、optimizing-social-and-economic-activity-while-containing-SARS-Cov-2-transmission-using-DAEDALUS"><a href="#1、optimizing-social-and-economic-activity-while-containing-SARS-Cov-2-transmission-using-DAEDALUS" class="headerlink" title="1、optimizing social and economic activity while containing SARS-Cov-2 transmission using DAEDALUS"></a>1、optimizing social and economic activity while containing SARS-Cov-2 transmission using DAEDALUS</h3><h2 id="（七）综述"><a href="#（七）综述" class="headerlink" title="（七）综述"></a>（七）综述</h2><h3 id="1、What-human-mobility-data-tell-us-about-COVID-19-spread"><a href="#1、What-human-mobility-data-tell-us-about-COVID-19-spread" class="headerlink" title="1、What human mobility data tell us about COVID-19 spread?"></a>1、What human mobility data tell us about COVID-19 spread?</h3><h3 id="2、-Human-behavior-and-disease-dynamics"><a href="#2、-Human-behavior-and-disease-dynamics" class="headerlink" title="2、#####Human behavior and disease dynamics"></a>2、#####Human behavior and disease dynamics</h3><p>不同传染病线性基本都是前期缓慢增长，迅速到达峰值，然后再迅速下降。典型的SIR模型研究的线性会导致这样的线性，但实际中可能受季节性因素等原因出现不同结果。</p><p>新冠传染和其它有明显的不同，这在于新冠流行会影响人们的行为习惯（对npi的遵从性），而人的行为又会影响新冠的传播。经典的SIR模型考虑到人的接触概率，但又忽视了人们行为的变化，这可能会导致很多npi不被严格遵守而没有起到效果，《Dynamics in a behavioral–epidemiological model for individual adherence to a nonpharmaceutical intervention》证明了人类行为将影响大流行中感染的平均人数。</p><h1 id="二、Urban-complexity"><a href="#二、Urban-complexity" class="headerlink" title="二、Urban complexity"></a>二、Urban complexity</h1><h2 id="1、Sequences-of-purchases-in-credit-card-data-reveal-lifestyles-in-urban-populations"><a href="#1、Sequences-of-purchases-in-credit-card-data-reveal-lifestyles-in-urban-populations" class="headerlink" title="1、Sequences of purchases in credit card data reveal lifestyles in urban populations"></a>1、Sequences of purchases in credit card data reveal lifestyles in urban populations</h2><p>交易类型的不均匀分布与个人选择购买方式有关，本文采用文本压缩技术分析信用卡购买序列以检测普遍存在的集体行为模式，对购买序列相似性进行聚类，检测出5个有显著性特征的消费群体，对他们的社会学人口特征进行分析，解释对人类集体行为的见解。</p><p>（1）数据：采用墨西哥的墨西哥城15万用户10周（2015年5月第一周到第十周）信用卡交易数据（CCR）包含年龄、性别、居住地以及按时间先后分析交易序列以及交易类型支出类别码，对于十分之一的用户拥有他们6个月（2015年3月开始）的CDR数据（与CCR时间周期重叠）包含时间、持续时间、呼叫位置、接收者。</p><p>（2）分析：</p><p>图一：</p><p> 分析CCR使用者在城市中的代表性——&gt;分析CCR支出中值与平均月工资相关性，用户样本跨越了不同收入水平的所有城区。信用卡使用者的月支出中值（调研人）和月平均工资（区域常驻居民）比例较高，说明各地区使用信用卡的主要是工资较高的人。列出大多数购物者更频繁使用前20个交易类别码（符合zipf分布，绝大多数消费有食物主导，其次是流动和通讯），按收入年龄性别分裂划分，各类别占比出现了轻微变化。</p><p>图二：</p><p> 将用户时间顺序交易代码转换符号序列，采用Sequitur algorithm将经常出现的序列定义为新的符号（习惯），基于jaccard index（交并比）计算两个用户之间的相似性，构建网络架构，通过应用并行louvain算法在构建用户相似矩阵。将CCR与CDR数据耦合，采用多个指标进行度量。</p><p>图三：</p><p> 新的符号序列（Word）也符合zipf分布，按单词长度汇总在交易序列中出现的频次分布，打乱原有的购买序列，发现消费序列的时间先后次序的重要性</p><p>图四：</p><p> 检测到的6个集群中有5个描述了个人如何花钱、移动和联系其他人的特定生活方式。其中一种交易类型是每组消费活动的核心，集群中90%的用火将其作为一个序列，如黄色的箭头。</p><p>集群1：以通行费核心交易的用户，称为通勤者，离市中心最远的地方，花费最多，履行距离最长，并大多数位男性。</p><p>集群2：以杂货店为核心的用户，他们代表支出最少，流动性最小，女性占比较高，年龄最大的，成为家庭主妇。</p><p>集群3：以出租车为核心交易，最年轻的人群。</p><p>集群4：以计算机网络与信息服务为核心的科技用户，与3年龄相近，支出高于平均水平，社交和出行网络更加多元化，活动范围是在城市中心，是唯一一个生活方式多样的大多数探索者集群。</p><p>集群5：未分类的用户，属于这类用户的显著序列少于5个，支出类型变化的变化也更少。</p><p>集群6：以餐厅为核心交易的中年用户，流动性多样性高，支出高，就餐者。</p><p>图五：</p><p> 蜂窝塔剩余活动：确定同一集群的用户是否倾向于在城市的特定区域聚集；同质性：同一组倾向于联系同一组或第5组群，第2组也经常被联系；只有集群4有明显探索者与返回者的差别。</p><p>（3）算法：</p><p>①jaccard index：交并比，两个集合的交集比并集</p><p>②zipf分布：最先在语料库中分析单词出现的频率与其排名呈反比，只有极少的单词被经常使用，大多数单词很少被使用。最常用的是第2常用的2倍，是第n常用的n倍。</p><p>③louvain：</p><p>④Sequitur algorithm：</p><h1 id="三、human-mobility"><a href="#三、human-mobility" class="headerlink" title="三、human mobility"></a>三、human mobility</h1><h2 id="1、Ranking-location-in-a-city-via-the-collective-home-work-relations-in-human-mobility-data"><a href="#1、Ranking-location-in-a-city-via-the-collective-home-work-relations-in-human-mobility-data" class="headerlink" title="1、Ranking location in a city via the collective home-work relations in human mobility data"></a>1、Ranking location in a city via the collective home-work relations in human mobility data</h2><h2 id="2、Bursty-visitation-of-locations-in-human-mobility"><a href="#2、Bursty-visitation-of-locations-in-human-mobility" class="headerlink" title="2、Bursty visitation of locations in human mobility"></a>2、Bursty visitation of locations in human mobility</h2><h2 id="3、-Effects-of-mobility-restrictions-during-COVID19-in-Italy"><a href="#3、-Effects-of-mobility-restrictions-during-COVID19-in-Italy" class="headerlink" title="3、 Effects of mobility restrictions during COVID19 in Italy"></a>3、 Effects of mobility restrictions during COVID19 in Italy</h2><p>本文分析意大利封锁前中后对移动的影响，使用Facebook提供了300多万意大利人在子城市水平每天的流动，构建跨区域的人类移动网络，基于网络科学和渗透理论的方法框架探索意大利2020年大流行前COVID-19对人类移动的影响，衡量封锁对经济造成的影响。</p><p>封锁前和封锁期间的网络架构：将意大利整个国家连续空间划分为7*7公里的的栅格，由于栅格不代表实际的行政区域，后续的分析会将栅格聚合为8000市、100省、20地区不同级别，当在给定时间窗口（8h）两个位置人数差N大于10个则会形成一条连边，边权则为流动人数N（连边除携带边权外还携带地理距离信息），在聚合时过程中将边权累加，可能会导致自环现象，但本文关注的是不同位置的连通性，所以所有的自环都不考虑。</p><p>在本文中考虑四个时间段：1、封锁前作为基线模型，2020年2月底到3月8日；2、全面封锁时期，从3月9日到5月18日；3、部分限制，从5月19日到6月3日；4、移除所有限制，6月4日到7月中旬</p><p>Fig1绘制了封锁前中后的流动网络特征，图a、b是封锁前地区级别的流动，区域颜色代表工作日每天平均简单度（即连接该节点边的平均数量，可看做流动限制的定性效应），边的颜色代表权重的对数。可以看到意大利大部分地区之间的连通性显著下降，以致消失，流动明显减少。而右边三幅图的节点均为7*7公里的栅格。在这里考虑了网络的两个基本属性，第一个是度分布：我们将流动水平定义为进入或离开一个地点的总人数，即节点的加权度（节点连边的权重相加），主要关注来往与某节点的所有人。第二个是：可以采用测量网络组件大小探究网络节点间全局连接程度，其中对最大的网络组件GCC（强连通巨片，即任意两点之间都是强连通）最关键。图c中绘制了随时间增长的平均加权度和GCC的变化，由于封锁时期增强移动限制，网络变得碎片化，更少的节点倾向于属于GCC，它的size即节点数量减小（fig c）。而且c中平均加权度和GCC变化惊人的相似，在后续网络弹性方面会探索。图d、e分别为非孤立节点组件和节点大于5的组件数量和平均大小，随着GCC的减小，较小的组件数量上升（fig d），组件的平均大小在减少。（fig e）。图f中测量不断变化的GCC可达性，计算平均最短路径和GCC的外径变化，随着GCC在锁定期间收缩，组件的平均最短路径长度和直径的增加，不同的节点实际上变得越来越远。</p><p>接下来，去研究在封锁之前和封锁期间栅格网络的一些特征是如何表现的。我们分析了一些网络特征的概率密度函数，发现它们可以近似用幂律逼近</p><p>Fig2：绘制了加权度、非加权度、边权和边的距离 的互补累积分布函数，青色和红色分别代表封锁前和封锁期间，虚线上面的值代表拉伸指数，虚线代表幂律拟合。度分布中在封锁期间指数较大(图2a和b)。加权和简单度分布都收缩了，这意味着更少的人(加权度)前往更少的地方。权重分布可能说明封锁的积极和消极方面最重要的影响。减少沿边缘旅行的人有助于减少传染，但也会产生显著的经济影响。在后续探究中详细提到。</p><p>为了对缩放行为进行探索，我们回顾了人类流动性的一个经常测量的特征，即控制移动距离的规律。这里有两点值得注意。这里观察到的指数明显大于参考文献中关于人类旅行的发现。造成这种差异的原因有几个。一个是意大利独特的几何形状，主要特征是相对较短的距离。该国的典型宽度约为300公里，而那不勒斯和米兰这两个相距相对较远的经济中心之间的距离接近900公里。因此，我们预计不会找到超过300公里的足够距离。我们可以从图2d中看到，在封锁前，坡度发生了变化，在约200km处变大。另一个重要因素来自于我们的数据限制，即采样周期为8小时，以及至少10人的人数下限，以建立两个栅格之间的边缘。然而，考虑到这些限制，我们的分析大致再现了人类流动的无标度行为。更重要的是，我们发现在封锁限制下，权重和距离的比例定律仍然成立，而权重指数进一步增加，覆盖范围缩小。而距离指数整个分布缩小了，分布的范围变化不大，在封锁前观察到的最远点在封锁期间也可以到达。此外，最显著的变化发生在中等距离，大约在200到200公里之间，这段距离覆盖了通常的日常通勤(还有一些多余的距离)。然而，与基本活动有关的工作人员可能仍在现场，旅行距离与封锁前相当。</p><p>上面分析了栅格之间的流动性，为了进一步评估潜在的经济影响，我们聚集了跨省份的流动性，比fig1地区级别更细粒度，但比栅格包含了经济意义。</p><p>Fig3：显示了限制措施的全面影响。颜色表示每个省的权重减少程度，可以看出封锁造成了严重的移动下降，大多数省份表现相似，下降了50%-90%。在逐步放松限制后流动也会相应回升。</p><p>Fig4：a、b分别绘制了大多数加权度最高的省份和最受影响的省份在封锁期、部分限制、封锁结束后三个时期的流动情况和基准模型的对比。4a突出显示了最具流动性的省份(即权重最高的省份)所受影响的相对相似性。这些省份在封锁期间流动持续减少(接近60%)，在限制逐步取消时也同样持续恢复。一些受影响最严重的省份，恢复水平存在明显差异，在取消限制后仍远低于最初水平，而其他省份的恢复水平接近或高于最初水平。</p><p>Fig5：然后将这三个阶段的流动性水平与初始水平进行了比较即图5a-c，5d表示随时间增长流动水平与初始流动性斜率值的变化（和图1c和e的形状一样）。在流动性限制的各个阶段，关系呈线性水平。（这一证据将在“经济影响”一节中加以利用，以评估流动限制的经济影响。）其中：流动性封锁时期与初始时期之间的线性关系显示下降了60%。在封锁结束后，总体流动性没有恢复到封锁前的水平，而是大约恢复到封锁前水平的87%。</p><p>图1c和3可能会让我们认为当解除限制时，在某种程度上流动几乎恢复正常。然而，我们采用一种从交通堵塞和服务质量领域提取的方法来表明事实并非如此。然后继续采用栅格网络，对于两个栅格之间的每条边，我们计算其权重在时间上的分布。然后我们确定该权重的最大值Wmax，作为每条边的第95个百分位。然后引入参数q =Wq/Wmax, 对于给定的q级别，对于每条边当权值大于Wq时存在边，小于Wq的边不存在。沿边移动的人数与其所承载的价值之间存在非线性关系。这种关系可能来自于人们收入分配的不均衡、旅行者经济活动的不一致性或其他类似的概念。由于这种关系，我们不仅想知道哪些边保留了下来，还想知道哪些边具有足够的重量，具有足够的经济价值。</p><p>Fig6：采用这种方法，修改参数q并分析网络连接的变化。首先考虑在q变化下失效的边是否不同。如图6a计算不同时间段q值变化导致新失效边的权重的平均值，在封锁之前网络对低值边的去除不敏感，也就是说只有在q值较高的情况下，显著边才会失效。然而在封锁期间权重变化明显，许多携带权重较大的边处于它们最大权重的20%-60%。此时网络脆弱且在相对较低q值时损失的边具有更大的权。</p><p>图6b显示了随时间变化，当q = qc时GCC分解，即分裂为明显较小的组件。高qc对应一个健壮的网络，而低qc则表征一个脆弱的网络。在封锁之前，它只发生在接近qc = 1的地方，也就是说，只有当边权略低于其最大值时才会被删除。这意味着在封锁之前，边权是相对稳定的，接近其典型峰值。在封锁期间，网络变得更加脆弱，容易因非常细微的扰动而断边，此时qc接近0.2，这意味着比普通时期脆弱近5倍。</p><p>图c:为了进一步了解封锁的持久影响，我们比较了在给定q级别上随时间变化形成GCC的节点。计算Jaccard系数，度量节点相似性的，即两个不同时间点的GCC节点数并集/交集。其中GCC1为封锁前随机一个工作日，GCC2为随时间变化的数据集中的工作日的。我们对q值的范围进行了计算，并发现在q的40%及以上的不同级别上构建的GCC，只保留了大约50%-70%的初始节点。此外，在封锁过程中前面显示其他指标有60%-70%的下降时，即使q的水平非常低，GCC也几乎完全消失了，与初始结构的相似度仅为10%左右。</p><p>现在，我们希望利用这一理解将流动性水平和观察到的网络功能下降水平与经济活动的实际水平联系起来。官方来源的可靠和准确的经济活动数据需要很长时间来衡量和评估。然而，移动模式可以通过各种方法实时地观察到。在这里，我们使用流动性数据作为经济表现的代理。</p><p>Fig7：图7a显示了意大利各省的国内生产总值(GDP)与其流动加权度之间的相关性。一个省的流动与GDP之间存在着密切的关系，其相关性（皮尔逊相关系数）超过60%:corr(GDP, Kw) = 0.64，这意味着流动性是经济的一个合理指标。</p><p>我们进一步比较 OECD的数据和我们的流动性指标，该数据基于多个可获得的来源在国家层面上计算经济活动可得出估计的GDP (EGDP)，且与官方公布的季度GDP相近。图7b显示了平均加权度(蓝绿色，左轴)与相关评估的GDP(红色，右轴)的密切程度。这里的相关性甚至更高达到ρ(EGDP， \<Kw,p>)= 0.89，每周更新的德塔EGDP = EGDP(i)−EGDP(i−1)，德塔Kw= \<Kw(i)>−\<Kw(i−1)>关系也很紧密，ρ(德塔EGDP，德塔Kw)= 0.58。</Kw(i−1)></Kw(i)></Kw,p></p><p>虽然受影响的流动性和经济影响之间的因果关系可能远非如此，但我们现在这种方法，可以对地区或地方的经济影响进行估计。图5显著的线性关系可以帮助我们粗略估计统一的各省gdp，从每个省份的流动模式中可以看出这种线性关系的偏差，再加上GDP和流动之间的密切关系，可以进行细粒度的、对特定省份的分析，并从观察到的流动动态中对不同的地方经济影响作出深入的预期。图7c-f显示了对几个省份的GDP的预测。</p><p>省-基于GDP的预测。为了生成每个省份的GDP预测，我们结合了流动和GDP之间的密切关系，包括静态(图7a)和动态(图7b)。为此，我们将一个地区随时间变化的GDP重写为(2)</p><p>其中是初始水平(这里将其作为2017年的值作为各省最新发布的数据点，但可以用更近期的估计来替代)，每周更新的使用动态关系进行估计。现在我们将每周GDP变化与流动性进行回归(3)作为初始估计。然后根据GDPi与之间的相关性，从后者生成相关随机变量，将3代入2。完成最后一部分是为了能够围绕平均水平生成统计数据，这可以通过将相关省份的插入3直接得到。现在我们有了计算预期GDPt和它可能需要的范围的所有组件。</p><p>但是为了揭示意大利流动限制对不同领土的异质反应（可能标志着地方经济系统的竞争经济轨迹），在图8中展示了意大利流动网络与平均收入水平的关系。即使在实行限制的情况下经济仍保持联系，且保持相对的经济实力。我们考虑的是在市一级构建的流动网络和人均收入。</p><p>在大流行爆发之前，意大利的流动网络是由一个主要连接的城市集团组成的，平均而言这些城市的人均收入水平高于网络中较次要的城市。在实施封锁限制后，我们注意到GCC的规模显著缩小，而从人均收入却有所增加。因此，为遏制病毒传播而实施的流动限制的一个相关影响是出现了强制的经济隔离，即人口高收入的城市往往相互联系，而人口经济条件较差的城市则被排除在意大利流动网络的主要组成部分之外。一旦解除流动性限制，这种影响就会消失，并迅速恢复到封锁前的水平。此外，渗透过程可以提供信息，以确定哪些城市可能在网络开始恶化时脱离GCC。如图6所示，封锁限制决定了参数q的急剧下降。因此，图8强调了在封锁期间，GCC消散之前达到的平均节点数与q = 0时的非常相似。然而在封锁前阶段或取消封锁限制后，逐步脱离的节点的人均收入低于留在GCC中的节点。而且GCC的核心似乎指向高度连接节点的存在，这些节点的平均经济条件也比其它的更好。</p>]]></content>
      
      
      <categories>
          
          <category> 文献调研 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>COVID-19 and human mobility</title>
      <link href="posts/39e7a431.html"/>
      <url>posts/39e7a431.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、个体"><a href="#一、个体" class="headerlink" title="一、个体"></a>一、个体</h1><h2 id="1、20210223-Scaling-of-contact-networks-for-epidemic-spreading-in-urban-transit-systems"><a href="#1、20210223-Scaling-of-contact-networks-for-epidemic-spreading-in-urban-transit-systems" class="headerlink" title="1、20210223-Scaling of contact networks for epidemic spreading in urban transit systems"></a>1、20210223-Scaling of contact networks for epidemic spreading in urban transit systems</h2><p>利用中国三个特大城市（广州上海深圳）的地铁智能卡数据构建了个人层面的接触网络，并在此基础上建立了疾病传播的模型和研究。尽管三个城市的城市形式、网络布局和移动模式不同，但绘制地铁乘客接触次数和接触时间的度分布，发现三个城市的地铁系统有着相似的联系网络结构。但随着接触次数和接触时间的增加，节点度分布的尾部呈指数衰减，这与地铁出行模式的观测结果相似，衰变率随时间而变化，各城市之间存在差异。在个体层面构建接触网络，同时考虑非加权和加权接触网络。对于未加权的MCN，每个节点代表一个出行者，一对节点之间的链接表示这两个出行者有正的概率在同一列地铁上。该模型解释了地铁接触网络的结构特性与传染病风险水平之间的关系。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210804103453565.png" class title="image-20210804103453565"></div><h2 id="2、20210609-Tracing-contacts-to-evaluate-the-transmission-of-COVID-19-from-highly-exposed-individuals-in-public-transportation"><a href="#2、20210609-Tracing-contacts-to-evaluate-the-transmission-of-COVID-19-from-highly-exposed-individuals-in-public-transportation" class="headerlink" title="2、20210609-Tracing contacts to evaluate the transmission of COVID-19 from highly exposed individuals in public transportation"></a>2、20210609-Tracing contacts to evaluate the transmission of COVID-19 from highly exposed individuals in public transportation</h2><p>在这项工作中使用了两个流行病学模型，以了解巴西福塔莱萨 COVID-19疫情期间的公共交通传播。采用接触追踪模型估计城市公交车内部传播(微观尺度)，再采用分室模型（SEIIR）评估整个城市(宏观尺度)内传播，结果显示，除了第一波和第二波每日病例之间的三个月，$Re^{bus}$在当地COVID-19爆发期间一直跟踪$Re^{city}$。此外，直到7月底，由公共汽车内医护人员传播的$Re^{health}$值持续大于$Re^{bus}$值。医护人员等其他高度暴露人群也可能以类似方式影响病毒传播动态。因此必须提出特殊政策来支持(或避免)高度暴露人群的流离失所</p><div style="width: 60%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210813142725646.png" class title="image-20210813142725646"></div><h2 id="3、20210318-A-Particle-Based-COVID-19-Simulator-With-Contact-Tracing-and-Testing"><a href="#3、20210318-A-Particle-Based-COVID-19-Simulator-With-Contact-Tracing-and-Testing" class="headerlink" title="3、20210318-A Particle-Based COVID-19 Simulator With Contact Tracing and Testing"></a>3、20210318-A Particle-Based COVID-19 Simulator With Contact Tracing and Testing</h2><p>开发了一种基于粒子的SEIR模拟器，具有接触者追踪和测试功能。与SEIR模型相比，主要优点是，它将每个个体建模为一个粒子，个体作为带有位置、速度和流行病状态的粒子在2D地图上建模，根据COVID-19的实际数据进行校准，从而能够更真实地模拟疾病传播，以及抑制和缓解干预策略的影响。接触者追踪模块基于移动应用程序的使用，并存储每个粒子的接触者列表，这样，如果确定某个粒子被感染，则对列表上的所有粒子进行隔离或隔离。最有效的方法是检测和接触者追踪相结合的策略。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819110735318.png" class title="image-20210819110735318"></div><h2 id="4、20201023-COVID-19-Spread-in-Saudi-Arabia-Modeling-Simulation-and-Analysis"><a href="#4、20201023-COVID-19-Spread-in-Saudi-Arabia-Modeling-Simulation-and-Analysis" class="headerlink" title="4、20201023-COVID-19 Spread in Saudi Arabia Modeling,Simulation and Analysis"></a>4、20201023-COVID-19 Spread in Saudi Arabia Modeling,Simulation and Analysis</h2><p>在沙特阿拉伯建立了一个真实的个人联系网络，捕捉沙特阿拉伯个人的现实社会行为。然后使用SIR模型结合真实数据来模拟COVID-19的传播。该模型解释了个体接触行为的动态特性和个体间易感性的变化。该模拟模型可用于评估沙特采取的控制措施的有效性，去除相关节点之间的边缘，部分业务重新开放和正常业务导致在给定的节点集和给定的节点集之间添加，并设定特定的符合率，引入控制措施并预测沙特阿拉伯未来的疫情动态，发现关闭学校和清真寺对推迟疫情高峰和降低感染率的影响最大。该模型还被用于计算需要接种疫苗以阻止疫情的人数百分比。<img src="/posts/39e7a431.htm/39e7a431/image-20210805120113592.png" class title="image-20210805120113592"></p><h2 id="5、20200806-Characterizing-superspreading-events-and-age-specific-infectiousness-of-SARS-CoV-2-transmission-in-Georgia-USA"><a href="#5、20200806-Characterizing-superspreading-events-and-age-specific-infectiousness-of-SARS-CoV-2-transmission-in-Georgia-USA" class="headerlink" title="5、20200806-Characterizing superspreading events and age-specific infectiousness of SARS-CoV-2 transmission in Georgia, USA"></a>5、20200806-Characterizing superspreading events and age-specific infectiousness of SARS-CoV-2 transmission in Georgia, USA</h2><p>将个体监测数据与地理位置数据和集合流动性数据整合在一起，从而更细粒度地理解SARS-CoV-2的传播动态，分析了2020年3月至5月初乔治亚州5个县(城市和农村)的报告病例。在乔治亚州5个县中，超级扩张可能对农村地区产生主要影响。本文结果中表明前2%的病例(造成感染人数最多的病例)直接造成了约20%的感染。我们还发现，年轻组感染病例(<60岁)往往更具有传染性，并促进超级传播。采用后验方法，去计算超级传播，个体信息跨度较大。<img src="/posts/39e7a431/image-20210803102146742.png" class title="image-20210803102146742"></60岁)往往更具有传染性，并促进超级传播。采用后验方法，去计算超级传播，个体信息跨度较大。<img></p><h2 id="6、202008-A-data-driven-network-model-for-the-emerging-COVID-19-epidemics-in-Wuhan-Toronto-and-Italy"><a href="#6、202008-A-data-driven-network-model-for-the-emerging-COVID-19-epidemics-in-Wuhan-Toronto-and-Italy" class="headerlink" title="6、202008-A data-driven network model for the emerging COVID-19 epidemics in Wuhan, Toronto and Italy"></a>6、202008-A data-driven network model for the emerging COVID-19 epidemics in Wuhan, Toronto and Italy</h2><p>假设在没有真实接触者追踪数据的情况下，采用SIR模型探究异质性个体间的疾病传播，每个网络的节点度范围在1 - 10之间，即一个感染者平均每天有1 - 10个接触者，他们可以将感染传播给另一个人。分别拟合到中国武汉、加拿大多伦多和意大利三个地区。此外，个体在流行病期间的行为变化也会改变网络结构。当这种情况发生时，可以在模型中调整网络结构，预测这些变化对疫情阈值、疫情峰值、峰值时间、停止时间和最终感染人口规模的影响。<img src="/posts/39e7a431.htm/39e7a431/image-20210803100537810.png" class title="image-20210803100537810"></p><h2 id="7、20210301-Predicting-the-effects-of-COVID-19-related-interventions-in-urban-settings-by-combining-activity-based-modelling-agent-based-simulation-and-mobile-phone-data"><a href="#7、20210301-Predicting-the-effects-of-COVID-19-related-interventions-in-urban-settings-by-combining-activity-based-modelling-agent-based-simulation-and-mobile-phone-data" class="headerlink" title="7、20210301-Predicting the effects of COVID-19 related interventions in urban settings by combining activity-based modelling, agent-based simulation, and mobile phone data"></a>7、20210301-Predicting the effects of COVID-19 related interventions in urban settings by combining activity-based modelling, agent-based simulation, and mobile phone data</h2><p>本文将人类移动模型、感染力学模型和以人为中心的疾病进展模型结合到流行病学模拟模型SEIR中。与其他模型不同的是，我们直接从数据中获取人（合成人）的动作，包括他们可以与他人互动的干预活动。该模型利用手机移动数据轨迹，被用于重现柏林的流行病。结果表明，可以很好地模拟柏林的第二次浪潮，其中休闲活动的户外部分具有明确的温度依赖性。然后使用该模型评估不同的干预策略，如关闭教育设施、减少其他户外活动、戴口罩或追踪接触者，并确定每次干预的再感染数字R的不同百分比变化<img src="/posts/39e7a431.htm/39e7a431/image-20210804152130089.png" class title="image-20210804152130089"></p><h2 id="8、20200827-Simulation-of-the-COVID-19-epidemic-on-the-social-network-of-Slovenia-Estimating-the-intrinsic-forecast-uncertainty"><a href="#8、20200827-Simulation-of-the-COVID-19-epidemic-on-the-social-network-of-Slovenia-Estimating-the-intrinsic-forecast-uncertainty" class="headerlink" title="8、20200827-Simulation of the COVID-19 epidemic on the social network of Slovenia Estimating the intrinsic forecast uncertainty"></a>8、20200827-Simulation of the COVID-19 epidemic on the social network of Slovenia Estimating the intrinsic forecast uncertainty</h2><p>采用基于网络的方法模拟病毒传播，详细的疾病进展模型与病毒传播模型相耦合，简化后的社会网络由200多万个节点（代表居民）组成家庭/护理中心集群，代表了斯洛文尼亚的人口和其居民的联系，并有家庭和外部联系的现实区别。当R的估计约为0.75时，感染在家庭内传播的可能性远远大于在家庭外传播的可能性。如果继续采取目前的干预措施，不采取额外的干预措施，5月底繁殖数量将开始急剧下降，这意味着病毒只会在部分家庭集中传播，这是有效的病毒控制。(没有移动数据)</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819134403885.png" class title="image-20210819134403885"></div><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819134331815.png" class title="image-20210819134331815"></div><h2 id="1、202106-Changing-Mobility-Lifestyle-A-Case-Study-on-the-Impact-of-COVID-19-Using-Personal-Google-Locations-Data"><a href="#1、202106-Changing-Mobility-Lifestyle-A-Case-Study-on-the-Impact-of-COVID-19-Using-Personal-Google-Locations-Data" class="headerlink" title="1、202106-Changing Mobility Lifestyle: A Case Study on the Impact of COVID-19 Using Personal Google Locations Data"></a>1、202106-Changing Mobility Lifestyle: A Case Study on the Impact of COVID-19 Using Personal Google Locations Data</h2><p>在本文中，作者基于来自 Google 位置服务的数据，通过揭示大流行前和大流行期间活动的地理模式，从空间角度描述了3个人在 COVID-19 大流行之前和期间三个月的行为变化，揭示COVID-19是否(以及在多大程度上)影响了人类的流动性。尽管它只评估了三个人，而且该研究不能充分代表，但它是可能以这种准确度进行数据处理的一个独特例子。结果显示，covid-19限制对作者的日常流动性强度有不同的影响，这与他们个人的工作-生活习惯密切相关。</p><p>Figure 1.在新冠肺炎大流行前和期间，三个人在国际（顶部）、区域（中）和城市一级（底部）的流动地点</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827221409398.png" class title="image-20210827221409398"></div><h2 id="2、20200914-Probabilistic-and-mean-fifield-model-of-COVID-19-epidemics-with-user-mobility-and-contact-tracing"><a href="#2、20200914-Probabilistic-and-mean-fifield-model-of-COVID-19-epidemics-with-user-mobility-and-contact-tracing" class="headerlink" title="2、20200914-Probabilistic and mean-fifield model of COVID-19 epidemics with user mobility and contact tracing"></a>2、20200914-Probabilistic and mean-fifield model of COVID-19 epidemics with user mobility and contact tracing</h2><p>本研究的目标是基于多类型分支过程的已知概率模型提出一个详细的covid-19流行病的离散时间模型，并详细说明该模型的简单扩展，以捕获接触者追踪程序和用户移动性的影响。我们将这个模型与日常住院治疗的公共数据进行对比，并讨论其应用以及潜在的估计程序。建立模型的目的：它可以用来评估可用的时间序列，即所谓的接触率，进而评估用户流动性对流行病传播的影响。它还可用于监测平台，以推断特定亚群体（特别是感染者或免疫接种者的一部分）的状况，这是实施有针对性的检测运动的先决条件。</p><p>Figure 1:模型1中个体状态的状态图。虚线箭头表示新病例的污染：每个 A/P（resp. per I1/I2）个体每天新 E 病例的平均数是 αa (resp. αi)。</p> <div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827221528419.png" class title="image-20210827221528419"></div><h2 id="3、20210608-Modelling-representative-population-mobility-for-COVID-19-spatial-transmission-in-South-Africa"><a href="#3、20210608-Modelling-representative-population-mobility-for-COVID-19-spatial-transmission-in-South-Africa" class="headerlink" title="3、20210608-Modelling representative population mobility for COVID-19 spatial transmission in South Africa"></a><strong>3、20210608-Modelling representative population mobility for COVID-19 spatial transmission in South Africa</strong></h2><p>在本文中，我们通过使用主成分分析和层次聚类，展示了不同分辨率不同来源的空间流动性数据如何导致关于空间单元连通性的不同结论。空间连接是空间建模中必不可少的第一步，它提供了空间单元之间的空间依赖性的量化。我们比较了使用不同的空间权重矩阵来量化不同的空间单位之间的关系，还讨论了不同来源的优势，以及如何在模拟病毒传播时利用它们。我们通过使用主成分分析来压缩可以从空间权重矩阵获得的信息，然后使用层次聚类来识别最强的空间关联，并从本质上展示空间权重矩阵所识别的关系类型。</p><p>Figure 4. Method 4 A. Spatial weights (weights ≤ 5 not shown), B. Complete linkage clustering (clusters indicated by colours)</p> <img src="/posts/39e7a431.htm/39e7a431/image-20210827222058893.png" class title="image-20210827222058893"><h2 id="4、20210816-Travelers-Tracing-and-Mobility-Profifiling-Using-Machine-Learning-in-Railway-Systems"><a href="#4、20210816-Travelers-Tracing-and-Mobility-Profifiling-Using-Machine-Learning-in-Railway-Systems" class="headerlink" title="4、20210816-Travelers-Tracing and Mobility Profifiling Using Machine Learning in Railway Systems"></a><strong>4、20210816-Travelers-Tracing and Mobility Profifiling Using Machine Learning in Railway Systems</strong></h2><p>本文的主要策略是利用现有铁路系统中具有移动意识的旅客追踪传感器，包括 WiFi、射频识别 (RFID)、蓝牙、超宽带 (UWB) ，匿名收集不同年龄组的旅客数据并对其进行假名用于 AI 驱动的实时决策分析。本文提出了一种机器学习 (ML) 驱动的智能方法来管理 16-59 岁和 60 岁以上（弱势年龄组）的日常火车旅客，使用伦敦地铁和地面(LUO)网络推荐特定时间和路线、指定车厢、车站、站台和特殊服务。将LUO 数据集与各种 ML 算法进行比较，以对不同年龄组的旅行者进行分类，其中支持向量机 (SVM) 移动性预测分类在 16-59 岁和 60 岁以上年龄组中分别达到 86.43% 和 81.96%。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210827222208234.png" class title="image-20210827222208234"><h2 id="5、20200325-Stochastic-modelling-of-the-efects-of-human‑mobility-restriction-and-viral-infection-characteristics-on-the-spread-of-COVID‑19"><a href="#5、20200325-Stochastic-modelling-of-the-efects-of-human‑mobility-restriction-and-viral-infection-characteristics-on-the-spread-of-COVID‑19" class="headerlink" title="5、20200325-Stochastic modelling of the efects of human‑mobility restriction and viral infection characteristics on the spread of COVID‑19"></a><strong>5、20200325-Stochastic modelling of the efects of human‑mobility restriction and viral infection characteristics on the spread of COVID‑19</strong></h2><p>在本文中，我们提出了一个基于锁定放松策略的时间、范围和模式的波状感染爆发的随机模型来证明平衡重新开放社会和实施尽量减少人际接触所需的非药物措施已经变得重要。在我们的模型中，当两个人并置在同一地点时，人们可以在一维网格上的离散位置之间移动，可能会感染病毒。模型具有三组可调参数，其特征在于 (i) 病毒传播、(ii) 病毒检测和 (iii) 个人流动程度，因此，它能够对二次传播的潜力进行定性评估。研究结果表明，全面封锁将产生最低的感染数量（正如预期的那样）。此外，当个人流动性超过临界水平时，感染会增加，并迅速达到完全取决于人口密度的平台期。如果没有超过 40% 的有症状患者的检测/隔离能力，则禁闭是无效的。最后，采取行动确保病毒传播概率低于 0.4，这在现实生活中可能意味着社交疏远或戴口罩等措施可能与软封锁一样有效。</p><p>Figure 1.(a)仿真示意图算法。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827222306060.png" class title="image-20210827222306060"></div><h2 id="6、20200527-Evaluating-How-Smartphone-Contact-Tracing-Technology-Can-Reduce-the-Spread-of-Infectious-Diseases-The-Case-of-COVID-19"><a href="#6、20200527-Evaluating-How-Smartphone-Contact-Tracing-Technology-Can-Reduce-the-Spread-of-Infectious-Diseases-The-Case-of-COVID-19" class="headerlink" title="6、20200527-Evaluating How Smartphone Contact Tracing Technology Can Reduce the Spread of Infectious Diseases: The Case of COVID-19"></a><strong>6、20200527-Evaluating How Smartphone Contact Tracing Technology Can Reduce the Spread of Infectious Diseases: The Case of COVID-19</strong></h2><p> 为遏制或减少扩散而采取的一项常见措施是检测受感染的个体并追踪他们之前的接触者，然后选择性地隔离任何可能已被感染的个体。我们可以使用智能手机等移动设备以嵌入式定位和通信技术（如 GPS、蜂窝网络、Wi-Fi 和蓝牙）追踪收集其所有者的位置和联系人。本文首先评估和比较几种接触者追踪技术和获取接触者的相关方法，同时重点评估了智能手机接触者追踪如何影响 COVID-19 疾病的控制和传播。为此，我们创建了一个流行病模型，用于评估所采取措施的效率和成本（隔离人数），具体取决于所使用的智能手机接触者追踪技术。结果表明，为了对 COVID-19 疾病有效，接触者追踪技术必须精确，必须快速追踪接触者，而且很大比例的人口必须使用智能手机接触者追踪应用程序。这些严格的要求使得基于智能手机的接触者追踪在病毒首次爆发期间无法有效控制感染的传播。然而，考虑到第二波疫情，部分人口将获得免疫力，或者结合其他一些更宽松的措施，基于智能手机的接触者追踪可能非常有用。 </p><p><strong>Figure 1.</strong> 第一天前40个节点的联系网络图。a)真实联系人；b）蓝牙联系人。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827222358226.png" class title="image-20210827222358226"></div><h2 id="7、20200709-How-the-individual-human-mobility-spatio‑temporally-shapes-the-disease-transmission-dynamics"><a href="#7、20200709-How-the-individual-human-mobility-spatio‑temporally-shapes-the-disease-transmission-dynamics" class="headerlink" title="7、20200709-How the individual human mobility spatio‑temporally shapes the disease transmission dynamics"></a><strong>7、20200709-How the individual human mobility spatio‑temporally shapes the disease transmission dynamics</strong></h2><p>本文中，我们将基于个体的SEIR模型与个体人类移动模型相结合，解决了个人人类流动如何在时空上影响传染病传播的问题。我们将人类流感在比利时和马提尼克这两个对比鲜明的国家的传播作为案例研究，以评估人类流动对感染传播的具体作用。为了跟踪感染的传播，我们引入了一个指标，“感染首次到达的时间 ”，以便从一个起源点开始的感染第一次到达另一个给定点。为了表征人类流动的景观，我们还基于地区之间的转换矩阵定义了“相对吸引力（RA）”。现在，我们研究个体人类流动性如何影响传播的目标相当于确定或构建和解释变量 RA之间的关系。结果发现，在这两种情况下都发现遵循作为 RA 函数的截断幂律，表明时空感染传播与宿主移动性景观之间存在一对一的关系。</p><p>Figure 1在比利时和马提尼克岛，一种不受控制的流行病的地理时间传播模式。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827222533738.png" class title="image-20210827222533738"></div><h2 id="8、20200504-Containing-COVID-19-Among-627-386-Persons-in-Contact-With-the-Diamond-Princess-Cruise-Ship-Passengers-Who-Disembarked-in-Taiwan-Big-Data-Analytics"><a href="#8、20200504-Containing-COVID-19-Among-627-386-Persons-in-Contact-With-the-Diamond-Princess-Cruise-Ship-Passengers-Who-Disembarked-in-Taiwan-Big-Data-Analytics" class="headerlink" title="8、20200504-Containing COVID-19 Among 627,386 Persons in Contact With the Diamond Princess Cruise Ship Passengers Who Disembarked in Taiwan: Big Data Analytics"></a>8、20200504-Containing COVID-19 Among 627,386 Persons in Contact With the Diamond Princess Cruise Ship Passengers Who Disembarked in Taiwan: Big Data Analytics</h2><p>本文展示了大数据分析的独特应用，基于智能接触追踪的移动传感器数据，通过其他大传感器监控数据交叉验证，通过移动地理定位方法和快速分析识别了与2020年1月31日停靠在台湾基隆的钻石公主号游轮上3000多名乘客有过接触的627,386个潜在联系人。通过短信提供自我监测和自我隔离信息，并为有症状的接触者提供严重急性呼吸系统综合症冠状病毒(SARS-CoV-2)检测。国民健康保险声称将大数据与因肺炎住院并建议接受SARS-CoV-2筛查的患者的COVID-19 相关结果相关联。数据表明，具有智能接触者追踪功能的大数据分析、用于自我限制的自动警报消息以及使用健康保险数据跟踪与COVID-19相关的结果可能会减少传统流行病学接触者追踪所需的资源</p><h2 id="9、20210415-Analysis-of-mobility-data-to-build-contact-networks-for-COVID-19"><a href="#9、20210415-Analysis-of-mobility-data-to-build-contact-networks-for-COVID-19" class="headerlink" title="9、20210415-Analysis of mobility data to build contact networks for COVID-19"></a><strong>9、20210415-Analysis of mobility data to build contact networks for COVID-19</strong></h2><p>本文概述了从移动数据中提取交互作用并构建可用于流行病学模型的网络的方法。提取了几种交互度量：人与人之间的交互，单个人的累积互动，以及发生在特定企业的累积互动。计算网络指标以识别结构趋势，这些趋势根据居家订单的时间显示出明显的变化。测量结果网络中的相互作用和结构趋势可用于更好地了解潜在的传播事件、可归类为密切接触的相互作用的百分比，以及控制传播的政策选择的影响。    </p><p>Fig 10.使用接触网络的流行病学模拟结果。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210827222954290.png" class title="image-20210827222954290"></div><h1 id="二、群体"><a href="#二、群体" class="headerlink" title="二、群体"></a>二、群体</h1><h2 id="1、20210312-Impact-of-close-interpersonal-contact-on-COVID-19-incidence-evidence-from-one-year-of-mobile-device-data"><a href="#1、20210312-Impact-of-close-interpersonal-contact-on-COVID-19-incidence-evidence-from-one-year-of-mobile-device-data" class="headerlink" title="1、20210312-Impact of close interpersonal contact on COVID-19 incidence evidence from one year of mobile device data"></a>1、20210312-Impact of close interpersonal contact on COVID-19 incidence evidence from one year of mobile device data</h2><p>在美国康涅狄格州，利用匿名移动设备地理位置数据对SARS-CoV-2人际密切接触者进行人群级监测的方法。用手机数据计算预估接触率（2米内），按居住地区汇总接触事件计数，以获得每个城镇居民每天经历的人际接触总强度的估计。在加上已感染的人数，就可以预估感染率，而且接触率正比于感染率，所以可以进行预警。当将接触率纳入COVID-19传播的易感暴露感染转移(SEIR)模型时，该接触率准确预测了康涅狄格州城镇在这段时间内的COVID-19病例。主要是利用个人数据计算接触率</p><img src="/posts/39e7a431.htm/39e7a431/image-20210819101343389.png" class title="image-20210819101343389"><img src="/posts/39e7a431.htm/39e7a431/image-20210819101942019.png" class title="image-20210819101942019"><h2 id="2、20200715-Modelling-the-impact-of-testing-contact-tracing-and-household-quarantine-on-second-waves-of-COVID-19"><a href="#2、20200715-Modelling-the-impact-of-testing-contact-tracing-and-household-quarantine-on-second-waves-of-COVID-19" class="headerlink" title="2、20200715-Modelling the impact of testing, contact tracing and household quarantine on second waves of COVID-19"></a>2、20200715-Modelling the impact of testing, contact tracing and household quarantine on second waves of COVID-19</h2><p>将匿名地理迁移数据与人口普查和人口统计数据相结合，构建了一个详细的基于agent的在波士顿都市区传播模型。在一段时间内严格保持社会距离，然后进行强有力的检测、接触者追踪和家庭隔离，可以将疾病控制在医疗系统的能力范围内，同时使经济活动得以重新开放。结果表明，在缺乏对SARS-CoV-2的群体免疫的情况下，基于加强检测和接触者追踪的应对系统可以在放松社会距离干预方面发挥重要作用。复合种群模型，agent就是具有自我意识的主体，一般用来做个体模拟群体。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805180342253.png" class title="image-20210805180342253"></div><h2 id="3、20210127-Variation-in-human-mobility-and-its-impact-on-the-risk-of-future-COVID-19-outbreaks-in-Taiwan"><a href="#3、20210127-Variation-in-human-mobility-and-its-impact-on-the-risk-of-future-COVID-19-outbreaks-in-Taiwan" class="headerlink" title="3、20210127-Variation in human mobility and its impact on the risk of future COVID-19 outbreaks in Taiwan"></a>3、20210127-Variation in human mobility and its impact on the risk of future COVID-19 outbreaks in Taiwan</h2><p>在台湾利用Facebook的匿名移动地点（签到数据，数据并不连续，移动尺度也很大）来识别感染风险较高的城市和地区输入。开发了一个交互式应用程序（基于SIR模型），允许用户改变输入和假设，并显示疾病的空间传播以及不同初始条件下城际和城市间旅行减少的影响。城市内和城市间的移动都影响疫情动态，前者对病例总数的影响更大，后者影响地理范围。虽然文章说讨论的是个体差异， 但是其实文章中更多的是个体的综合（利用个体衡量地点传播概率），所以大部分还是群体层面的讨论</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819105556381.png" class title="image-20210819105556381"></div><h2 id="4、20210819-Serial-interval-of-SARS-CoV-2-was-shortened-over-time-by-nonpharmaceutical-interventions"><a href="#4、20210819-Serial-interval-of-SARS-CoV-2-was-shortened-over-time-by-nonpharmaceutical-interventions" class="headerlink" title="4、20210819-Serial interval of SARS-CoV-2 was shortened over time by nonpharmaceutical interventions"></a>4、20210819-Serial interval of SARS-CoV-2 was shortened over time by nonpharmaceutical interventions</h2><p>编制中国大陆1407对COVID-19传播对数据库，其中677对传播对的感染者和被感染者均有症状发病日期和社会关系（传播对数据还包含大多数感染者的年龄、性别、家庭和隔离延迟(即从症状出现到隔离的时间)的信息。这就允许了粒状的分层。），发现COVID-19的平均序列间隔在一个月内(2020年1月9日至2月13日)从7.8天大幅缩短至2.6天。这一变化是由加强的非药物干预，特别是病例隔离推动的。我们还表明，与使用常规固定的序列间隔分布相比，使用允许随时间变化的序列间隔实时估计可以提供更准确的繁殖数量估计。这些发现可以提高我们评估传播动态、预测未来发病率和估计控制措施影响的能力。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820105748982.png" class title="image-20210820105748982"></div><h2 id="5、20210325-Human-mobility-and-poverty-as-key-drivers-of-COVID-19-transmission-and-control"><a href="#5、20210325-Human-mobility-and-poverty-as-key-drivers-of-COVID-19-transmission-and-control" class="headerlink" title="5、20210325-Human mobility and poverty as key drivers of COVID-19 transmission and control"></a>5、20210325-Human mobility and poverty as key drivers of COVID-19 transmission and control</h2><p>利用以色列的2630个地区内和之间的300万用户的匿名移动数据，构建基于年龄风险区域结构的分室模型SEIR（个人数据计算平均出行次数），对每个年龄组的个体进行高低风险分类，研究结果提出干预策略应主要侧重于保护疫情地区的老年人和有潜在疾病的个人；发现SARS-CoV-2更有可能在更贫困的地区传播，低社会经济地位的人面临更高的风险，并受到人类流动的影响。因此应投入更多资源帮助贫困地区。采用以老年人为重点的暂时和局部封锁。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819115822751.png" class title="image-20210819115822751"></div><h2 id="6、20210120-Modelling-and-predicting-the-effect-of-social-distancing-and-travel-restrictions-on-COVID-19-spreading"><a href="#6、20210120-Modelling-and-predicting-the-effect-of-social-distancing-and-travel-restrictions-on-COVID-19-spreading" class="headerlink" title="6、20210120-Modelling and predicting the effect of social distancing and travel restrictions on COVID-19 spreading"></a>6、20210120-Modelling and predicting the effect of social distancing and travel restrictions on COVID-19 spreading</h2><p>基于SIR引入了一个基于时间网络的复合人群模型，校准了意大利COVID-19疫情数据，并用于评估模块间以及模块内部个体流动，评估封锁和限制个人活动的影响，以评估不同的npi的有效性，不同的时间和严重程度。结果表明，流动限制的影响在很大程度上取决于在疫情爆发的早期阶段及时实施国家传染病监测的可能性，而减少活动的政策应在疫情爆发后优先考虑。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819132844578.png" class title="image-20210819132844578"></div><h2 id="7、20210329-The-effectiveness-of-social-bubbles-as-part-of-a-Covid-19-lockdown-exit-strategy-a-modelling-study"><a href="#7、20210329-The-effectiveness-of-social-bubbles-as-part-of-a-Covid-19-lockdown-exit-strategy-a-modelling-study" class="headerlink" title="7、20210329-The effectiveness of social bubbles as part of a Covid-19 lockdown exit strategy, a modelling study"></a>7、20210329-The effectiveness of social bubbles as part of a Covid-19 lockdown exit strategy, a modelling study</h2><p>我们对一个与英国相似的合成人口使用了基于个体的模型，将传播风险分为来自社区、家庭内部和来自同一社会泡沫中的其他家庭。基本情况考虑非必需商店和学校关闭的情况，第二次家庭攻击率为20%，初始复制数为0.8。我们模拟了包括孩子在内的家庭、单人居住家庭和所有家庭的社会泡沫策略(两个家庭组成一对单独的家庭)。将家庭外接触者聚集成单独的气泡是增加接触者的有效策略，同时限制流行病风险的相关增加。在基本情况下，与非聚集性接触增加相比，社会泡沫减少了42%的死亡人数。我们发现，如果所有家庭都形成社会泡沫，生殖数量可能会增加到R=1的流行阈值以上。分析强调了继续保持社交距离的必要性，尽管社交泡沫战略是扩大接触、同时限制病例复发风险的一种有效方式。建议只向那些特别难以应对封锁的人推荐社交泡沫，同时通过优先安排户外聚会，尽可能减少传播的机会，并尽可能坚持保持距离的建议，可在尽量减少对心理健康的影响和尽量减少病例死灰复燃的风险之间取得有效平衡。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819231626499.png" class title="image-20210819231626499"></div><h2 id="8、20210721-Infectious-disease-dynamics-in-metapopulations-with-heterogeneous-transmission-and-recurrent-mobility"><a href="#8、20210721-Infectious-disease-dynamics-in-metapopulations-with-heterogeneous-transmission-and-recurrent-mobility" class="headerlink" title="8、20210721-Infectious disease dynamics in metapopulations with heterogeneous transmission and recurrent mobility"></a>8、20210721-Infectious disease dynamics in metapopulations with heterogeneous transmission and recurrent mobility</h2><p>描述了一个具有循环迁移模式的混合种群上的离散SIS动力学的完整马尔可夫方程组，方程描述了整个系统中感染个体数量的时空演化，并与广泛的基于agent的模拟结果显示了良好的一致性。在计算上，迭代方程比模拟要快几个数量级，还允许得出关于流行病、流动性和复合人口内部联系结构之间相互作用的分析结果。在接近疫情阈值时，疫情主要由超级传播者和超级传播者之间的联系维持，而由于人类流动导致的底层连通性分布同质化，导致超级传播者之间的联系减弱。在临界状态下观察到的流行病危害在超临界状态下是相反的，在超临界状态下，流动性增加了流行病流行，因为它增加了几乎没有联系的个人的潜在传染性接触的平均数量。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210804143857241-1629349012246.png" class title="image-20210804143857241"></div><h2 id="9、20210319-The-social-cost-of-contacts-Theory-and-evidence-for-the-first-wave-of-the-COVID-19-pandemic-in-Germany"><a href="#9、20210319-The-social-cost-of-contacts-Theory-and-evidence-for-the-first-wave-of-the-COVID-19-pandemic-in-Germany" class="headerlink" title="9、20210319-The social cost of contacts Theory and evidence for the first wave of the COVID-19 pandemic in Germany"></a>9、20210319-The social cost of contacts Theory and evidence for the first wave of the COVID-19 pandemic in Germany</h2><p>在流行病学SIR模型的基础上，我们提出了一个具有异质性个体的经济-流行病学模型，该模型从社会接触中获得效用，从而产生感染风险。以易感染个体的社会距离为重点，主要贡献是用德国从COVID-19大流行开始就社会距离和不纯利他主义的独特调查数据校准模型，量化了这一差距。单纯的自私行为不会导致接触人数的初始急剧减少，但也会达到准稳定的感染水平，即每10万人中约有10人感染。不纯的利他行为，尽管私人和社会接触的成本之间存在相当大的差距，但私人的自我保护措施和保护他人的措施可以显著有助于缓解社会成本问题。（数据包含调查和手机移动数据POI、出行次数）</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807125607619.png" class title="image-20210807125607619"></div><h2 id="10、20201005-Predicting-Onset-of-COVID-19-with-Mobility-Augmented-SEIR-Model"><a href="#10、20201005-Predicting-Onset-of-COVID-19-with-Mobility-Augmented-SEIR-Model" class="headerlink" title="10、20201005-Predicting Onset of COVID-19 with Mobility-Augmented SEIR Model"></a>10、20201005-Predicting Onset of COVID-19 with Mobility-Augmented SEIR Model</h2><p>开发了流动性增强SEIR模型(MA-SEIR)，该模型利用谷歌的聚合和匿名流动性数据（各类场所的流动）来增强经典的分室模型。预测其随后在不同地理区域的传播和发病。通过量化地方和全球人口移动方式的重大变化，这为了解近实时总体移动数据在疾病传播建模中的作用提供了依据。还通过模拟不同的流动性情景，说明了该方法用于估计流动性减少或增加对COVID-19传播的影响。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808113330028.png" class title="image-20210808113330028"></div><h2 id="11、20210217-Reduction-in-mobility-and-COVID-19-transmission"><a href="#11、20210217-Reduction-in-mobility-and-COVID-19-transmission" class="headerlink" title="11、20210217-Reduction in mobility and COVID-19 transmission"></a>11、20210217-Reduction in mobility and COVID-19 transmission</h2><p>开发了一个框架来推断流动性和人口水平传播的关键度量——有效繁殖数量，描述了全球52个国家的传播和流动性之间的关系。在分析的73%的国家中，随着流动性的初步减少，传播显著下降，但在80%的国家放松严格的控制措施后，传播和流动性解耦的证据。对于大多数国家来说，流动性在很大程度上解释了传播率的变化。在严格控制措施放松前后，流动性与传播之间关系明确的国家，在控制措施放松后，流动性与较低的传播率相关，这表明持续的社会距离行为的有益影响是巨大的。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810155454528.png" class title="image-20210810155454528"></div><h2 id="12、20210111-Alternating-quarantine-for-sustainable-epidemic-mitigation"><a href="#12、20210111-Alternating-quarantine-for-sustainable-epidemic-mitigation" class="headerlink" title="12、20210111-Alternating quarantine for sustainable epidemic mitigation"></a>12、20210111-Alternating quarantine for sustainable epidemic mitigation</h2><p>我们在此提出一种交替隔离策略:在每一种情况下，一半人口仍处于封锁状态，而另一半人口继续活跃——保持每周连续活动和隔离之间的常规。这种方法最大限度地减少了传染性相互作用，因为它只允许一半的人口在一半的时间内相互作用。因此，尽管社会经济的连续性维持在大约50%的能力水平，但这一举措大大减少了传播，与全人口封锁所实现的效果相当。每周交替也有助于应对COVID-19的具体挑战，因为其周期与SARS-CoV2疾病的自然时间尺度同步，使大多数感染者能够在感染高峰时被有效隔离。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820150827202.png" class title="image-20210820150827202"></div><h2 id="13、20200330-Evaluating-the-effectiveness-of-social-distancing-interventions-against-COVID-19"><a href="#13、20200330-Evaluating-the-effectiveness-of-social-distancing-interventions-against-COVID-19" class="headerlink" title="13、20200330-Evaluating the effectiveness of social distancing interventions against COVID-19"></a>13、20200330-Evaluating the effectiveness of social distancing interventions against COVID-19</h2><p>采用四种社交距离干预措施(不同年龄的不同类别人)，SEIR模拟表明只有社会距离干预涉及所有年龄组的人口将大幅减少病例数和延迟最流行。然而，在成人人群中，接触率仅减少25%(加上老年人的95%)，就可以将住院人数和死亡人数减少90%以上。此外，仅减少60岁以上成年人的接触率就能产生相当大的影响，使住院和死亡人数减少30%以上。然而，我们的模拟表明，即使在更乐观的情况下，所有年龄组的接触率都降低了85%以上，一旦取消社交距离干预措施，疫情也将反弹。结果突出了社会距离干预时机的重要性相对于流行病曲线而言如果干预措施在疫情早期到位(并取消)，就会导致疫情延迟，但如果干预措施较晚实施，就会导致曲线变平。事实上，干预的有效性将取决于干预开始时易感、感染和康复人群的比例。感染期是一个关键参数，它对流行病的建模速度以及所考虑的干预措施的有效性具有非凡的影响。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210804132751179.png" class title="image-20210804132751179"></div><h2 id="14、20201230-State-specific-projection-of-COVID-19-infection-in-the-United-States-and-evaluation-of-three-major-control-measures"><a href="#14、20201230-State-specific-projection-of-COVID-19-infection-in-the-United-States-and-evaluation-of-three-major-control-measures" class="headerlink" title="14、20201230-State-specific projection of COVID-19 infection in the United States and evaluation of three major control measures"></a>14、20201230-State-specific projection of COVID-19 infection in the United States and evaluation of three major control measures</h2><p>在本研究中，开发了一个基于旅行网络的易感暴露感染去除(SEIR)数学分区模型系统，纳入了州际旅行者的流入和流出，同时描述了51个地区(50个州和哥伦比亚特区)感染的时空动态。建模显示，当疾病已经广泛传播时，限制州际旅行将不会有什么不同。与此同时，提高检测能力(有助于及早发现感染者并迅速隔离)和严格的社会距离和自我隔离规则，是缓解疫情的最有效措施。建模还产生了特定于状态的信息。减少传播的干预措施，如社会距离政策和就地避难规则，以及提高检测率，有助于在接触后立即隔离，将显著减少感染人口总数。例如，对于纽约州和密歇根州，需要在2天内隔离接触病毒的人，以防止大范围爆发，而对于其他州，这段时间可以是3.6天。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819223518845.png" class title="image-20210819223518845"></div><h2 id="15、20200423-Effect-of-non-pharmaceutical-interventions-to-contain-COVID-19-in-China"><a href="#15、20200423-Effect-of-non-pharmaceutical-interventions-to-contain-COVID-19-in-China" class="headerlink" title="15、20200423-Effect of non-pharmaceutical interventions to contain COVID-19 in China"></a>15、20200423-Effect of non-pharmaceutical interventions to contain COVID-19 in China</h2><p>利用COVID-19的流行病学数据和移动数据，开发了一个建模框架（SEIR），使用每日旅行网络来模拟中国各地不同的爆发和干预情景。我们估计，截至2020年2月29日，中国大陆共有114325例COVID-19病例(四分位数区间为76776 164576)。如果没有非药物干预，预计到2020年2月29日，病例数将增加67倍(四分位数区间为44 - 94倍)，发现不同干预措施的有效性存在差异。估计早期发现和隔离病例比限制旅行和减少接触预防了更多的感染，但非药物干预措施的结合取得了最强烈和最迅速的效果。根据模型，如果保持社会距离干预措施，从2020年2月17日起取消旅行限制并不会导致中国各地病例的增加，即使个人之间的接触减少了25%，这一有限水平将持续到4月底。</p><h2 id="16、20210329-Exploring-the-influence-of-human-mobility-factors-and-spread-prediction-on-early-COVID-19-in-the-USA"><a href="#16、20210329-Exploring-the-influence-of-human-mobility-factors-and-spread-prediction-on-early-COVID-19-in-the-USA" class="headerlink" title="16、20210329-Exploring the influence of human mobility factors and spread prediction on early COVID-19 in the USA"></a>16、20210329-Exploring the influence of human mobility factors and spread prediction on early COVID-19 in the USA</h2><p>基于COVID-19监测数据和人员流动数据（谷歌数据），本研究通过构建考虑封锁和蔓延因素的SIRD模型，预测了2020年7月27日至2021年1月22日美国国家和州区域行政单位的流行趋势。结果:(1)疫情在美国的传播具有地理邻近性的特点。(2)封城期间，新冠肺炎病例数与居民在公园等休闲场所的活动存在较强相关性。(3)美国早期流行的转折点(活动性感染病例高峰期的时间点)预计发生在9月。(4)疫情最严重的10个州中，纽约州、新泽西州、马萨诸塞州、得克萨斯州、伊利诺伊州、宾夕法尼亚州和加利福尼亚州预计都将在7 - 9月集中出现拐点，乔治亚州的拐点预计在12月。在预测期内，佛罗里达和亚利桑那州没有出现拐点，感染病例数量仍将迅速增长。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807172118551.png" class title="image-20210807172118551"></div><h2 id="17、20210217-Reduction-in-mobility-and-COVID-19-transmission"><a href="#17、20210217-Reduction-in-mobility-and-COVID-19-transmission" class="headerlink" title="17、20210217-Reduction in mobility and COVID-19 transmission"></a>17、20210217-Reduction in mobility and COVID-19 transmission</h2><p>开发了一个框架来推断流动性和人口水平传播的关键度量——有效繁殖数量，描述了全球52个国家的传播和流动性之间的关系。在分析的73%的国家中，随着流动性的初步减少，传播显著下降，但在80%的国家放松严格的控制措施后，传播和流动性解耦的证据。对于大多数国家来说，流动性在很大程度上解释了传播率的变化。在严格控制措施放松前后，流动性与传播之间关系明确的国家，在控制措施放松后，流动性与较低的传播率相关，这表明持续的社会距离行为的有益影响是巨大的。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810155454528-1629463825090.png" class title="image-20210810155454528"></div><h2 id="18、20200603-Quantitative-Relationship-between-Population-Mobility-and-COVID-19-Growth-Rate-based-on-14-Countries"><a href="#18、20200603-Quantitative-Relationship-between-Population-Mobility-and-COVID-19-Growth-Rate-based-on-14-Countries" class="headerlink" title="18、20200603-Quantitative Relationship between Population Mobility and COVID-19 Growth Rate based on 14 Countries"></a>18、20200603-Quantitative Relationship between Population Mobility and COVID-19 Growth Rate based on 14 Countries</h2><p>本研究建立了一个框架，量化社会距离导致的人口流动变化对COVID-19感染增长率的影响。利用易感-感染-恢复(SIR)流行病学模型，假设COVID-19感染的增长率是人口流动的函数，这导致了一个统计模型，预测COVID-19死亡的增长率作为人口流动的延迟函数。我们根据14个国家的公开数据拟合了提出的统计模型，公共可用的谷歌流动性指数(GMI)被用来衡量国家一级的人口流动性。结果表明，COVID-19死亡增长率可以作为GMI过境类别的二次函数准确估计20天前。关键流动性的估计为covid -19前流动性的36.1%至47.6%。本文建立的定量关系表明，如GMI等现成的人口水平指标可以作为COVID-19流行进程的有用指标。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819212102202.png" class title="image-20210819212102202"></div><h2 id="19、20210115-Global-and-local-mobility-as-a-barometer-for-COVID‑19-dynamics"><a href="#19、20210115-Global-and-local-mobility-as-a-barometer-for-COVID‑19-dynamics" class="headerlink" title="19、20210115-Global and local mobility as a barometer for COVID‑19 dynamics"></a>19、20210115-Global and local mobility as a barometer for COVID‑19 dynamics</h2><p>研究了流动性和COVID-19动态之间的耦合关系，使用具有网络结构的完善的易感暴露传染性恢复SEIR分室模型，并在代表单个国家的节点水平上评估局部疾病动态，以解释不同规模的人类活动。研究显示，驾驶流动性和疾病动态之间的相关性最大，滞后时间为14.6±5.6天，当地人口流动的趋势使我们能够在两周的时间内预测COVID-19的爆发动态，并实时调整当地控制策略。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210810101339845.png" class title="image-20210810101339845"><h2 id="20、202012-The-introduction-of-population-migration-to-SEIAR-for-COVID-19-epidemic-modeling-with-an-efficient-intervention-strategy"><a href="#20、202012-The-introduction-of-population-migration-to-SEIAR-for-COVID-19-epidemic-modeling-with-an-efficient-intervention-strategy" class="headerlink" title="20、202012-The introduction of population migration to SEIAR for COVID-19 epidemic modeling with an efficient intervention strategy"></a>20、202012-The introduction of population migration to SEIAR for COVID-19 epidemic modeling with an efficient intervention strategy</h2><p>本文建立了传染病的数学模型。提出增强模型SEIR(易感暴露感染恢复)模型，该模型的灵感来自无症状感染者以及人口移动在病毒传播中发挥的关键作用。在模型中，比较了干预政策影响下的感染数和基本繁殖数。模拟结果显示，需要采取一些干预措施来控制COVID-19的传播。居家隔离减少了人与人之间的接触，可有效降低传播率和感染人数。如果及早采取控制人际接触的措施，病毒的传播就会得到更快的控制。此外，不能过早地终止这些措施。迁移速率研究的实验结果也证明了实现迁移控制的重要性。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210825123008739-1629866991726.png" class title="image-20210825123008739"></div><img src="/posts/39e7a431.htm/39e7a431/image-20210825124606209-1629866991726.png" class title="image-20210825124606209"><h2 id="21、20200716-Modeling-future-spread-of-infections-via-mobile-geolocation-data-and-population-dynamics-An-application-to-COVID-19-in-Brazil"><a href="#21、20200716-Modeling-future-spread-of-infections-via-mobile-geolocation-data-and-population-dynamics-An-application-to-COVID-19-in-Brazil" class="headerlink" title="21、20200716-Modeling future spread of infections via mobile geolocation data and population dynamics. An application to COVID-19 in Brazil"></a>21、20200716-Modeling future spread of infections via mobile geolocation data and population dynamics. An application to COVID-19 in Brazil</h2><p>在这项工作中，基于巴西数百万匿名移动访问数据，我们调查了COVID-19在巴西各州最有可能的传播模式。模拟疾病传播的复合种群模型与一个标准SI模型耦合在一起，以评估各州内每个城市的感染风险，根据疾病将感染每个城市的时间进行排名。我们观察到，尽管高危地区是疫情开始的首都城市，但也有农村城市的风险很大，特别在圣保罗。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210809215736301-1629387682327.png" class title="image-20210809215736301"></div><h2 id="22、20210211-Changes-in-local-travel-behaviour-before-and-during-the-COVID-19-pandemic-in-Hong-Kong"><a href="#22、20210211-Changes-in-local-travel-behaviour-before-and-during-the-COVID-19-pandemic-in-Hong-Kong" class="headerlink" title="22、20210211-Changes in local travel behaviour before and during the COVID-19 pandemic in Hong Kong"></a>22、20210211-Changes in local travel behaviour before and during the COVID-19 pandemic in Hong Kong</h2><p>在这项研究中，我们利用从地铁公司(地铁公司)系统获得的智能卡每秒数据，分析了2020年1月1日至3月31日期间香港不同人口群体的本地出行行为的变化。受疫情影响，工作日、星期六和星期日的本地客流量分别减少43%、49%和59%。由于学校关闭，学生和儿童乘坐地铁的次数减少最多，而成年人和老年人乘坐地铁的次数分别减少了42%和48%。在非大流行周和大流行周之间，成人和老年人本地旅行行为的变化大于工作日和周末之间的变化，但儿童和学生的变化则相反。在大流行期间，当地的旅行行为变得更加频繁。利用mtr（ Mass Transit Railway）的日常使用数据可以很好地预测7 - 8天后感染传播的严重程度。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808143428459.png" class title="image-20210808143428459"></div><h2 id="23、20210308-Real-time-tracking-and-prediction-of-COVID-19-infection-using-digital-proxies-of-population-mobility-and-mixing"><a href="#23、20210308-Real-time-tracking-and-prediction-of-COVID-19-infection-using-digital-proxies-of-population-mobility-and-mixing" class="headerlink" title="23、20210308-Real-time tracking and prediction of COVID-19 infection using digital proxies of population mobility and mixing"></a>23、20210308-Real-time tracking and prediction of COVID-19 infection using digital proxies of population mobility and mixing</h2><p>在目前COVID-19大流行中，人类流动和数字代理混合已被用于监测病毒的传播性和社会距离干预措施的有效性。开发了一个新的框架，用特定年龄的数字移动数据(香港八达通卡出行数据)参数化疾病传播模型。通过将该模型与香港的病例数据拟合，我们能够近实时准确地追踪本地COVID-19的有效复制数量，可以获得COVID-19流行病的准确实时预报和预测。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808171906015.png" class title="image-20210808171906015"></div><h2 id="24、20200331-An-investigation-of-transmission-control-measures-during-the-first-50-days-of-the-COVID-19-epidemic-in-China"><a href="#24、20200331-An-investigation-of-transmission-control-measures-during-the-first-50-days-of-the-COVID-19-epidemic-in-China" class="headerlink" title="24、20200331-An investigation of transmission control measures during the first 50 days of the COVID-19 epidemic in China"></a>24、20200331-An investigation of transmission control measures during the first 50 days of the COVID-19 epidemic in China</h2><p>采用武汉到其他城市的流动量，发现武汉停运与其他城市新冠肺炎疫情延误2.91天有关。与较晚开始控制的城市(20.6)相比，提前实施控制措施的城市在疫情爆发的第一周报告的病例平均较少(13.0例)。模拟如果不实行应急措施和武汉禁行的命令（实行武汉禁令影响流动性），在2月19日(第50天)预估会产生74.4万例，与实际相比避免了几十万例病例。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210803094315316.png" class title="image-20210803094315316"></div><h2 id="25、20200912-Mobile-device-data-reveal-the-dynamics-in-a-positive-relationship-between-human-mobility-and-COVID-19-infections"><a href="#25、20200912-Mobile-device-data-reveal-the-dynamics-in-a-positive-relationship-between-human-mobility-and-COVID-19-infections" class="headerlink" title="25、20200912-Mobile device data reveal the dynamics in a positive relationship between human mobility and COVID-19 infections"></a>25、20200912-Mobile device data reveal the dynamics in a positive relationship between human mobility and COVID-19 infections</h2><p>使用移动设备定位数据，每日更新美国3141个县的OD旅行需求分析和流动流量，通过一个时变系数的联立方程建模过程，刻画了人口流入和感染人数之间的量化的正关系，在整个研究期间，锁定组的系数始终高于重新开放组的系数，表明锁定县的流动流入存在更高的风险。全国平均系数为0.243，表明如果今天观察到的流入人口增加了10%，在其他条件相同的情况下，预计一周后感染人数将增加2.34%(即模型滞后= 7)。这种正相关关系在COVID-19发病期间急剧增加，然后在国家逐渐进入锁定状态时减弱。在重新开放发布大约两周后，它开始反弹。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210803094609632.png" class title="image-20210803094609632"></div><h2 id="26、20210613-Revisiting-the-Effects-of-High-Speed-Railway-Transfers-in-the-Early-COVID-19-Cross-Province-Transmission-in-Mainland-China"><a href="#26、20210613-Revisiting-the-Effects-of-High-Speed-Railway-Transfers-in-the-Early-COVID-19-Cross-Province-Transmission-in-Mainland-China" class="headerlink" title="26、20210613-Revisiting the Effects of High-Speed Railway Transfers in the Early COVID-19 Cross-Province Transmission in Mainland China"></a>26、20210613-Revisiting the Effects of High-Speed Railway Transfers in the Early COVID-19 Cross-Province Transmission in Mainland China</h2><p>旨在评估大陆铁路客运对COVID-19早期空间传播的影响。使用每日铁路班次数据来衡量城际人口流动模式OD，武汉封锁对铁路运输的影响是通过目的地到达和换乘活动来衡量，使用的是城市到城市的网络指标。结果表明武汉封城后转移活动增加的省份确诊病例更多，但目的地抵达量的变化没有显著影响。这意味着虽然武汉封城不会对铁路旅客的目的地造成影响，但由于中国铁路运输网络中重要的换乘枢纽(武汉)的更换，铁路旅客的旅行路线可能会发生变化。高铁网络的换乘服务可能是湖北周边省份新冠肺炎确诊病例数量高于其他省份的另一个可能原因。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819152206676.png" class title="image-20210819152206676"></div><h2 id="27、20210401-The-relationship-between-human-mobility-and-viral-transmissibility-during-the-COVID-19-epidemics-in-Italy"><a href="#27、20210401-The-relationship-between-human-mobility-and-viral-transmissibility-during-the-COVID-19-epidemics-in-Italy" class="headerlink" title="27、20210401-The relationship between human mobility and viral transmissibility during the COVID-19 epidemics in Italy"></a>27、20210401-The relationship between human mobility and viral transmissibility during the COVID-19 epidemics in Italy</h2><p>利用意大利不同地理尺度的数据，研究了人口流动性与COVID-19传播之间的关系。利用2020年2月至9月的移动电话数据（OD），发现流动减少与繁殖数量之间存在显著关系，封锁流动性并使净繁殖数低于临界阈值1大约需要一周的时间。在封锁导致流动性下降之前，超过这一阈值的天数与每10万居民的总感染人数之间存在很强的关系。在估计流动对净繁殖数量随时间变化的统计影响时，记录了一个滞后两周的正关联，在3月和4月表现强劲，6月表现较弱但仍然显著。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810114745115.png" class title="image-20210810114745115"></div><h2 id="28、202101-A-city-cluster-risk-based-approach-for-Sars-CoV-2-and-isolation-barriers-based-on-anonymized-mobile-phone-users’-location-data"><a href="#28、202101-A-city-cluster-risk-based-approach-for-Sars-CoV-2-and-isolation-barriers-based-on-anonymized-mobile-phone-users’-location-data" class="headerlink" title="28、202101-A city cluster risk-based approach for Sars-CoV-2 and isolation barriers based on anonymized mobile phone users’ location data"></a>28、202101-A city cluster risk-based approach for Sars-CoV-2 and isolation barriers based on anonymized mobile phone users’ location data</h2><p>本文提出了一种基于巴西伯南布哥州192个城市从2020-01-01到2020-03-31之间匿名手机用户位置数据的城市间人口流动（OD）估计方法。风险措施包括分析聚集性病例传播的严重程度，可以对其进行排名，从而可以对一些集群进行隔离。在得到的人口流动网络中，考虑了加权有向图，使我们能够分析第一次人口流动政策实施前后的影响数据。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210819155727802.png" class title="image-20210819155727802"><h2 id="29、20200511-Social-Distancing-is-Effective-at-Mitigating-COVID-19-Transmission-in-the-United-States"><a href="#29、20200511-Social-Distancing-is-Effective-at-Mitigating-COVID-19-Transmission-in-the-United-States" class="headerlink" title="29、20200511-Social Distancing is Effective at Mitigating COVID-19 Transmission in the United States"></a>29、20200511-Social Distancing is Effective at Mitigating COVID-19 Transmission in the United States</h2><p>采用OD矩阵分析集中美国25个县的流入流出，结果表明美国国内的社交距离正在减缓COVID-19的传播，滞后效应为9到12天，当外推到州的水平时，同样的结果显示是成立的。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805215753880.png" class title="image-20210805215753880"></div><h2 id="30、20201215-Quantifying-the-importance-and-location-of-SARS-CoV-2"><a href="#30、20201215-Quantifying-the-importance-and-location-of-SARS-CoV-2" class="headerlink" title="30、20201215-Quantifying the importance and location of SARS-CoV-2"></a>30、20201215-Quantifying the importance and location of SARS-CoV-2</h2><p>将实时匿名的地理移动数据（类似于POI 个体代表群体）与纽约市和西雅图大都会区的人口普查和人口统计数据相结合，构建了一个详细的基于agent的SARS-CoV- 2传播模型。目的是估计在哪里、何时以及有多少传播事件在第一波大流行期间发生在这些城市地区。我们估计，大多数感染(80%)是由少数人(27%)产生的，大约10%的事件可以被视为超级传播事件，即产生超过8次继发感染。但我们发现第一波的大部分传播发生在工作场所、杂货店或食品场所等较小的事件中。3月份在大城市地区引入的大多数npi有效地显著减缓了COVID-19第一波疫情。然而，关闭学校、企业、工作场所和社交场所，给经济和社会造成了巨大的损失。</p><h2 id="31、20210526-Spatiotemporal-contact-density-explains-the-disparity-of-COVID‑19-spread-in-urban-neighborhoods"><a href="#31、20210526-Spatiotemporal-contact-density-explains-the-disparity-of-COVID‑19-spread-in-urban-neighborhoods" class="headerlink" title="31、20210526-Spatiotemporal contact density  explains the disparity of COVID‑19  spread in urban neighborhoods"></a>31、20210526-Spatiotemporal contact density  explains the disparity of COVID‑19  spread in urban neighborhoods</h2><p>研究了纽约市和芝加哥的总体流动模式，以确定城市社区中人们之间的人际接触量与这些群体中阳性病例增长的差异之间的关系。引入了一个累计时空接触密度指数(CDI)，利用从手机收集的移动数据（GPS）来衡量这种人际接触的强度，并将其与社交距离指标相结合，以显示其对正病例增长的影响。在结构方程建模的帮助下，发现CDI对病例增长的影响始终是正的，并且在低收入社区中始终较高。使用CDI，学校和餐馆被确定为接触密度高的行业，估计表明，对这些POI类别实施特定的流动性限制是最有效的。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210807101605542.png" class title="image-20210807101605542"><h2 id="32、20201113-Community-movement-and-COVID-19-a-global-study-using-Google’s-Community-Mobility-Reports"><a href="#32、20201113-Community-movement-and-COVID-19-a-global-study-using-Google’s-Community-Mobility-Reports" class="headerlink" title="32、20201113-Community movement and COVID-19 a global study using Google’s Community Mobility Reports"></a>32、20201113-Community movement and COVID-19 a global study using Google’s Community Mobility Reports</h2><p>利用谷歌社区数据（整合成POI）建模，目的是检查covid -19确诊病例数和流动性水平之间是否存在明显的关联，在北美、西欧、俄罗斯和澳大利亚，疾病发生率和流动性之间明显的负相关关系特别明显。在COVID-19病例发病率等领域，表明社会活动和流动性、零售和娱乐、杂货店和药房、工作场所和交通水平的CMR类别明显减少公园和住宅活动随着COVID-19发病率的增加而增加。具体国家的社会经济或文化因素可能会影响流动水平。尽管这是一种概括，但那些负相关性最强的国家往往被归类为发达国家。在许多国家，流动性的减少似乎在实施对流动性的法律限制之前就出现了，这表明个人感知的感染风险和个人行为改变的重要性，而不是政府法令。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210809181708966.png" class title="image-20210809181708966"></div><h2 id="33、20201221-A-longitudinal-study-of-the-impact-of-human-mobility-on-the-incidence-of-COVID-19-in-India"><a href="#33、20201221-A-longitudinal-study-of-the-impact-of-human-mobility-on-the-incidence-of-COVID-19-in-India" class="headerlink" title="33、20201221-A longitudinal study of the impact of human mobility on the incidence of COVID-19 in India"></a>33、20201221-A longitudinal study of the impact of human mobility on the incidence of COVID-19 in India</h2><p>这项研究旨在调查谷歌数据在印度的杂货店、零售店、公园、工作场所、住宅和中转站中，哪一类地方人的流动模式与COVID-19的发病率更相关。研究发现，前往杂货店(食品和蔬菜市场、药店等)和零售店(餐厅、咖啡馆、购物中心等)的流动性与COVID-19的发病率显著相关(p &lt; 0.01)。发现低密度的开放空间(公园，中转站和居民社区内)对病毒传播没有显著影响。像上班通勤这样的经济活动，有社会距离和戴口罩等预防措施，不会导致病例增加。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807193146860.png" class title="image-20210807193146860"></div><h2 id="34、20210715-Human-Activity-and-Mobility-Data-Reveal-Disparities-in-Exposure-Risk-Reduction-Indicators-among-Socially-Vulnerable-Populations-during-COVID-19"><a href="#34、20210715-Human-Activity-and-Mobility-Data-Reveal-Disparities-in-Exposure-Risk-Reduction-Indicators-among-Socially-Vulnerable-Populations-during-COVID-19" class="headerlink" title="34、20210715-Human Activity and Mobility Data Reveal Disparities in Exposure Risk Reduction Indicators among Socially Vulnerable Populations during COVID-19"></a>34、20210715-Human Activity and Mobility Data Reveal Disparities in Exposure Risk Reduction Indicators among Socially Vulnerable Populations during COVID-19</h2><p>在本研究中，检查了来自两个不同和互补数据集的匿名流动性数据和人口活动数据，以衡量COVID-19病毒暴露风险指标的三个指标:(1)在邮政编码传输(2)在POIs接触和(3)以前接触POIs传播回到家里五城市地区，利用人口活动数据建立CBG(人口普查块分组)-POI网络，记录来自不同家庭的总POI访问次数。三个暴露风险指标支持实施npi后社会弱势群体暴露风险较高。低收入居民和某些种族和民族群体，特别是美国印第安人或阿拉斯加原住民、太平洋岛民、黑人和亚洲人口，在邮政编码范围内降低暴露风险的能力较弱、低收入和高少数民族比例家庭的POI访问风险更大。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819211746018.png" class title="image-20210819211746018"></div><h2 id="35、20200603-Statewide-COVID‐19-Stay‐at‐Home-Orders-and-Population-Mobility-in-the-United-States"><a href="#35、20200603-Statewide-COVID‐19-Stay‐at‐Home-Orders-and-Population-Mobility-in-the-United-States" class="headerlink" title="35、20200603-Statewide COVID‐19 Stay‐at‐Home Orders and Population Mobility in the United States"></a>35、20200603-Statewide COVID‐19 Stay‐at‐Home Orders and Population Mobility in the United States</h2><p>根据谷歌移动数据，到2020年3月底，每个州前往中转站、零售和娱乐设施、工作场所、杂货店和药房的人数都比前两个月大幅减少。各个目的地类别的到访率平均下降了约30%，在没有居家命令的州和有居家命令的州分别为40%和30%。同样，在大城市，苹果收到的公共交通、步行和驾驶的路由请求较少，而在全州范围内的居家命令下，大城市地区的平均降幅是10%。即使在没有旅行限制的州，疫情也导致人口流动大幅减少，但全州范围的命令是有效的公共卫生政策工具，将人类流动减少到通过自愿行为改变实现的水平以下。</p><h2 id="36、20210319-The-Role-of-Population-Mobility-and-Non-Pharmaceutical-Interventions-on-COVID-19-Infection-A-Canadian-Case-Study-of-Granger-Causal-Relationships"><a href="#36、20210319-The-Role-of-Population-Mobility-and-Non-Pharmaceutical-Interventions-on-COVID-19-Infection-A-Canadian-Case-Study-of-Granger-Causal-Relationships" class="headerlink" title="36、20210319-The Role of Population Mobility and Non-Pharmaceutical Interventions on COVID-19 Infection A Canadian Case Study of Granger-Causal Relationships"></a>36、20210319-The Role of Population Mobility and Non-Pharmaceutical Interventions on COVID-19 Infection A Canadian Case Study of Granger-Causal Relationships</h2><p>本研究旨在分析加拿大6个省非药物干预、人口流动趋势和COVID-19病例之间的时间方向和相关性，我们使用了总体水平的数据（谷歌POI数据和苹果交通数据），检验了COVID-19每日病例、新冠肺炎疫情实施时间和水平与流动性趋势之间的双向预测因果关系。与封锁和关闭相关的npi在平均11天后影响到向非居民区的流动性降低，从而增加了居民流动性。针对卫生系统干预措施(如口罩和检测政策)与每10万人的每日病例没有因果关系，这些npi不是直接针对限制流动性的，我们承认它们在减少感染方面的作用可能被本研究中未考虑的其他因素掩盖了。还发现，流动趋势也受到COVID-19病例的影响。每日新冠肺炎病例与非传染性疾病之间的关系尚不清楚。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819200237508-1629446664159.png" class title="image-20210819200237508"></div><h2 id="37、20201026-Movement-and-risk-perception-evidence-from-spatial-analysis-of-mobile-phone-based-mobility-during-the-COVID-19-lockdown-Nigeria"><a href="#37、20201026-Movement-and-risk-perception-evidence-from-spatial-analysis-of-mobile-phone-based-mobility-during-the-COVID-19-lockdown-Nigeria" class="headerlink" title="37、20201026-Movement and risk perception evidence from spatial analysis of mobile phone-based mobility during the COVID-19 lockdown, Nigeria"></a>37、20201026-Movement and risk perception evidence from spatial analysis of mobile phone-based mobility during the COVID-19 lockdown, Nigeria</h2><p>利用了封锁开始至结束期间基于移动电话的移动数据和新病例数量。这项研究在州的水平上考察了不同地方类别的时空趋势。零售和娱乐(RtRc)、杂货店和药房(GrPh)、公园和交通枢纽(Trst)的场所类别的流动性分别下降了56%、57%、65%、75%、38%。大多数州的人口流动呈上升趋势，流向工作场所、零售和娱乐场所。谋生的需要比呆在家里和安全的需要更为迫切。需要更高的分辨率和多维数据来确定这在不同人群中是如何发生的。</p><h2 id="38、20200612-State-heterogeneity-of-human-mobility-and-COVID-19-epidemics-in-the-European-Union"><a href="#38、20200612-State-heterogeneity-of-human-mobility-and-COVID-19-epidemics-in-the-European-Union" class="headerlink" title="38、20200612-State heterogeneity of human mobility and COVID-19 epidemics in the European Union"></a>38、20200612-State heterogeneity of human mobility and COVID-19 epidemics in the European Union</h2><p>基于谷歌和苹果数据，模拟了2020年1月15日至5月9日期间27个欧盟国家的人员流动和COVID-19流行的时间趋势。2019冠状病毒病(COVID-19)和人员流动有3个趋势段，其中COVID-19日发病率呈上升趋势，大部分人员流动呈下降趋势。与距离意大利较远的欧盟国家相比，全国范围的封锁日期更有可能与距离意大利较近的欧盟国家的人员流动转折点有关，这些转折点也更有可能与COVID-19疫情的第二个转折点有关。在调查的人员流动性中，驾驶流动性的第二个转折点和公园流动性的第一个转折点是将封锁日期与离意大利更近的欧盟国家的COVID-19疫情联系起来的最佳因素。因此，政策制定者可以考虑利用公园出行的第一个拐点和驾驶出行的底部/第二个拐点来监测全州封锁的影响，并预测COVID-19日发病率的峰值。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808103843878.png" class title="image-20210808103843878"></div><h2 id="39、20200608-Influence-of-population-mobility-on-the-novel-coronavirus-disease-COVID-19-epidemic-based-on-panel-data-from-Hubei-China"><a href="#39、20200608-Influence-of-population-mobility-on-the-novel-coronavirus-disease-COVID-19-epidemic-based-on-panel-data-from-Hubei-China" class="headerlink" title="39、20200608-Influence of population mobility on the novel coronavirus disease (COVID-19) epidemic based on panel data from Hubei, China"></a>39、20200608-Influence of population mobility on the novel coronavirus disease (COVID-19) epidemic based on panel data from Hubei, China</h2><p>采用百度地图城市间流动数据，探讨了人口流动对COVID-19传播的影响。从武汉到湖北其他城市的人员在11-12天内确诊的可能性更高。16个地级市在“封城”后第12天，确诊病例和发病增量均有明显下降。研究发现，人口流动是新冠肺炎疫情传播的驱动因素，湖北省1月启动的封城行动有效缓解了疫情。因此，社交距离和旅行等策略为抗击新冠肺炎疫情，应鼓励实施不少于12天的隔离措施。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810154528041.png" class title="image-20210810154528041"></div><h2 id="40、202007-Human-Mobility-Policy-and-COVID-19-A-Preliminary-Study-of-South-Carolina"><a href="#40、202007-Human-Mobility-Policy-and-COVID-19-A-Preliminary-Study-of-South-Carolina" class="headerlink" title="40、202007-Human Mobility, Policy, and COVID-19 A Preliminary Study of South Carolina"></a>40、202007-Human Mobility, Policy, and COVID-19 A Preliminary Study of South Carolina</h2><p>使用带有地理标签的Twitter数据作为数据源，并以南卡罗来纳州为研究案例，在州和县两级探索和可视化covid - 19大流行期间的人员流动变化和人口流动。进一步研究了人员流动、国家政策和COVID-19病例之间的潜在关联。3月中旬宣布的紧急状态和4月初的家庭或工作命令对南卡罗来纳州的人员流动产生了直接影响。4月中旬每日新增病例减少，5月每日新增病例相对较低，表明流动人口减少。人口流动性的增加与COVID-19病例数呈正相关关系，且在州和县两级均有延迟效应。总体而言，宣布紧急状态、家庭或工作命令，以及其他减少流动的措施的执行是有效的</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807110017131.png" class title="image-20210807110017131"></div><h2 id="41、20200618-Population-flow-drives-spatio-temporal-distribution-of-COVID-19-in-China"><a href="#41、20200618-Population-flow-drives-spatio-temporal-distribution-of-COVID-19-in-China" class="headerlink" title="41、20200618-Population flow drives spatio-temporal distribution of COVID-19 in China"></a>41、20200618-Population flow drives spatio-temporal distribution of COVID-19 in China</h2><p>本文使用了2020年1月1日至1月24日期间离开或通过武汉地区前往中国大陆296个州的个人的11,478,484个移动电话数据。首先，我们记录了隔离在停止流动方面的效力。第二，从武汉流出的人口分布准确预测了截至2020年2月19日中国大陆冠状病毒(SARS-CoV-2)感染的相对频率和地理分布。第三，开发了一个时空风险源模型，利用人口流动数据，不仅可以预测确诊病例的分布，还可以在早期阶段识别具有高传播风险的地区。第四，利用该风险源模型，以武汉人口外流为基础，统计得出新冠肺炎疫情的地理传播和增长模式;该模型产生了一个基准趋势和一个指数，用于评估不同地点随时间变化的COVID-19社区传播风险。任何拥有现有数据的国家的决策者都可以使用这种方法，以便在持续暴发疫情之前进行快速和准确的风险评估，并规划有限资源的分配。</p><div style="width: 80%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820152425678.png" class title="image-20210820152425678"></div><h2 id="42、20210411-Monitoring-the-COVID-19-epidemic-with-nationwide-telecommunication-data"><a href="#42、20210411-Monitoring-the-COVID-19-epidemic-with-nationwide-telecommunication-data" class="headerlink" title="42、20210411-Monitoring the COVID-19 epidemic with nationwide telecommunication data"></a>42、20210411-Monitoring the COVID-19 epidemic with nationwide telecommunication data</h2><p>分析基于电信数据获得的第一波COVID-19浪潮(2020年2月10日至4月26日)期间瑞士15亿人次的大规模颗粒状的人类移动数据（被处理成邮政编码级的州际数据）。通过三种不同的出行方式(火车、公路、铁路)以及两种不同的出行目的(通勤者与非通勤者)分析，某一天的人的流动性预测了13天前报告的病例7例，人的流动性减少1%，预计每日报告的COVID-19病例将减少0.88 1.11%。流动性预示着在整个预测期内报告的新病例数量将会下降。对于较长的预测，预测的下降幅度更大。这一结果是可以预期的，因为较长的时间窗口容纳了潜伏期的完整分布。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210819161716314.png" class title="image-20210819161716314"><h2 id="43、20201022-How-Urban-Factors-Affect-the-Spatiotemporal-Distribution-of-Infectious-Diseases-in-Addition-to-Intercity-Population-Movement-in-China"><a href="#43、20201022-How-Urban-Factors-Affect-the-Spatiotemporal-Distribution-of-Infectious-Diseases-in-Addition-to-Intercity-Population-Movement-in-China" class="headerlink" title="43、20201022-How Urban Factors Affect the Spatiotemporal Distribution of Infectious Diseases in Addition to Intercity Population Movement in China"></a>43、20201022-How Urban Factors Affect the Spatiotemporal Distribution of Infectious Diseases in Addition to Intercity Population Movement in China</h2><p>本研究利用百度定位服务数据中的大量城际流动数据，探讨城市因素和人口外流对中国疫情传播的影响。武汉人口外流的影响最为显著，其次是人口规模、GDP和人口密度。流出武汉人口每增加1个单位，累计确诊病例预计增加0.488例。人口规模、GDP和人口密度每增加一个单位，累计确诊病例数预计将分别增加0.244 。数据分析框架可推广到其他捕获城市间人口流动的数据集。由于特大城市地区各城市之间流动大且频繁，在疫情发生期间，特大城市地区可能面临比其他地区更大风险。这些地区可以协同利用城市间旅行大数据管理城市间人口流动，控制传染病</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805221444546.png" class title="image-20210805221444546"></div><h2 id="44、20200412-Synchronized-travel-restrictions-across-cities-can-be-effective-in-COVID-19-control"><a href="#44、20200412-Synchronized-travel-restrictions-across-cities-can-be-effective-in-COVID-19-control" class="headerlink" title="44、20200412-Synchronized travel restrictions across cities can be effective in COVID-19 control"></a>44、20200412-Synchronized travel restrictions across cities can be effective in COVID-19 control</h2><p>我们旨在研究城市间和城市内的人口流动（百度地图数据）与COVID-19传播的关系。并估计当地旅行限制对流行病控制的影响。结果显示，湖北以外城市实施的旅行禁令共预防了1960例占观察病例总数的22.4% ，在武汉封锁后的两周内更及时的旅行禁令将使同期确诊病例数进一步减少15.7% 1378例。因此，除封锁一个疫情城市外，及时实施其他城市的城际和同城旅行禁令，可以有效控制疫情。虽然不同城市的实际出行控制措施可能有所不同，但只要缩短武汉与其他城市之间的时间差距，就可以进一步减少疫情。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805141204498-1629355078001.png" class title="image-20210805141204498"></div><h2 id="45、20210618-Mobile-Phone-Based-Population-Flow-Data-for-the-COVID-19-Outbreak-in-Mainland-China"><a href="#45、20210618-Mobile-Phone-Based-Population-Flow-Data-for-the-COVID-19-Outbreak-in-Mainland-China" class="headerlink" title="45、20210618-Mobile Phone-Based Population Flow Data for the COVID-19 Outbreak in Mainland China"></a>45、20210618-Mobile Phone-Based Population Flow Data for the COVID-19 Outbreak in Mainland China</h2><p>收集并公布了一个从国家层面的手机中提取的匿名的、聚集的移动数据集，描述了武汉人口的流出。我们评估了人口流动和病毒传播之间的相关性，2020年1月1日至22日，全国共有2020万高危人群从武汉向其他地区流动。在疫情爆发的最初几周，来自武汉的高危人群的主要目的地要么是与武汉相邻的地方城市，要么是与湖北相邻的省份。武汉在封城前的流出量与目的地城市确诊病例数有很强的相关性，确定了高危人群接收人数最多的区域。高危人群的流动与病毒传播密切相关。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807164620963.png" class title="image-20210807164620963"></div><h2 id="46、20200624-Quantifying-the-influence-of-inter-county-mobility-patterns-on-the-COVID-19-outbreak-in-the-United-States"><a href="#46、20200624-Quantifying-the-influence-of-inter-county-mobility-patterns-on-the-COVID-19-outbreak-in-the-United-States" class="headerlink" title="46、20200624-Quantifying the influence of inter-county mobility patterns on the COVID-19 outbreak in the United States"></a>46、20200624-Quantifying the influence of inter-county mobility patterns on the COVID-19 outbreak in the United States</h2><p>本研究聚焦于美国所有县之间的人口流动及其对美国COVID-19传播的影响，考察县与县之间的旅行如何加剧COVID-19，这项研究基于大规模的人口流动，利用了来自1亿多匿名设备的综合移动位置数据。首先研究了全国县际流动的时间趋势和空间分布。然后放大美国疫情爆发的中心纽约市，并评估其外流对其他县的影响。最后在县一级建立了一个对数线性双风险模型，以量化县间流动引入的外部风险和定义为县内高风险表型人口脆弱性的内部风险的影响。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819220208887.png" class title="image-20210819220208887"></div><h2 id="47、20201111-Geographic-pattern-of-human-mobility-and-COVID-19-before-and-after-Hubei-lockdown"><a href="#47、20201111-Geographic-pattern-of-human-mobility-and-COVID-19-before-and-after-Hubei-lockdown" class="headerlink" title="47、20201111-Geographic pattern of human mobility and COVID-19 before and after Hubei lockdown"></a>47、20201111-Geographic pattern of human mobility and COVID-19 before and after Hubei lockdown</h2><p>本研究探讨了旅行限制对人类流动和COVID-19确诊病例的时空格局的影响。基于记录的人口流动和百度流动（中国364个主要城市(即从A市出发的前100个目的地和进入A市的前100个目的地)的城市间流动），估算了2020年1月1日至2月11日期间中国许多城市人口流动的地理格局，封锁后无论从哪个地方出发，人员流动都有比例下降，但湖北目的地明显低于非湖北目的地。除了城市封锁的基线模型外，还探索了1月28日和2月6日之前/之后的COVID-19潜伏期的时间滞后效应。模型假设的潜伏期为5天，比基线和14天模型更好地区分了COVID-19病例的差异。武汉封锁后的聚集性疫情与武汉周边湖北东部地区的人口流动模式有一定关系。这项研究揭示的地理格局证实了超级传播者的存在，他们在早期阶段负责区域传播，在后期导致局部暴发。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808122129327.png" class title="image-20210808122129327"></div><h2 id="48、The-impact-of-government-measures-and-human-mobility-trend-on-COVID-19-related-deaths-in-the-UK"><a href="#48、The-impact-of-government-measures-and-human-mobility-trend-on-COVID-19-related-deaths-in-the-UK" class="headerlink" title="48、The impact of government measures and human mobility trend on COVID-19 related deaths in the UK"></a>48、The impact of government measures and human mobility trend on COVID-19 related deaths in the UK</h2><p>该研究利用驾驶、步行和交通的实时数据，调查政府控制措施对减少人的流动性的影响，以及人的流动性趋势和严重的COVID-19结果之间的联系。随着政府宣布采取更多措施，人员流动逐渐减少，并在实施封锁后稳定在80%左右，减少人的流动性对减少与covid -19相关的死亡有显著影响，还可能需要采取一定程度的旅行限制和社交距离措施，以继续降低英国COVID-19传播卷土重来的风险。以及可能需要实施限制公共交通和车站乘客数量的措施，以遵守社交距离措施。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805211619080.png" class title="image-20210805211619080"></div><h2 id="49、20200903-The-interplay-of-spatial-spread-of-COVID-19-and-human-mobility-in-the-urban-system-of-China-during-the-Chinese-New-Year"><a href="#49、20200903-The-interplay-of-spatial-spread-of-COVID-19-and-human-mobility-in-the-urban-system-of-China-during-the-Chinese-New-Year" class="headerlink" title="49、20200903-The interplay of spatial spread of COVID-19 and human mobility in the urban system of China during the Chinese New Year"></a>49、20200903-The interplay of spatial spread of COVID-19 and human mobility in the urban system of China during the Chinese New Year</h2><p>本研究利用同步的疫情数据和人员流动数据，并结合其他多来源数据，探讨了中国319个城市中冠状病毒传播与城市间和城市内（人均出行次数）流动之间的相互影响。结果表明，在中国城市系统中，疾病的传播过程包括春节前的主要转移(城市间)扩散和春节后的局部(城市内)扩散。城市间疾病发病率的变化主要是由来自疫情中心武汉的城市间流动驱动的。离疫情中心越近、城市人口越多的城市发病风险越高。温暖潮湿的天气有助于减缓COVID-19的传播。如果旅行人数增加10%，居住在城市地区的人口比例增加1个单位(1%)，预计该城市的感染病例数量将分别增加约7%和1%。绝对湿度每增加一个单位，城市的新病例数就会减少4%。中国广泛的城市间和城市内旅行干预措施分别减少了约70%和40%的城市间和城市内流动，通过最大限度地减少人与人之间的传播。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210809220340903.png" class title="image-20210809220340903"></div><h2 id="50、20200717-Anonymised-and-aggregated-crowd-level-mobility-data-from-mobile-phones-suggests-that-initial-compliance-with-COVID-19-social-distancing-interventions-was-high-and-geographically-consistent-across-the-UK"><a href="#50、20200717-Anonymised-and-aggregated-crowd-level-mobility-data-from-mobile-phones-suggests-that-initial-compliance-with-COVID-19-social-distancing-interventions-was-high-and-geographically-consistent-across-the-UK" class="headerlink" title="50、20200717-Anonymised and aggregated crowd level mobility data from mobile phones suggests that initial compliance with COVID-19 social distancing interventions was high and geographically consistent across the UK"></a>50、20200717-Anonymised and aggregated crowd level mobility data from mobile phones suggests that initial compliance with COVID-19 social distancing interventions was high and geographically consistent across the UK</h2><p>使用两个基于手机的数据集(来自匿名和聚集的人群水平数据和来自手机上的Facebook应用程序的数据)来评估平均流动性的变化，包括总体和分解成高和低人口密度地区，以及旅程长度分布的变化。结果:流动性整体大幅下降，其中下降最快的是2020年3月24日，也就是总理宣布实施强制封锁的第二天。在英国，流动性的下降是高度同步的。尽管自2020年3月26日以来流动性一直很低，但之后流动性逐渐增加。两个不同的数据集产生了相似的趋势，尽管有一些特定位置的差异。我们看到高密度地区的平均流动性比低密度地区略大，高密度地区的流动性变化更大:一些高密度地区几乎消除了所有流动性。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810153718138.png" class title="image-20210810153718138"></div><h2 id="51、202011-COVID-19-spread-and-inter-county-travel-Daily-evidence-from-the-U-S"><a href="#51、202011-COVID-19-spread-and-inter-county-travel-Daily-evidence-from-the-U-S" class="headerlink" title="51、202011-COVID-19 spread and inter-county travel Daily evidence from the U.S"></a>51、202011-COVID-19 spread and inter-county travel Daily evidence from the U.S</h2><p>本文研究了2020年1月21日至2020年9月2日这段时间内，在居住在同一县(或较少前往其他县)的人口比例较高的县，COVID-19病例和死亡人数都较低。基于正式估计结果的反事实分析表明，留在同一县有可能将美国每周新冠肺炎病例和死亡人数分别减少139,503人和23,445人。在县一级，留在同一县有可能在县之间减少2至209例COVID-19病例，并有可能将县之间的COVID-19死亡人数减少至35人。这意味着待在同一县(即减少跨县旅行)将有助于抗击COVID-19。</p><h2 id="52、20201106-COVID-19-pandemic-related-lockdown-response-time-is-more-important-than-its-strictness"><a href="#52、20201106-COVID-19-pandemic-related-lockdown-response-time-is-more-important-than-its-strictness" class="headerlink" title="52、20201106-COVID-19 pandemic-related lockdown response time is more important than its strictness"></a>52、20201106-COVID-19 pandemic-related lockdown response time is more important than its strictness</h2><p>分析了来自世界各地许多国家的苹果用户的移动电话使用量，以量化国家特定的封锁特征，如社交距离开始时间、封锁时间、封锁严格程度、封锁持续时间和封锁释放率，将不同的特征与每个国家观察到的死亡率交叉。分析表明，开始保持社交距离的时间具有关键的长期影响:封锁开始时间延迟7.49天，预计死亡人数将增加一倍。这与其他参数形成鲜明对比，如封锁严格程度对死亡率的影响微不足道。实施了非常严格封锁的国家，只要在首次事件记录后尽早开始保持社交距离，就可以获得类似的死亡率数字，但出行限制不那么严格</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820145115010.png" class title="image-20210820145115010"></div><h2 id="53、20200418-The-covid-19-pandemic-government-vs-community-action-across-the-united-states"><a href="#53、20200418-The-covid-19-pandemic-government-vs-community-action-across-the-united-states" class="headerlink" title="53、20200418-The covid-19 pandemic government vs community action across the united states"></a>53、20200418-The covid-19 pandemic government vs community action across the united states</h2><p>本文旨在通过研究州和县一级的封锁政策与个人身体距离行为之间的相互作用，填补这一空白，使用基于美国4000万台智能手机的数据集，并结合州和县一级政府政策的详细数据。通过这种方式，发现封锁政策会使人们在家的时间增加39%，但在没有任何此类政策的情况下，人们也会在更有限的程度上减少社交互动。通过记录，在高度城市化的地区，对科学比较信任、教育程度更高、收入更高或机构更强大的地区，人们对病毒爆发的反应更强烈，总之，这些发现强烈表明，以社会经济为目标的限制性较低的遏制政策可能比全面封锁更能遏制疫情，同时造成的经济损失也更小。</p><h2 id="54、20201230-The-Effects-of-Restrictions-in-Economic-Activity-on-the-Spread-of-COVID-19-in-the-Philippines-Insights-from-Apple-and-Google-Mobility-Indicators"><a href="#54、20201230-The-Effects-of-Restrictions-in-Economic-Activity-on-the-Spread-of-COVID-19-in-the-Philippines-Insights-from-Apple-and-Google-Mobility-Indicators" class="headerlink" title="54、20201230-The Effects of Restrictions in Economic Activity on the Spread of COVID-19 in the Philippines Insights from Apple and Google Mobility Indicators"></a>54、20201230-The Effects of Restrictions in Economic Activity on the Spread of COVID-19 in the Philippines Insights from Apple and Google Mobility Indicators</h2><p>这项研究调查了限制经济活动对菲律宾COVID-19传播的影响。本文利用2020年2月17日至9月11日期间新冠肺炎感染人数、Apple移动趋势和谷歌社区移动指标的每日时间序列数据分析。COVID-19每日新增感染人数表明，苹果移动趋势和谷歌社区移动指标存在某种形式的负或正的弱相关性。每日新增感染人数与中转站人数减少、居家人数增加、较少使用公共交通工具、较少步行前往目的地的人数呈负线性相关，与工作场所的访问次数和开车的人数存在某种形式的正线性相关。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807221216565.png" class title="image-20210807221216565"></div><h2 id="55、20200629-Correlation-Between-Mobility-and-COVID-19-Cases-in-Surabaya-City-Indonesia"><a href="#55、20200629-Correlation-Between-Mobility-and-COVID-19-Cases-in-Surabaya-City-Indonesia" class="headerlink" title="55、20200629-Correlation Between Mobility and COVID-19 Cases in Surabaya City, Indonesia"></a>55、20200629-Correlation Between Mobility and COVID-19 Cases in Surabaya City, Indonesia</h2><p>本研究旨在确定在2019冠状病毒病大流行期间泗水居民的流动性和活动模式，并发现泗水居民的流动性与COVID-19病例数之间的相关性。将泗水市2020年人口流动模式分为5个阶段，即正常条件阶段(F0)、大流行初期阶段(F1)、大规模社会限制阶段(F2)、新习惯适应过渡阶段(F3)和新习惯适应阶段(F4)。本研究表明，中转站和居民区的人数与COVID-19病例数具有较高的相关性。此外，对新冠肺炎病例增加影响最大的出行方式是公交车出行。从社区流动报告中获得的COVID-19阳性病例数与人群活动的相关性较低。而在F4中，中转站和居民区的活动数量与COVID-19病例高度相关。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807144525325.png" class title="image-20210807144525325"></div><h2 id="56、20210120-Associations-of-Government-Mandated-Closures-and-Restrictions-With-Aggregate-Mobility-Trends-and-SARS-CoV-2-Infections-in-Nigeria"><a href="#56、20210120-Associations-of-Government-Mandated-Closures-and-Restrictions-With-Aggregate-Mobility-Trends-and-SARS-CoV-2-Infections-in-Nigeria" class="headerlink" title="56、20210120-Associations of Government-Mandated Closures and Restrictions With Aggregate Mobility Trends and SARS-CoV-2 Infections in Nigeria"></a>56、20210120-Associations of Government-Mandated Closures and Restrictions With Aggregate Mobility Trends and SARS-CoV-2 Infections in Nigeria</h2><p>研究使用了尼日利亚智能手机用户在2020年2月27日至7月21日期间选择提供位置历史(来自多达4000万个人)的聚合匿名移动数据。分析的数据包括每日确诊的SARS-CoV-2感染人数以及六类人群总流动性的每日变化。关闭和限制措施于2020年3月30日启动，并于2020年5月4日部分放松。研究发现，尼日利亚政府因COVID-19而强制关闭和限制与总体流动性有显著关联，并可能与避免了多达580万例SARS-CoV-2感染有关。此外，COVID-19在尼日利亚的社区传播可能在居民区、中转站和工作场所更快。<img src="/posts/39e7a431.htm/39e7a431/image-20210807175136466.png" class title="image-20210807175136466"></p><h2 id="57、20210126-Parallel-trends-in-the-transmission-of-SARS-CoV-2-and-retailrecreation-and-public-transport-mobility-during-non-lockdown-periods"><a href="#57、20210126-Parallel-trends-in-the-transmission-of-SARS-CoV-2-and-retailrecreation-and-public-transport-mobility-during-non-lockdown-periods" class="headerlink" title="57、20210126-Parallel trends in the transmission of SARS-CoV-2 and retailrecreation and public transport mobility during non-lockdown periods"></a>57、20210126-Parallel trends in the transmission of SARS-CoV-2 and retailrecreation and public transport mobility during non-lockdown periods</h2><p>本研究比较不同的地理环境与相似的人口规模，通过计算有效复制数量化SARS-CoV-2传播的变化。在法国各地区和爱尔兰的前两波COVID-19大流行期间，传播趋势与流动性之间存在高度正相关。零售/娱乐流动性和传播能力增加之间的密切关系表明，人类活动恢复到基线水平会造成感染增加的重大风险。公共交通流动性和零售/娱乐流动性与传播的相关性比其他形式的流动性更强。在封锁规则放松后，流动性的增加可能导致传输的增加。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808111537377.png" class title="image-20210808111537377"></div><h2 id="58、20201112-Human-Mobility-Patterns-and-Its-Cross-Correlation-with-the-COVID-19-Transmission-in-Jakarta-Indonesia"><a href="#58、20201112-Human-Mobility-Patterns-and-Its-Cross-Correlation-with-the-COVID-19-Transmission-in-Jakarta-Indonesia" class="headerlink" title="58、20201112-Human Mobility Patterns and Its Cross-Correlation with the COVID-19 Transmission in Jakarta, Indonesia"></a>58、20201112-Human Mobility Patterns and Its Cross-Correlation with the COVID-19 Transmission in Jakarta, Indonesia</h2><p>调查了印度尼西亚雅加达的人口流动模式和COVID-19传播之间的相关性，并将其进一步分为两种主要的不同模式:工作日和周末。利用了谷歌、Waze和Apple的可公开访问的移动数据。分析显示，在雅加达(省级)和印度尼西亚(国家级)，COVID-19病例的每日增长速度与周末和工作日的驾驶和步行活动的人类活动模式相关。分析结果证实，旅行限制和保持社交距离是减少印度尼西亚大流行最有效的缓解政策之一。</p><h2 id="59、20210428-Association-between-Community-Mobility-Patterns-and-Daily-COVID-19-Cases-Some-Preliminary-Evidence-from-Pakistan"><a href="#59、20210428-Association-between-Community-Mobility-Patterns-and-Daily-COVID-19-Cases-Some-Preliminary-Evidence-from-Pakistan" class="headerlink" title="59、20210428-Association between Community Mobility Patterns and Daily COVID-19 Cases Some Preliminary Evidence from Pakistan"></a>59、20210428-Association between Community Mobility Patterns and Daily COVID-19 Cases Some Preliminary Evidence from Pakistan</h2><p>调查巴基斯坦的社区模式与每日新增COVID-19病例之间的关系，流动模式的减少与COVID-19病例的减少之间存在显著的正相关，并帮助使新感染病例曲线自2020年5月和6月达到峰值以来变得平坦。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210803095139720.png" class title="image-20210803095139720"></div><h2 id="60、20210216-The-Effect-of-Mobility-Restrictions-on-the-SARS-CoV-2-Diffusion-During-the-First-Wave-What-Are-the-Impacts-in-Sweden-USA-France-and-Colombia"><a href="#60、20210216-The-Effect-of-Mobility-Restrictions-on-the-SARS-CoV-2-Diffusion-During-the-First-Wave-What-Are-the-Impacts-in-Sweden-USA-France-and-Colombia" class="headerlink" title="60、20210216-The Effect of Mobility Restrictions on the SARS-CoV-2 Diffusion During the First Wave What Are the Impacts in Sweden, USA, France and Colombia"></a>60、20210216-The Effect of Mobility Restrictions on the SARS-CoV-2 Diffusion During the First Wave What Are the Impacts in Sweden, USA, France and Colombia</h2><p>访问了Facebook移动用户数据，每8小时测量一次。分析表明，封锁在全国范围内对病毒传播的影响相对较小，因为没有一个国家在不同程度的封锁下成功实施了控制措施，阻止了病毒的传播。尽管封锁对这些国家的移动性降低产生了不同的影响，但所有国家的用户移动性都高度集中，与单位入境人数相关系数在封锁前后均较高且稳定。一旦播下种子，病毒就会在本地连接的单位之间传播。减少流动性有助于根据剩余流动性预测扩散路径。</p><h2 id="61、20210205-Network-analysis-of-population-flow-among-major-cities-and-its-influence-on-COVID-19-transmission-in-China"><a href="#61、20210205-Network-analysis-of-population-flow-among-major-cities-and-its-influence-on-COVID-19-transmission-in-China" class="headerlink" title="61、20210205-Network analysis of population flow among major cities and its influence on COVID-19 transmission in China"></a>61、20210205-Network analysis of population flow among major cities and its influence on COVID-19 transmission in China</h2><p>在期间(2020年1月1日至2020年2月23日)，以武汉为基线情景，模拟了42个传播情景，并假设不同主要城市为原始震中，揭示了COVID-19疫情在中国不同主要城市的潜在影响。构建输入风险模型，将输入风险值定义为人口流入总量与累计确诊病例数的组合，定量检验旅行限制在全国范围内传播的有效性。构建人口流动网络，揭示42个主要城市人口流动的基本模式，分析其时空特征，识别影响人口流动的子群体和传播主体。通过去除不同影响因子，发现广州对网络拓扑特征影响最大，部分大城市的度中心性显著降低。在系统层面通过密度和平均聚类系数检验了网络结构。这可以证明人口流动网络的拓扑结构和进化是否影响了COVID-19的传播。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807093240003.png" class title="image-20210807093240003"></div><h2 id="62、202103-Projecting-daily-travel-behavior-by-distance-during-the-pandemic-and-the-spread-of-COVID-19-infections-–-Are-we-in-a-closed-loop-scenario"><a href="#62、202103-Projecting-daily-travel-behavior-by-distance-during-the-pandemic-and-the-spread-of-COVID-19-infections-–-Are-we-in-a-closed-loop-scenario" class="headerlink" title="62、202103-Projecting daily travel behavior by distance during the pandemic and the spread of COVID-19 infections – Are we in a closed loop scenario"></a>62、202103-Projecting daily travel behavior by distance during the pandemic and the spread of COVID-19 infections – Are we in a closed loop scenario</h2><p>这篇论文的目的是探讨在不久的将来，美国居民的日常旅行距离与COVID - 19感染之间的潜在关系。预测2020年11月30日至2021年2月28日期间美国居民按距离计算的每日出行未来趋势。通过对比趋势分析，确定了这一时期的日常出行和新冠疫情的扩散情况。结果显示，居民根据对COVID - 19的风险感知，在无限循环中动态改变出行行为的闭环情景。在短途旅行和长途旅行之间发现的旅行行为滞后进一步恶化了情况，并使寻找有效解决方案打破循环更加困难。这项研究为遏制和控制冠状病毒的传播提供了新的思路。只有采取适当和及时的缓解策略，才能打破这个循环。本文讨论了4种不同的干预策略，分析了居民每天的出行情况和控制新冠病毒感染的可能性。只有采取适当的干预措施并迅速向公众推出疫苗，才能打破这个封闭的循环。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819224518022.png" class title="image-20210819224518022"></div><h2 id="63、20200819-The-effect-of-travel-restrictions-on-the-geographical-spread-of-COVID-19-between-large-cities-in-China-a-modelling-study"><a href="#63、20200819-The-effect-of-travel-restrictions-on-the-geographical-spread-of-COVID-19-between-large-cities-in-China-a-modelling-study" class="headerlink" title="63、20200819-The effect of travel restrictions on the geographical spread of COVID-19 between large cities in China a modelling study"></a>63、20200819-The effect of travel restrictions on the geographical spread of COVID-19 between large cities in China a modelling study</h2><p>我们利用此前估计的武汉COVID-19流行率和可公开获得的流动数据，估算了2019年11月至2020年2月期间从武汉前往中国大陆其他主要城市的受感染旅客人数。重点关注北京、重庆、杭州和深圳这四个具有代表性的主要城市，以确定警戒线卫生和假日旅游的潜在独立贡献。还对警戒线的效果进行了模拟，并结合了减少传播的情景，以模拟当地非药物干预的效果。我们发现，在这四个城市，鉴于2019年12月至2020年1月初武汉COVID-19的潜在高流行率，当地传播可能早在2020年1月18日至8日就已播下种子。当卫生警戒线实施时，感染人数可能达到数千人。警戒线本身并没有对这些城市的疫情发展产生实质性影响，尽管它可能对小城市产生了一些影响。</p><h2 id="64、20200902-Human-mobility-and-COVID-19-initial-dynamics"><a href="#64、20200902-Human-mobility-and-COVID-19-initial-dynamics" class="headerlink" title="64、20200902-Human mobility and COVID-19 initial dynamics"></a>64、20200902-Human mobility and COVID-19 initial dynamics</h2><p>这项研究表明，由移动数据得出的人的流动性与COVID-19爆发初期的传播高度相关。在法国的案例研究中，流动性可以解释与COVID-19爆发合理相关的52%至92%的额外死亡。在意大利的案例研究中，发现了类似的结果，证实了至少在其他物理距离措施出台之前，人的流动对病毒传播有很大的影响。以西班牙为例，呈阳性的人数与人的流动性高度相关(ρ高达75%)。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210810141642901-1629386462375.png" class title="image-20210810141642901"></div><h2 id="65、20200511-Mobility-trends-provide-a-leading-indicator-of-changes-in-SARS-CoV-2-transmission"><a href="#65、20200511-Mobility-trends-provide-a-leading-indicator-of-changes-in-SARS-CoV-2-transmission" class="headerlink" title="65、20200511-Mobility trends provide a leading indicator of changes in SARS-CoV-2 transmission"></a>65、20200511-Mobility trends provide a leading indicator of changes in SARS-CoV-2 transmission</h2><p>将苹果地图的移动数据纳入每日死亡和住院人数的流行病学模型，能够估算出美国人的移动和传播之间的明确关系。迁移减少解释了4月1日获得的有效繁殖数(RE)的大幅下降，并进一步识别了状态间的变化。在推断的传输-迁移关系中，仅仅放松居家令就能迅速导致疫情超出迄今发生的传播规模。今后，必须改变RE、t和人口流动之间的关系，以避免在允许人口流动增加的情况下重新引发疫情。</p><h2 id="66、20200423-Eliminating-COVID-19-The-Impact-of-Travel-and-Timing"><a href="#66、20200423-Eliminating-COVID-19-The-Impact-of-Travel-and-Timing" class="headerlink" title="66、20200423-Eliminating COVID-19 The Impact of Travel and Timing"></a>66、20200423-Eliminating COVID-19 The Impact of Travel and Timing</h2><p>本文发现区域到区域的再生数与区域间的移动速度成正比，并与区域级控制措施实施前的时滞长度成指数关系。因此，旅行的减少和各地区采取行动的速度对COVID-19是否从各地区消除起着决定性作用。如果受感染在内部开始积极传播后立即采取社交距离措施，受感染地区的数量将随着时间呈指数级减少。如果不及时实施积极的社会距离措施，而只限制来自受感染地区的旅行只会延缓疫情的传播。然而，当旅行减少与保持社会距离措施相结合时，旅行减少不仅会延迟疫情的传播，在某些情况下还会成为是否消除疫情的决定因素。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210804154727851.png" class title="image-20210804154727851"></div><h2 id="67、20200509-Impact-of-small-area-lockdowns-for-the-control-of-the-COVID-19-pandemic"><a href="#67、20200509-Impact-of-small-area-lockdowns-for-the-control-of-the-COVID-19-pandemic" class="headerlink" title="67、20200509-Impact of small-area lockdowns for the control of the COVID-19 pandemic"></a>67、20200509-Impact of small-area lockdowns for the control of the COVID-19 pandemic</h2><p>智利(Chile)实施的小范围封锁以及其他干预措施有助于减少COVID-19流行传播,（有各类场所的移动数据和病例报告）。小区域封锁导致人类流动性大幅下降，相当于公共交通减少了11.4% ，其他流动性指标也出现了类似效果。但影响小于学校的提前关闭。小范围封锁可能在减少SARS-CoV-2传播方面发挥相关的支持作用，并可能有助于考虑缩小更严格的社会距离干预措施的国家。</p><h2 id="68、20210326-Lockdowns-result-in-changes-in-human-mobility-which-may-impact-the-epidemiologic-dynamics-of-SARS-CoV-2"><a href="#68、20210326-Lockdowns-result-in-changes-in-human-mobility-which-may-impact-the-epidemiologic-dynamics-of-SARS-CoV-2" class="headerlink" title="68、20210326-Lockdowns result in changes in human mobility which may impact the epidemiologic dynamics of SARS-CoV-2"></a>68、20210326-Lockdowns result in changes in human mobility which may impact the epidemiologic dynamics of SARS-CoV-2</h2><p>我们评估了封锁对人类流动性的影响，通过分析来自印度、法国、西班牙、孟加拉国和美国等多个国家的手机在地方和国家空间尺度上的聚集流动性数据，评估与封锁相关的旅行行为对疫情传播的影响，世界各地都出现了城市到农村的移民。模型显示，这种增加的流动有可能增加在城市较少的地区传播疫情的可能性，这可能会破坏封锁预防疾病传播的目标。封锁在减少接触和控制疫情方面发挥了关键作用，但需要在宣布封锁的同时传递适当信息，并仔细评估流动性的变化，以减轻可能的意外后果。在实施与疫情有关的旅行限制措施时，必须对当地旅行网络的变化进行信息传递和密切评估。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807192002913.png" class title="image-20210807192002913"></div><h2 id="69、20200713-Lockdown-timing-and-efficacy-in-controlling-COVID-19-using-mobilephone-tracking"><a href="#69、20200713-Lockdown-timing-and-efficacy-in-controlling-COVID-19-using-mobilephone-tracking" class="headerlink" title="69、20200713-Lockdown timing and efficacy in controlling COVID-19 using mobilephone tracking"></a>69、20200713-Lockdown timing and efficacy in controlling COVID-19 using mobilephone tracking</h2><p>使用经过处理的手机跟踪数据来衡量出行限制，并将这些数据与2020年2月1日至4月6日期间意大利三个受影响最严重的地区伦巴第、威尼托和艾米利亚-罗马涅的每日新发现的SARS-CoV-2阳性病例数量进行关联。意大利政府随后实施了两次封锁，封锁力度越来越大。在研究期间,流动性限制与每天阳性病例呈负相关仅在第二次。从无症状感染到确诊有大约10天的时间差，因此，加强封锁后，传播几乎立即得到了有效的减少。意大利为遏制SARS-CoV-2感染的传播而采取的流动限制措施的预期效果通常在实施严格封锁措施后的14至18天内看到。在感染流行率最高的地区，早在9天就可以看到效果，这意味着减少流动性和减缓人与人之间的传播之间没有什么滞后。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210809214508749.png" class title="image-20210809214508749"></div><h2 id="70、20210105-Top-Down-and-Bottom-Up-Lockdown-Evidence-from-COVID-19-Prevention-and-Control-in-China"><a href="#70、20210105-Top-Down-and-Bottom-Up-Lockdown-Evidence-from-COVID-19-Prevention-and-Control-in-China" class="headerlink" title="70、20210105-Top-Down and Bottom-Up Lockdown Evidence from COVID-19 Prevention and Control in China"></a>70、20210105-Top-Down and Bottom-Up Lockdown Evidence from COVID-19 Prevention and Control in China</h2><p>本文利用冠状病毒爆发期间全国人口流动数据，实证分析了中国人口流动与传染病传播的关系。国家限制人口流动的政策有效降低了城市间和城市内的人口流动强度，城市间和城市内迁移强度分别下降10.4%和10.5%，导致新确诊病例规模下降。人口流动限制对经济发展较好、人口密集或客流量较大的城市影响较大。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210819155336531.png" class title="image-20210819155336531"><h2 id="71、20201118-Quantifying-the-time-lag-effects-of-human-mobility-on-the-COVID-19-transmission-A-Multi-City-Study-in-China"><a href="#71、20201118-Quantifying-the-time-lag-effects-of-human-mobility-on-the-COVID-19-transmission-A-Multi-City-Study-in-China" class="headerlink" title="71、20201118-Quantifying the time-lag effects of human mobility on the COVID-19 transmission A Multi-City Study in China"></a>71、20201118-Quantifying the time-lag effects of human mobility on the COVID-19 transmission A Multi-City Study in China</h2><p>本研究旨在量化人口流动的减少和COVID-19传播的下降之间存在的滞后效应，将2020年1月17日至2月29日中国80个疫情最严重城市的城市流动性指数和新病例时间序列结合起来。研究发现:(1)人员流动与COVID-19传播呈正相关，中位时滞为10天(四分位数区间为8 11天)。（2）人口流动量越大、医疗资源越好、城市道路网络越密集的城市滞后时间越短，经济优势城市滞后时间越长。在实践中，路网密度高、城市结构紧凑的城市应果断实施出行限制措施，可在较短时间内减少传染病的传播。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819222201257.png" class title="image-20210819222201257"></div><h2 id="72、20200615-Spread-of-COVID-19-in-China-analysis-from-a-city-based-epidemic-and-mobility-model"><a href="#72、20200615-Spread-of-COVID-19-in-China-analysis-from-a-city-based-epidemic-and-mobility-model" class="headerlink" title="72、20200615-Spread of COVID-19 in China analysis from a city-based epidemic and mobility model"></a>72、20200615-Spread of COVID-19 in China analysis from a city-based epidemic and mobility model</h2><p>利用多智能体网络技术和人口迁移大数据，构建基于城市的疫情与流动模型，对COVID-19进行时空模拟。与传统模型相比，该模型具有城市网络视角的特点，强调城际人口流动和高速交通网络的重要作用。结果表明，该模型能够较准确地模拟中国新冠肺炎疫情早期的城市间传播。如果“封城”和“减少人口流动”都不实施，到2020年2月，中国累计感染病例将达到138824例，是实际病例的4.46倍。总体来看，湖北省城市封锁的围堵效应大于城市间人口流动减少的围堵效应，相对于人口流动减少，城市封锁效应对时间更为敏感。但结果表明，输出感染病例数并没有随着人口流动的增长而成比例增加，而是有一定程度的下降，在人口流动规模相同的情况下，距离越近的疫情传播绩效越强。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819222627254.png" class title="image-20210819222627254"></div><h2 id="73、20200803-COVID-19-Pandemic-with-Human-Mobility-Across-Countries"><a href="#73、20200803-COVID-19-Pandemic-with-Human-Mobility-Across-Countries" class="headerlink" title="73、20200803-COVID-19 Pandemic with Human Mobility Across Countries"></a>73、20200803-COVID-19 Pandemic with Human Mobility Across Countries</h2><p>本研究收集了每个国家每天确诊的COVID-19感染病例以及一个航班的数据集（其中包含2020年1月22日至4月24日期间22个国家的547 166次航班，总容量为101 455 913名乘客）通过一个具有网络动力学的时空模型，对新型冠状病毒在全球范围内传播进行了整体研究。分析了六大洲22个国家的疫情相关性，特别是这种相关性在针对不同国家实施国际旅行限制政策之前和之后的变化。结果表明，该研究进一步强调了国际人员流动与全球COVID-19大流行网络中重点国家疫情情况之间的潜在相关性。决策者不应改变以往只注重限制高感染率热点地区的做法。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808164917285.png" class title="image-20210808164917285"></div><h2 id="74、20200615-Differential-impacts-of-contact-tracing-and-lockdowns-on-outbreak-size-in-COVID-19-model-applied-to-China"><a href="#74、20200615-Differential-impacts-of-contact-tracing-and-lockdowns-on-outbreak-size-in-COVID-19-model-applied-to-China" class="headerlink" title="74、20200615-Differential impacts of contact tracing and lockdowns on outbreak size in COVID-19 model applied to China"></a>74、20200615-Differential impacts of contact tracing and lockdowns on outbreak size in COVID-19 model applied to China</h2><p>采取了广泛的追踪接触者和保持社交距离/封锁措施，构建了一个新的传染病模型，将这些不同的隔离措施(接触者追踪和自我隔离)作为依赖于当前感染水平的干预措施。最终爆发规模的推算与自我隔离率的增加成反比，揭示了延迟实施大规模隔离或封锁措施超过关键时间后，累计病例呈指数增长的基本原理。相比之下，追踪接触者可使繁殖数量按比例减少，使流行病曲线变平，但只有在完美追踪大部分接触者时，才会对最终规模产生相当大的影响。将数学模型与中国报告的病例和隔离接触者数据进行了拟合，发现封锁对疫情规模和持续时间有巨大影响，而接触者追踪在减少感染高峰数量方面发挥了作用。该模型对中国累计报告病例和每日隔离接触者数据均具有良好的同时拟合性。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210808140426644.png" class title="image-20210808140426644"><h2 id="75、20201231-Spatiotemporal-spread-pattern-of-the-COVID19-cases-in-China"><a href="#75、20201231-Spatiotemporal-spread-pattern-of-the-COVID19-cases-in-China" class="headerlink" title="75、20201231-Spatiotemporal spread pattern of the COVID19 cases in China"></a>75、20201231-Spatiotemporal spread pattern of the COVID19 cases in China</h2><p>本研究利用每周新增病例和总病例的数据，描述了1月17日(武汉市正式报告COVID-19病例的第一天)和3月20日(国内无新增病例)期间COVID-19的时空格局和传播趋势。结果显示：1)新冠肺炎病例主要分布在沪环永线以东地区，该地区疫情重灾区占全国的比重较高;2)受医疗资源和SARS-CoV-2病毒检测能力的限制，武汉COVID-19的拐点是2月14日，比湖北(武汉以外)和中国(湖北以外)晚一周;3)人口密度和与省级城市的距离与病例总数显著相关。在有针对性的疫苗和特定药物可用之前，断断续续的社交距离是一种有效且具有成本效益的方法。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820150433697.png" class title="image-20210820150433697"></div><h2 id="76、20210226-Tribal-Mobility-and-COVID-19-An-Urban-Rural-Analysis-in-New-Mexico"><a href="#76、20210226-Tribal-Mobility-and-COVID-19-An-Urban-Rural-Analysis-in-New-Mexico" class="headerlink" title="76、20210226-Tribal Mobility and COVID-19 An Urban-Rural Analysis in New Mexico"></a>76、20210226-Tribal Mobility and COVID-19 An Urban-Rural Analysis in New Mexico</h2><p>通过个人设备捕捉到聚集人类活动揭示了部落和非部落地区的不同移动模式，并进一步在城市和农村线之间划分。结合新墨西哥州靠近部落地区的县COVID-19病例的异常破坏性激增。在病例数量显著的县，部落流动性相对于基线水平是独特的高。通过农村部落土地检测到的总流动性似乎与COVID-19病例增长的增长相一致，此外，部落地区的人口流动模式与周围县的病例增长模式的相关性比其他任何地区都要高。我们的初步结果为部落/非部落地区和农村/城市地区之间的人员流动潜在差异提供了一个量化方案</p><h2 id="77、20201112-Monitoring-the-Spatial-Spread-of-COVID-19-and-Effectiveness-of-Control-Measures-Through-Human-Movement-Data-Proposal-for-a-Predictive-Model-Using-Big-Data-Analytics"><a href="#77、20201112-Monitoring-the-Spatial-Spread-of-COVID-19-and-Effectiveness-of-Control-Measures-Through-Human-Movement-Data-Proposal-for-a-Predictive-Model-Using-Big-Data-Analytics" class="headerlink" title="77、20201112-Monitoring the Spatial Spread of COVID-19 and Effectiveness of Control Measures Through Human Movement Data Proposal for a Predictive Model Using Big Data Analytics"></a>77、20201112-Monitoring the Spatial Spread of COVID-19 and Effectiveness of Control Measures Through Human Movement Data Proposal for a Predictive Model Using Big Data Analytics</h2><p>该研究将利用推特和其他移动源导出的移动数据开发一种新的数据驱动方法，包括创新数据模型、预测模型和计算算法，有效地从大的地理标记Twitter数据中提取和分析人类活动模式人类流动。该研究旨在利用大社交媒体数据(Twitter)、人工智能(AI)以及时空分析，以人类活动为视角，在不同空间尺度(从本地到区域到全球)监测和建模2019冠状病毒病的空间传播。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210819160259836.png" class title="image-20210819160259836"></div><h2 id="78、20201215-Using-Mobility-Data-to-Understand-and-Forecast-COVID19-Dynamics"><a href="#78、20201215-Using-Mobility-Data-to-Understand-and-Forecast-COVID19-Dynamics" class="headerlink" title="78、20201215-Using Mobility Data to Understand and Forecast COVID19 Dynamics"></a>78、20201215-Using Mobility Data to Understand and Forecast COVID19 Dynamics</h2><p>介绍了一个新的GNN框架，将聚集流动纳入其中，以便更好地理解人类流动对COVID-19动态的影响，并更好地预测疾病动态。提出了一种循环信息传递GNN，在进行预测时嵌入时空疾病动态(COVID-19监测数据)和人类流动性动态(MF数据)。美国各州每日新冠肺炎病例预测的实验结果表明，使用移动数据获得了额外的改善</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210807173429479.png" class title="image-20210807173429479"></div><h2 id="79、20200108-Prediction-of-the-COVID-19-epidemic-trends-based-on-SEIR-and-AI-models"><a href="#79、20200108-Prediction-of-the-COVID-19-epidemic-trends-based-on-SEIR-and-AI-models" class="headerlink" title="79、20200108-Prediction of the COVID-19 epidemic trends based on SEIR and AI models"></a>79、20200108-Prediction of the COVID-19 epidemic trends based on SEIR and AI models</h2><p>本文收集2020年1月23日至3月6日新冠肺炎确诊病例、治愈病例、死亡病例等数据，结合百度人口迁移数据和国家统计局相关城市数据，预测中国新冠肺炎感染人数。SEIR模型可以很好地预测武汉的疫情，武汉以原发病例为主，AI模型加入人口迁移数据可以很好地预测中国非武汉地区的疫情，输入感染人数较多。此外，本研究估计了武汉关闭对疫情趋势的影响。结果表明，封锁武汉是有效遏制疫情大范围扩散的重要举措，大大减少了全国各地的感染人数。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210825125711025.png" class title="image-20210825125711025"></div><h2 id="80、20200914-Deepcovidnet-An-interpretable-deep-learning-model-for-predictive-surveillance-of-covid-19-using-heterogeneous-features-and-their-interactions"><a href="#80、20200914-Deepcovidnet-An-interpretable-deep-learning-model-for-predictive-surveillance-of-covid-19-using-heterogeneous-features-and-their-interactions" class="headerlink" title="80、20200914-Deepcovidnet An interpretable deep learning model for predictive surveillance of covid-19 using heterogeneous features and their interactions"></a>80、20200914-Deepcovidnet An interpretable deep learning model for predictive surveillance of covid-19 using heterogeneous features and their interactions</h2><p>提出了一种深度学习模型来预测未来几天covid - 19感染病例的增长幅度，并提出了一种计算多元时间序列和多元空间时间序列数据的等维表示的新方法。利用这种新方法，所提出的模型既可以吸收大量的异质性特征，如人口普查数据、县内流动、县间流动、社会距离数据、过去感染增长等，又可以学习这些特征之间复杂的相互作用。利用从不同来源收集的数据，我们估计了未来七天内美国所有县感染病例的增长幅度。此外，我们使用模型确定最具影响力的特征，以预测感染的增长。我们还分析特征对，并估计观测到的二阶相互作用的数量。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820142039544.png" class title="image-20210820142039544"></div><h2 id="81、20200510-Metapopulation-modeling-of-COVID-19-advancing-into-the-countryside-an-analysis-of-mitigation-strategies-for-Brazil"><a href="#81、20200510-Metapopulation-modeling-of-COVID-19-advancing-into-the-countryside-an-analysis-of-mitigation-strategies-for-Brazil" class="headerlink" title="81、20200510-Metapopulation modeling of COVID-19 advancing into the countryside an analysis of mitigation strategies for Brazil"></a>81、20200510-Metapopulation modeling of COVID-19 advancing into the countryside an analysis of mitigation strategies for Brazil</h2><p>本文提出了一种新的流行病模型(SuEIR)，用于预测COVID-19的传播，包括美国国家和州一级的确诊病例和死亡病例数量。具体来说，SuEIR模型是SEIR模型的变体，考虑了未经测试/未报告的COVID-19病例，并通过基于报告的历史数据的机器学习算法进行训练。除了提供确诊病例和病死率的基本预测外，所提出的SuEIR模型还能够预测活动性病例的高峰日期，并估计基本复制数(R0)。特别是，根据模型预测，美国、纽约州和加利福尼亚州的峰值日期分别为06/01/2020、05/10/2020和07/01/2020。另外，美国、纽约州和加利福尼亚州的估计R0分别为2.5、3.6和2.2</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210825205728473.png" class title="image-20210825205728473"></div><h2 id="82、Global-monitoring-of-the-impact-of-the-COVID-19-pandemic-through-online-surveys-sampled-from-the-Facebook-user-base"><a href="#82、Global-monitoring-of-the-impact-of-the-COVID-19-pandemic-through-online-surveys-sampled-from-the-Facebook-user-base" class="headerlink" title="82、Global monitoring of the impact of the COVID-19 pandemic through online surveys sampled from the Facebook user base"></a>82、Global monitoring of the impact of the COVID-19 pandemic through online surveys sampled from the Facebook user base</h2><p>马里兰大学全球 COVID 趋势和影响调查 (UMD-CTIS) 于 2020 年 4 月启动，是最大的远程全球健康监测系统。这项研究包括到 2020 年 12 月来自所有 114 个国家/地区的约 3000 万份回复，并根据不回复和人口统计数据调整了调查权重。使用每天从 Facebook 用户处抽样的自我报告横断面调查数据，我们确认了一致的人口统计数据和COVID-19 症状。在国家和汇总的全球数据上训练的机器学习模型验证了已知的症状指标。我们的全球模型预测本地 COVID-19 病例趋势。重要的是，一项调查项目与报告的病例密切相关，证明了在 UMD-CTIS 采样或政府数据不足的地区的潜在效用。在卫生基础设施紧张但社交媒体用户活跃的地区，我们表明可以使用独立于当地政府资源的远程平台来定义 COVID-19 的影响轨迹。这种综合征监测公共卫生工具是迄今为止规模最大的全球健康调查，在参与者短暂参与的情况下，可以在当地范围内提供对全球 COVID-19 大流行的有意义、及时的见解。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20211226213618647.png" class title="image-20211226213618647"></div><h2 id="83、20210310-Urban-Epidemic-Hazard-Index-for-Chinese-Cities：Why-Did-Small-Cities-Become-Epidemic-Hotspots"><a href="#83、20210310-Urban-Epidemic-Hazard-Index-for-Chinese-Cities：Why-Did-Small-Cities-Become-Epidemic-Hotspots" class="headerlink" title="83、20210310-Urban Epidemic Hazard Index for Chinese Cities：Why Did Small Cities Become Epidemic Hotspots"></a>83、20210310-Urban Epidemic Hazard Index for Chinese Cities：Why Did Small Cities Become Epidemic Hotspots</h2><p>用交通和人口等因素去评估城市的风险程度，用SEIR模型评估城市内部的流动，将城市作为节点采用交通因素研究城际间的流动 （将城市的人口分SEIR四类 研究这四类对其他城市的流入）去评估城市分风险程度</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210803094916734.png" class title="image-20210803094916734"></div><h2 id="84、20201207-Risk-mapping-for-COVID-19-outbreaks-in-Australia-using-mobility-data"><a href="#84、20201207-Risk-mapping-for-COVID-19-outbreaks-in-Australia-using-mobility-data" class="headerlink" title="84、20201207-Risk mapping for COVID-19 outbreaks in Australia using mobility data"></a>84、20201207-Risk mapping for COVID-19 outbreaks in Australia using mobility data</h2><p>评估了人口流动数据（Facebook位置转为OD数据）在估计传播风险的地理分布方面的效用。提出了一个简单的程序，从实时人口流动数据生成空间传播风险评估。根据澳大利亚三次有充分记录的COVID-19疫情验证了我们的估计。其中两个是明确定义的传播集群，一个是社区传播场景。结果表明，流动数据可以很好地预测传播中心暴露风险的地理模式，特别是在涉及工作场所或与习惯性旅行模式相关的其他环境的疫情暴发时。对于社区传播情景，结果表明，当病例数较低且空间聚集时，流动性数据对风险预测最有价值。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210805213717764.png" class title="image-20210805213717764"><h2 id="1、20210714-Assessing-the-Role-of-Daily-Activities-and-Mobility-in-the-Spread-of-COVID-19-in-Montreal-With-an-Agent-Based-Approach"><a href="#1、20210714-Assessing-the-Role-of-Daily-Activities-and-Mobility-in-the-Spread-of-COVID-19-in-Montreal-With-an-Agent-Based-Approach" class="headerlink" title="1、20210714-Assessing the Role of Daily Activities and Mobility in the Spread of COVID-19 in Montreal With an Agent-Based Approach"></a>1、20210714-Assessing the Role of Daily Activities and Mobility in the Spread of COVID-19 in Montreal With an Agent-Based Approach</h2><p>本文使用基于代理的模拟方法研究了加拿大蒙特利尔的日常活动、流动性与病毒传播之间的联系。为了解决这个研究问题，我们使用了两个基于代理的模型：MATSIM 和 EPISIM。MATSIM 模拟人口的日常活动和流动动态。EPISIM 使用 MATSIM 计算的接触网络模拟病毒在人群中的传播。</p><p>Figure 1.两种微观模拟模型的耦合催生了宏观层面上新出现的感染现象</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/1.png" class title="image-20210828085920606"></div><h2 id="2、20200501-Substantial-undocumented-infection-facilitates-the-rapid-dissemination-of-novel-coronavirus-SARS-CoV-2"><a href="#2、20200501-Substantial-undocumented-infection-facilitates-the-rapid-dissemination-of-novel-coronavirus-SARS-CoV-2" class="headerlink" title="2、20200501-Substantial undocumented infection facilitates the rapid dissemination of novel coronavirus (SARS-CoV-2)"></a><strong>2、20200501-Substantial undocumented infection facilitates the rapid dissemination of novel coronavirus (SARS-CoV-2)</strong></h2><p>在本文中，我们使用对中国境内报告感染的观察，结合流动性数据、网络动态元种群模型和贝叶斯推理，推断与 SARS-CoV-2 相关的关键流行病学特征，包括未记录感染的比例及其传染性。我们估计，在 2020 年 1 月 23 日旅行限制之前，所有感染中有 86% 没有记录[95%可信区间(CI)：82–90%]。未记录感染的人均传播率为记录感染传播率的 55%（95%CI：46–62%），然而，由于数量较多，未记录在案的感染是 79%记录在案病例的来源。这些发现解释了 SARS-CoV-2 的快速地理传播，并表明遏制这种病毒将特别具有挑战性。</p><p>Fig. 2.未经记录的感染对SARS-CoV-2传播的影响。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/2.png" class title="image-20210828090404716"></div><h2 id="3、20200501-The-effect-of-human-mobility-and-control-measures-on-the-COVID-19-epidemic-in-China"><a href="#3、20200501-The-effect-of-human-mobility-and-control-measures-on-the-COVID-19-epidemic-in-China" class="headerlink" title="3、20200501-The effect of human mobility and control measures on the COVID-19 epidemic in China"></a>3、20200501-The effect of human mobility and control measures on the COVID-19 epidemic in China</h2><p>在本文中，我们使用武汉的实时流动数据和包括旅行史在内的详细病例数据来阐明病例输入在中国各城市传播中的作用，并确定控制措施的影响。在实施控制措施前，人类流动数据很好地解释了中国 COVID-19 病例的空间分布；实施控制措施后，这种相关性下降，大多数地区的增长率为负，尽管报告病例人口结构的变化仍然表明武汉以外的地方传播链。这项研究表明，在中国实施的严厉控制措施大大减轻了 COVID-19 的传播。</p><p>Fig. 2. 中国新冠肺炎疫情的人类流动性、传播和同步性。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/3.png" class title="image-20210828090807044"></div><h2 id="4、20200712-Lockdown-timing-and-effificacy-in-controlling-COVID-19-using-mobile-phone-tracking"><a href="#4、20200712-Lockdown-timing-and-effificacy-in-controlling-COVID-19-using-mobile-phone-tracking" class="headerlink" title="4、20200712-Lockdown timing and effificacy in controlling COVID-19 using mobile phone tracking"></a><strong>4、20200712-Lockdown timing and effificacy in controlling COVID-19 using mobile phone tracking</strong></h2><p>从2020年2月1日至4月6 日，意大利政府随后实施了两次强度越来越大的封锁。根据手机追踪数据，我们发现第二次封锁导致个人流动性大幅下降，从而阻止了疫情。为了评估封锁的有效性，在本文中，我们使用经过处理的手机跟踪数据来衡量移动限制，并将这些数据与意大利三个受影响最严重的地区伦巴第、威尼托和艾米利亚-罗马涅每天检测到的新 SARS-CoV-2 阳性病例数相关联。结果表明，似乎不太严格的封锁导致流动性下降不足以扭转 COVID-19 等爆发。随着更严格的封锁，流动性下降到足以使传播迅速低于维持流行病所需的水平。</p><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/3.1.png" class title="image-20210828091443859"></div><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/3.2.png" class title="image-20210828091545089"></div><h2 id="5-20200430-International-tourist-arrivals-as-a-determinant-of-the-severity-of-Covid-19-international-cross-sectional-evidence"><a href="#5-20200430-International-tourist-arrivals-as-a-determinant-of-the-severity-of-Covid-19-international-cross-sectional-evidence" class="headerlink" title="5.20200430-International tourist arrivals as a determinant of the severity of Covid-19: international cross sectional evidence"></a><strong>5.20200430-International tourist arrivals as a determinant of the severity of Covid-19: international cross sectional evidence</strong></h2><p>在本文中，我们使用涵盖 146 个国家/地区的横截面样本，研究了国际游客人数对人口死亡率和病死率的影响，其中死亡人数是由 Covid-19 引起的。内部人口流动的作用没有被明确考虑，但可以通过限制流动的封锁措施来体现。实证分析的结果表明，与其他任何因素相比，国际游客人数对 Covid-19 严重程度的影响更大。这意味着实施国际旅行禁令是遏制病毒的目标。</p><h2 id="6、20200527-Rapid-assessment-of-the-impact-of-“lockdown”-on-the-COVID-19-epidemic-in-Portugal"><a href="#6、20200527-Rapid-assessment-of-the-impact-of-“lockdown”-on-the-COVID-19-epidemic-in-Portugal" class="headerlink" title="6、20200527-Rapid assessment of the impact of “lockdown” on the COVID-19 epidemic in Portugal"></a><strong>6、20200527-Rapid assessment of the impact of “lockdown” on the COVID-19 epidemic in Portugal</strong></h2><p>为控制COVID-19流行，葡萄牙于3月16日实施行动封锁，结果他们的整体流动性降低了80%。本文中，我们估计了葡萄牙封锁对减轻卫生服务负担的影响。我们预测了病例、住院患者（整体和 ICU 中）和未锁定的死亡人数的流行曲线，假设遏制措施的影响将在实施锁定后14天开始。我们对死亡、重症监护 (ICU) 和住院使用指数平滑模型，对病例数使用 ARIMA 模型，比较了观测（有干预）和预测曲线（无干预）。结果表明：如果没有在3月中旬实施封锁，葡萄牙ICU的容量可能会在4月上半月突破。封锁似乎有效地减少了SARS-Cov-2的传播、严重的Covid-19疾病和相关的死亡率，从而减少了对卫生服务的需求。</p><p>Figure 2.观察和预测每日死亡的人数，有95%的置信水平</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/6.png" class width="6"></div>  <h2 id="7、20200628-A-SIR-model-assumption-for-the-spread-of-COVID-19-in-different-Communities"><a href="#7、20200628-A-SIR-model-assumption-for-the-spread-of-COVID-19-in-different-Communities" class="headerlink" title="7、20200628-A SIR model assumption for the spread of COVID-19 in different Communities"></a>7、20200628-A SIR model assumption for the spread of COVID-19 in different Communities</h2><p>在本文中，我们研究了COVID-19大流行的建模方法的有效性，并开发了一种易感感染去除(SIR)模型，该模型为研究其在社区内的传播提供了理论框架。该模型基于众所周知的易感感染去除（SIR）模型，不同之处在于总人口本身没有定义或保持不变，易感个体的数量不会单调下降，它可以在激增期间增加。特别是，我们调查了不同人群的时间演变，并监测了疾病在各个国家（以中国、韩国、印度、澳大利亚、美国、意大利和美国德克萨斯州为代表）传播的各种重要参数。SIR 模型可以为我们提供有关病毒在国家中传播的见解和预测，而仅凭记录的数据是无法做到的。我们的工作显示了通过我们在此提出的SIR模型对COVID-19 的传播进行建模的重要性，因为它可以通过提供有价值的预测来帮助评估疾病的影响。我们的分析考虑了2020年1月至6月的数据，该时间段包含实施严格和控制措施之前和期间的数据。我们建议对与COVID-19传播相关的各种参数以及到2020年9月的易感、感染和移出人群数量进行预测。通过将记录的数据与我们建模方法中的数据进行比较，我们推断出COVID-19的传播可以在所有考虑的国家中得到控制。</p><p>Fig. 2.中国：(a)与方程式（3）之间的非线性拟合。(b)清除次数的绘图。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/7.png" class title="image-20210828093332393"></div><h2 id="8、20200701-Modeling-state-estimation-and-optimal-control-for-the-US-COVID‑19-outbreak"><a href="#8、20200701-Modeling-state-estimation-and-optimal-control-for-the-US-COVID‑19-outbreak" class="headerlink" title="8、20200701-Modeling, state estimation, and optimal control for the US COVID‑19 outbreak"></a><strong>8、20200701-Modeling, state estimation, and optimal control for the US COVID‑19 outbreak</strong></h2><p>在本文中，我们引入了一种基于动态优化的决策框架，用于美国 COVID-19 爆发的整个流行病学建模和爆发控制工作流程。这包括对受影响人群的动态进行建模（对传统的 SEIR结构进行了一些关键修改），从数据中估计模型参数和隐藏状态，以及对社会疏远和测试事件进行排序的最佳控制策略，以便最大限度地减少感染数量。分析表明，尽早实施社交距离和隔离是最有效的，对确诊感染者的隔离具有更高的影响。此外，我们发现在严格的社会疏远和放松此类限制之间交替的“开关”政策可以有效地“拉平”曲线，同时可能最大限度地降低社会和经济成本。</p><p>Figure 1.SEAIR模型的数字表示 </p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/8.png" class width="8"></div><h2 id="9、20200702-Do-COVID-19-Policies-Affect-Mobility-Behaviour-Evidence-from-75-Canadian-and-American-Cities"><a href="#9、20200702-Do-COVID-19-Policies-Affect-Mobility-Behaviour-Evidence-from-75-Canadian-and-American-Cities" class="headerlink" title="9、20200702-Do COVID-19 Policies Affect Mobility Behaviour? Evidence from 75 Canadian and American Cities"></a><strong>9、20200702-Do COVID-19 Policies Affect Mobility Behaviour? Evidence from 75 Canadian and American Cities</strong></h2><p>在本文中，我们对加拿大和美国的COVID-19政策措施和公民流动模式进行了比较分析。我们为加拿大和美国75个城市中的每一个构建了一个包含5个可比市级政策指标的原始数据集，将其与现有的11个州/省政策数据相结合，构建了一个衡量每个城市地方政策组合总体积极性的新指标。然后，我们使用每个城市的动态时间序列模型来估计这种地方政策组合对公民流动模式的影响，发现加拿大和美国城市之间几乎没有系统差异：在这两个国家，平均政策进取性相似，后续流动模式的影响明显。只有在整体流动性水平这个方面，我们发现加拿大城市的流动性在所有三种交通方式中都明显低于美国城市。</p><p>Figure 2 城市流动性</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/9.png" class title="image-20210828093851310"></div><h2 id="10、20200813-The-dynamics-of-COVID-19-spread-evidence-from-Lebanon"><a href="#10、20200813-The-dynamics-of-COVID-19-spread-evidence-from-Lebanon" class="headerlink" title="10、20200813-The dynamics of COVID-19 spread: evidence from Lebanon"></a>10、20200813-The dynamics of COVID-19 spread: evidence from Lebanon</h2><p>本文中，我们采用两种不同的方法来探索2019年COVID-19在黎巴嫩的传播：STEIR 模型（一种考虑旅行影响修改后的SEIR模型）和重复迭代模型。我们拟合了自第一例确诊病例以来到2020年6月底的每日可用数据，并预测了与不同程度的社会疏远措施和旅行流入相关的可能传染情况，确定了黎巴嫩的初始生殖传播率和所有后续动态。在重复迭代(RI)模型中，我们迭代当前感染者的可用数据，以预测在几种可能传染情况下的未来感染。在这两个模型中，结果表明，更严厉的缓解措施将减缓疾病的传播。另一方面，正如STEIR所揭示的那样，目前放松措施和部分恢复国际航班将引发第二次感染爆发，其严重程度取决于放松的程度。我们建议机构和公众对缓解措施做出强有力的承诺，以避免不受控制的传播。</p><p>  Figure 2 根据STEIR模型的累积感染数。                             Figure 6 根据RI模型的当前感染者人数。</p><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/10.1.png" class title="image-20210828094408477"></div><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/10.2.png" class title="image-20210828094507702"></div><h2 id="11、20200828-Estimating-the-establishment-of-local-transmission-and-the-cryptic-phase-of-the-COVID-19-pandemic-in-the-USA"><a href="#11、20200828-Estimating-the-establishment-of-local-transmission-and-the-cryptic-phase-of-the-COVID-19-pandemic-in-the-USA" class="headerlink" title="11、20200828-Estimating the establishment of local transmission and the cryptic phase of the COVID-19 pandemic in the USA"></a><strong>11、20200828-Estimating the establishment of local transmission and the cryptic phase of the COVID-19 pandemic in the USA</strong></h2><p>在本文中，我们使用全球元群传播模型来研究COVID-19大流行在美国持续和未被发现的社区传播的建立。该模型根据来自中国大陆的国际病例输入进行校准，并考虑了往返国际目的地的旅行限制。我们估计2020年2月SARS-CoV-2将在社区广泛传播。建模结果表明，国际旅行是在西海岸和东海岸大都市地区引入SARS-CoV-2的关键驱动因素，这些地区最早可能在2019年12月底被播种。对于大多数大陆国家来说，输入性感染的最大贡献是通过国内旅行流来的。</p><p>Figure 3:重要来源。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/11.png" class title="image-20210828095243792"></div><h2 id="12、20200909-Effects-of-Proactive-Social-Distancing-on-COVID-19-Outbreaks-in-58-Cities-China"><a href="#12、20200909-Effects-of-Proactive-Social-Distancing-on-COVID-19-Outbreaks-in-58-Cities-China" class="headerlink" title="12、20200909-Effects of Proactive Social Distancing on COVID-19 Outbreaks in 58 Cities, China"></a><strong>12、20200909-Effects of Proactive Social Distancing on COVID-19 Outbreaks in 58 Cities, China</strong></h2><p>中国各地的城市在2020年初实施了严格的社会疏远措施，以遏制冠状病毒病的爆发。在本文中，我们估计了这些措施控制城市传播的速度。结果发现，实施社交距离延迟1天导致遏制延迟2.41 (95% CI 0.97–3.86)天。</p><p> Figure.在2020年2月15日之前，南京和西安2个省会冠状病毒病(covid-19)的引入、传播和遏制。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/12.png" class title="image-20210828095502273"></div><h2 id="13、20201005-A-simple-criterion-to-design-optimal-non-pharmaceutical-interventions-for-epidemic-outbreaks"><a href="#13、20201005-A-simple-criterion-to-design-optimal-non-pharmaceutical-interventions-for-epidemic-outbreaks" class="headerlink" title="13、20201005-A simple criterion to design optimal non-pharmaceutical interventions for epidemic outbreaks"></a><strong>13、20201005-A simple criterion to design optimal non-pharmaceutical interventions for epidemic outbreaks</strong></h2><p>在本文中，我们推导出了一个简单且数学上严格的标准，用于设计缓解流行病爆发的最佳暂时性非药物干预措施。我们发现将再生数减少到1以下就足够了，但不是必需的。相反，我们的标准根据所需的疾病流行率最大值和干预措施可以实现的疾病传播的最大减少量来规定所需的繁殖数减少量。我们研究了我们的理论结果对在COVID-19大流行期间在16个城市和地区设计非药物干预措施的影响。特别是，我们估计了最佳控制流行病所需的每个地区接触率的最小降低。我们的结果有助于建立严格的方法来指导最佳非药物干预政策的设计。</p><p>Figure 3: 易感感染消除模型中的最佳非药物干预</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/13.png" class title="image-20210828095704517"></div><h2 id="14、20201006-Adaptive-Bayesian-Learning-and-Forecasting-of-Epidemic-Evolution—Data-Analysis-of-the-COVID-19-Outbreak"><a href="#14、20201006-Adaptive-Bayesian-Learning-and-Forecasting-of-Epidemic-Evolution—Data-Analysis-of-the-COVID-19-Outbreak" class="headerlink" title="14、20201006-Adaptive Bayesian Learning and Forecasting of Epidemic Evolution—Data Analysis of the COVID-19 Outbreak"></a><strong>14、20201006-Adaptive Bayesian Learning and Forecasting of Epidemic Evolution—Data Analysis of the COVID-19 Outbreak</strong></h2><p>有大量文献描述了贝叶斯序列和自适应动态估计在导弹和舰船等物体的监视（跟踪和预测）中的应用。本文中，我们将其一些关键经验教训转移到流行病学中。我们表明，我们可以根据当局提供的日常（可能是不确定的）公开可用信息可靠地估计和预测感染的演变，例如，感染者和康复者的每日人数。该方法应用于意大利伦巴第地区和美国的真实数据，能够估计感染和恢复参数，并能够以良好的准确性跟踪和预测流行病学曲线。在这些情况下，锁定后计算的平均绝对百分比误差在预测为7天时平均低于5%，当预测范围为14天时平均低于10%。</p><p>TABLE 4.美国流行病演变预测的平均绝对百分比误差 (MAPE)*<em>*</em></p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/14.png" class title="image-20210828121130677"></div><h2 id="15、20201006-Changing-travel-patterns-in-China-during-the-early-stages-of-the-COVID-19-pandemic"><a href="#15、20201006-Changing-travel-patterns-in-China-during-the-early-stages-of-the-COVID-19-pandemic" class="headerlink" title="15、20201006-Changing travel patterns in China during the early stages of the COVID-19 pandemic"></a><strong>15、20201006-Changing travel patterns in China during the early stages of the COVID-19 pandemic</strong></h2><p>本文中，我们基于来自中国大陆的数据，调查了2020年1月1日至3月1日之间中国各州之间人类流动的时空特征，以提供对中国COVID-19大流行早期阶段的旅行模式的详细检查，并讨论了它们对公共卫生的影响。由于农历新年，在实施旅行限制之前，从武汉出发的出境旅行激增，这表明与即将实施的旅行限制相比，假期旅行可能在流动性变化中发挥了更大的作用。假期旅行还将与COVID-19相关的医疗保健压力转移到医疗保健能力较低的地方。网络分析显示，农历新年后交通网络没有发生重大变化的迹象。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/15.png" class title="image-20210828100555580"></div><h2 id="16、20200710-Estimating-the-burden-of-SARS-CoV-2-in-France"><a href="#16、20200710-Estimating-the-burden-of-SARS-CoV-2-in-France" class="headerlink" title="16、20200710-Estimating the burden of SARS-CoV-2 in France"></a><strong>16、20200710-Estimating the burden of SARS-CoV-2 in France</strong></h2><p>法国受到COVID-19大流行的严重影响，并于2020年3月17日进入封锁状态。在本文中，我们使用应用于医院和死亡数据的模型，估计封锁和当前人群免疫力的影响。我们发现2.9%的感染者住院，0.5%的感染者死亡（95%可信区间：0.3至0.9%），范围从20岁以下人群的0.001%到80岁以下人群的8.3%不等。在所有年龄段，男性比女性更有可能住院、进入重症监护室和死亡。封锁将再生数从2.90减少到0.67（减少了77%）。到2020年5月11日计划放宽干预措施时，我们预计350万人（范围：210万至 600万）或人口的 5.3%（范围：3.3 %至 9.3%）会被感染。如果在封锁结束时解除所有控制措施，人口免疫力似乎不足以避免第二波疫情。</p><p>Fig. 1. 法国的 COVID-19 住院和死亡人数</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/16.png" class title="image-20210828101012182"></div><h2 id="17、20201111-Potential-Role-of-Social-Distancing-in-Mitigating-Spread-of-Coronavirus-Disease-South-Korea"><a href="#17、20201111-Potential-Role-of-Social-Distancing-in-Mitigating-Spread-of-Coronavirus-Disease-South-Korea" class="headerlink" title="17、20201111-Potential Role of Social Distancing in Mitigating Spread of Coronavirus Disease, South Korea"></a><strong>17、20201111-Potential Role of Social Distancing in Mitigating Spread of Coronavirus Disease, South Korea</strong></h2><p>韩国COVID-19的爆发在2月底达到顶峰，并在3月中旬消退。本文中，我们分析了社交距离在减少传播方面的可能作用。分析表明，尽管某些地区的传播可能会持续存在，但与中国采取的措施相比，采取不那么极端的措施可以抑制流行病，并表明迅速识别和隔离病例以防止传播 ( <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7588540/#R4">4</a> )的必要性。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/17.png" class title="image-20210828101359281"></div><h2 id="18、20201123-The-Coupled-Impact-of-Emergency-Responses-and-Population-Flows-on-the-COVID‐19-Pandemic-in-China"><a href="#18、20201123-The-Coupled-Impact-of-Emergency-Responses-and-Population-Flows-on-the-COVID‐19-Pandemic-in-China" class="headerlink" title="18、20201123-The Coupled Impact of Emergency Responses and Population Flows on the COVID‐19 Pandemic in China"></a><strong>18、20201123-The Coupled Impact of Emergency Responses and Population Flows on the COVID‐19 Pandemic in China</strong></h2><p>在本文中，我们研究并比较了疫情爆发期和控制期武汉封城后应急响应措施和人口流动对中国疫情的影响。我们发现，疫情期间，武汉大量人口外流导致全国人口流动，直接加剧了各省的疫情。同时，快速的应急响应减缓了传播。尽管远离湖北的省份人口流动少，延迟了这些省份的疫情，但相对滞后的应急响应增加了控制期内的疫情。因此，由于SARS-CoV-2病毒的强传播能力，没有地区正确估计疫情，应急响应的缓解给疫情背景下增加了疫情风险。</p><p>Figure 3.中国人口流动空间分布与应急响应效率</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/18.png" class title="image-20210828101535986"></div><h2 id="19、20201202-Outbreak-diversity-in-epidemic-waves-propagating-through-distinct-geographical-scales"><a href="#19、20201202-Outbreak-diversity-in-epidemic-waves-propagating-through-distinct-geographical-scales" class="headerlink" title="19、20201202-Outbreak diversity in epidemic waves propagating through distinct geographical scales"></a><strong>19、20201202-Outbreak diversity in epidemic waves propagating through distinct geographical scales</strong></h2><p>在大流行情况下，新出现的传染病的一个核心特征是根据采用的缓解协议在地理范围内传播以及对不同地点的影响。本文中，我们使用元种群方法研究了随机流行模型，其中补丁代表自治市。传染遵循自治市的随机分区模型；后者反过来又通过经常性的流动性相互影响。作为一个研究案例，我们考虑了巴西 COVID-19 的流行，并进行了数据驱动的模拟。模拟流行曲线的特性在不同的地理位置和规模上具有非常广泛的分布，从州到中间和直接地区，再到市级。结果表明多个流行病灶向内陆城市传播的影响，不同地区对同一缓解方案的反应可能会有很大差异，这意味着抗击流行病的政策必须根据地区的特殊性而设计，但要结合总体情况。真实的系列报告案例证实了模拟中预测的定性场景。尽管我们的研究仅限于巴西，但前景和模型可以扩展到其他具有异质人口分布的地理组织。</p><p>FIG.1.(a)元种群结构和(b)流行病转变及其各自的比率的示意图。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/19.png" class title="image-20210828101641950"></div><h2 id="20、20201204-Differential-effects-of-intervention-timing-on-COVID-19-spread-in-the-United-States"><a href="#20、20201204-Differential-effects-of-intervention-timing-on-COVID-19-spread-in-the-United-States" class="headerlink" title="20、20201204-Differential effects of intervention timing on COVID-19 spread in the United States"></a>20、20201204-Differential effects of intervention timing on COVID-19 spread in the United States</h2><p>评估早期非药物干预对2019年COVID-19传播的影响对于理解和规划未来的控制措施以对抗大流行至关重要。本文中，我们使用对报告的感染和死亡的观察、人类流动数据和元种群传播模型来量化2020年3月15日至5月3日期间美国各县疾病传播率的变化。美国与社会疏远和其他控制措施有关。反事实模拟表明，如果提前1到2周实施这些相同的措施，可以避免大量病例和死亡，而对未来发病率增加的延迟反应将促进感染和死亡的更强劲反弹。研究结果强调了早期干预和积极控制在对抗 COVID-19 大流行中的重要性。</p><p>Fig.3.反事实模拟，控制干预始于3月初，比实施时间提前1周和2周。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/20.png" class title="image-20210828101805705"></div><h2 id="21、20201215-Inferring-the-effectiveness-of-government-interventions-against-COVID-19"><a href="#21、20201215-Inferring-the-effectiveness-of-government-interventions-against-COVID-19" class="headerlink" title="21、20201215-Inferring the effectiveness of government interventions against COVID-19"></a><strong>21、20201215-Inferring the effectiveness of government interventions against COVID-19</strong></h2><p>各国政府正试图通过非药物干预NPI来控制COVID-19大流行。然而，人们对非营利机构在减少传播方面的有效性知之甚少。本文中，我们收集了一些欧洲和非欧洲国家在2020年1月至5月底期间实施NPI的时间顺序数据。我们估计了这些NPI的有效性，范围从限制聚会规模和关闭企业或教育机构到在家庭订单。为此，我们使用了贝叶斯分层模型，该模型将NPI实施日期与国家病例和死亡人数联系起来，并通过广泛的实证验证支持结果。关闭所有教育机构，将聚会限制在10人或更少，并关闭面对面的企业，每一项都大大减少了传播。</p><p>Fig.5. 模型概述</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/21.png" class title="image-20210828101932291"></div><h2 id="22、20210122-Lessons-from-movement-ecology-for-the-return-to-work-Modeling-contacts-and-the-spread-of-COVID-19"><a href="#22、20210122-Lessons-from-movement-ecology-for-the-return-to-work-Modeling-contacts-and-the-spread-of-COVID-19" class="headerlink" title="22、20210122-Lessons from movement ecology for the return to work: Modeling contacts and the spread of COVID-19"></a><strong>22、20210122-Lessons from movement ecology for the return to work: Modeling contacts and the spread of COVID-19</strong></h2><p>在做出重新开放决定时，需要明确考虑移动和接触模式，尤其是在重返工作岗位方面。本文中，我们考虑在大型研究型大学恢复研究的初始阶段使用运动生态学和接触网络流行病学的方法。首先，我们开发了一个动态病原体模型，描述了家庭和工作之间的运动；我们表明，通过减少工作人员或减少工作时间来限制社会接触是减缓病原体传播的相当等效的策略。第二，我们开发了一个基于校园特定办公室和实验室建筑内的空间接触模式的模型；我们表明，将校园活动限制在实验室（而不是实验室和办公室）可以显着改变（模块化）接触网络结构，从而通过提供减少接触的工作场所机制来潜在地减少病原体传播。我们认为明确考虑工作场所中的人类活动和接触行为可以提供额外的策略来减缓病原体传播，这些策略可以与正在进行的公共卫生工作结合使用。</p><p>Fig 5.网络模型结构</p><img src="/posts/39e7a431.htm/39e7a431/22.png" class title="image-20210828102040392"><h2 id="23、20210204-Endogenous-social-distancing-and-its-underappreciated-impact-on-the-epidemic-curve"><a href="#23、20210204-Endogenous-social-distancing-and-its-underappreciated-impact-on-the-epidemic-curve" class="headerlink" title="23、20210204-Endogenous social distancing and its underappreciated impact on the epidemic curve"></a><strong>23、20210204-Endogenous social distancing and its underappreciated impact on the epidemic curve</strong></h2><p>本文中，我们使用博弈论将部分感染人群中自愿社交距离的相互作用形式化。这改进了流行病学模型的行为微观基础，并根据健康状况预测不同的社会疏远率。推导出该模型在比较静态方面的关键预测，这些预测涉及患病者和健康者的社会疏远行为之间的变化和相互作用。我们将内源性社会疏远的相关参数与具有流感波证据的流行病学模型进行拟合，以提供具有内源性社会疏远的流行曲线的基准。结果表明，峰值和病例数的传播与人口的部分固定所产生的相似，但传播速度更快，可能是内源性发生的。展望未来，最终的社交距离命令和封锁政策应该以更现实的流行模式为基准，这些模式考虑到内源性社交距离，而不是由静态的估计驱动，本质上高估了传播。</p><p>Figure 1. 社交距离互动的简化</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/23.png" class title="image-20210828102346557"></div><h2 id="24、20210513-Measuring-the-effect-of-Non-Pharmaceutical-Interventions-NPIs-on-mobility-during-the-COVID-19-pandemic-using-global-mobility-data"><a href="#24、20210513-Measuring-the-effect-of-Non-Pharmaceutical-Interventions-NPIs-on-mobility-during-the-COVID-19-pandemic-using-global-mobility-data" class="headerlink" title="24、20210513-Measuring the effect of Non-Pharmaceutical Interventions (NPIs) on mobility during the COVID-19 pandemic using global mobility data"></a><strong>24、20210513-Measuring the effect of Non-Pharmaceutical Interventions (NPIs) on mobility during the COVID-19 pandemic using global mobility data</strong></h2><p>在本文中，我们使用Apple和Google发布的每个国家/地区的汇总流动数据，调查了非营利机构对跨国层面流动性变化幅度和速率的贡献比例。对流动变化幅度影响最大的非营利机构是封锁措施；宣布进入紧急状态；关闭企业和公共服务以及关闭学校。对流动性变化率影响最大的非营利机构是实施封锁措施和限制公共集会。我们观察到NPI对Apple和Google移动数据的直接和类似影响。此外，虽然苹果和谷歌的数据是通过不同的方法获得的，但它们之间的相关性很强，表明它们反映了国家层面的整体流动性。这些数据的可用性为政府提供了一个机会，以建立及时的、统一的、具有经济效益的机制来监测covid-19或未来的大流行对策。</p><p>Fig. 4苹果和谷歌移动数据之间的相关性</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/24.png" class title="image-20210828102503711"></div><h2 id="25、20200425-Changes-of-urban-activities-and-behaviors-due-to-COVID-19-in-Japan"><a href="#25、20200425-Changes-of-urban-activities-and-behaviors-due-to-COVID-19-in-Japan" class="headerlink" title="25、20200425-Changes of urban activities and behaviors due to COVID-19 in Japan"></a><strong>25、20200425-Changes of urban activities and behaviors due to COVID-19 in Japan</strong></h2><p>由于 COVID-19 大流行而实施的社会疏远措施改变了城市地区的社会经济活动。本研究根据谷歌和苹果提供的移动数据分析了日本四个大都市地区的这些行为变化。结果表明，常规行为模式已被 COVID-19 显着扰乱，行为抑制的表现因城市结构和气候因素而异。</p><p>Figure 1.苹果和谷歌的数据分析了移动性趋势的变化。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/25.png" class title="image-20210828102631575"></div><h2 id="26、20200608-FAST-AND-LOCAL-HOW-DID-LOCKDOWN-POLICIES-AFFECT-THE-SPREAD-AND-SEVERITY-OF-COVID-19"><a href="#26、20200608-FAST-AND-LOCAL-HOW-DID-LOCKDOWN-POLICIES-AFFECT-THE-SPREAD-AND-SEVERITY-OF-COVID-19" class="headerlink" title="26、20200608-FAST AND LOCAL: HOW DID LOCKDOWN POLICIES AFFECT THE SPREAD AND SEVERITY OF COVID-19?"></a><strong>26、20200608-FAST AND LOCAL: HOW DID LOCKDOWN POLICIES AFFECT THE SPREAD AND SEVERITY OF COVID-19?</strong></h2><p>本文中，我们分析了控制措施是否有助于减少感染的传播和死亡人数，同时比较了它们在发达国家和发展中国家的有效性。我们的数据涵盖了2019年12月31日至2020年5月4日期间的184个国家，并确定了何时采取封锁，以及因covid-19确诊的感染和死亡病例。我们发现，在减少感染和死亡人数方面，部分封锁与采取更严格的措施一样有效。我们估计，在发达国家，它们减少了约65万人的死亡人数，但在发展中国家没有发现如此显著的影响。这表明，只有在呆在家里的机会成本不太高时，封锁才会奏效。我们还发现，行动迅速的国家表现更好，但即使在50天后，关闭边界也没有明显的效果。</p><p>Figure 2: 措施、案例和死亡人数的演变</p><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/26.1.png" class title="img"></div><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/26.2.png" class title="image-20210828102933237"></div><h1 id="三、human-mobility"><a href="#三、human-mobility" class="headerlink" title="三、human mobility"></a>三、human mobility</h1><h2 id="1、20201022-Non-compulsory-measures-sufficiently-reduced-human-mobility-in-Tokyo-during-the-COVID-19-epidemic"><a href="#1、20201022-Non-compulsory-measures-sufficiently-reduced-human-mobility-in-Tokyo-during-the-COVID-19-epidemic" class="headerlink" title="1、20201022-Non-compulsory measures sufficiently reduced human mobility in Tokyo during the COVID-19 epidemic"></a>1、20201022-Non-compulsory measures sufficiently reduced human mobility in Tokyo during the COVID-19 epidemic</h2><p>利用从日本东京的20多万部手机收集的匿名移动数据，分析了i)人类移动行为变化：通过回转半径和总旅行量评估个人移动程度 ii)社会接触率：通过个人轨迹计算平均社交接触量 iii)这种移动变化与COVID-19传播能力的相关性的时间变化。到4月15日(宣布进入紧急状态1周后)，东京人的行动行为减少了约50%，导致社会接触减少了70%，且人员流动指标和社会接触措施的减少与COVID-19有效繁殖数量的减少存在显著相关性。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210819120458926.png" class title="image-20210819120458926"><h2 id="2、20201110-Twitter-reveals-human-mobility-dynamics-during-the-COVID-19-pandemic"><a href="#2、20201110-Twitter-reveals-human-mobility-dynamics-during-the-COVID-19-pandemic" class="headerlink" title="2、20201110-Twitter reveals human mobility dynamics during the COVID-19 pandemic"></a>2、20201110-Twitter reveals human mobility dynamics during the COVID-19 pandemic</h2><p>探究全球协作努力减少人类流动性，通过分析全球5.8亿多条推文，反映在三个不同的地理尺度上:全球尺度、国家尺度和美国州尺度减少出行的努力。为了从推特上量化出行的各个方面，我们提出了两种距离类型，即强调每日出行行为的单日距离和强调连续两天出行行为的跨日距离。进一步发现，流动性变化的触发因素与缓解措施的宣布很好地对应，这反过来证明，基于twitter的流动性，在某种程度上暗示了这些措施的有效性。在美国各州范围内，COVID-19大流行对流动性的影响是明显的，因为在3月13日宣布国家紧急状态后，大多数州的流动性下降发生在3月中旬。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210805144038563.png" class title="image-20210805144038563"></div><h2 id="3、20210422-Changes-in-mobility-and-socioeconomic-conditions-during-the-COVID-19-outbreak"><a href="#3、20210422-Changes-in-mobility-and-socioeconomic-conditions-during-the-COVID-19-outbreak" class="headerlink" title="3、20210422-Changes in mobility and socioeconomic conditions during the COVID-19 outbreak"></a>3、20210422-Changes in mobility and socioeconomic conditions during the COVID-19 outbreak</h2><p>在本文中，分析了在哥伦比亚实施控制措施后的流动性变化，描述了大流行之前和期间的流动网络，并分析了2020年1月至7月期间的演变和变化。观察到交通出行的总体减少趋势，但城市不同地区之间的整体连通性在封锁后仍然保持着，这反映了交通网络的弹性。然后估计了一个重力模型来评估社会经济条件对流动的影响。发现对封锁政策的反应取决于人口的社会经济条件。在大流行之前，社会经济条件较好的人口具有较高的流动性。自封锁以来，流动性总体下降，但社会经济条件较差的人口流动性下降幅度较小。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210807205341300.png" class title="image-20210807205341300"><h2 id="4、20201210-Country-wide-mobility-changes-observed-using-mobile-phone-data-during-COVID-19-pandemic"><a href="#4、20201210-Country-wide-mobility-changes-observed-using-mobile-phone-data-during-COVID-19-pandemic" class="headerlink" title="4、20201210-Country-wide mobility changes observed using mobile phone data during COVID-19 pandemic"></a>4、20201210-Country-wide mobility changes observed using mobile phone data during COVID-19 pandemic</h2><p>使用近实时、匿名的移动电话数据，描述了奥地利因SARSCoV-2大流行而实施封锁期间的人员流动变化。我们讨论了非常有限的区域(如地铁站、机场或单个村庄)的流动性变化，以及地区和国家的变化。表明限制措施的宣布导致整个国家的人口流动急剧减少。随着社区分解为集群，模块性随之增加。当移动性随后恢复时，可以在另一个方向进行类似的观察。然而，对于基于POI的指标，无法观察到这样的复苏。从感染率的时间滞后进一步证明，出发地-目的地矩阵对流行病学预测有很大的价值</p><h2 id="5、20201226-Japanese-travel-behavior-trends-and-change-under-COVID-19-state-of-emergency-declaration-Nationwide-observation-by-mobile-phone-location-data"><a href="#5、20201226-Japanese-travel-behavior-trends-and-change-under-COVID-19-state-of-emergency-declaration-Nationwide-observation-by-mobile-phone-location-data" class="headerlink" title="5、20201226-Japanese travel behavior trends and change under COVID-19 state-of-emergency declaration Nationwide observation by mobile phone location data"></a>5、20201226-Japanese travel behavior trends and change under COVID-19 state-of-emergency declaration Nationwide observation by mobile phone location data</h2><p>此次研究是利用移动终端网络运营数据，对日本新冠肺炎紧急状态宣布后的行为变化进行实证分析的结果。结果表明，在没有严格限制的情况下，旅行和跨州旅行显著减少，引发行为变化的主要因素似乎是学校停课和宣布进入紧急状态。此外，人口密度指数下降了20%，人们避免前往人口稠密的地区，表明所有城市的人们的行为都发生了很大的变化。相比之下，在农村出行次数并没有减少。但是，即使出行次数没有减少，人口密度指数也大幅下降。这表明，一旦宣布进入紧急状态，人们的行为就会发生变化，但一旦宣布解除，就不会立即恢复正常。相反，它恢复得很慢。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808142413666.png" class title="image-20210808142413666"></div><h2 id="6、20201006-Human-mobility-restrictions-and-inter-provincial-migration-during-the-COVID-19-crisis-in-China"><a href="#6、20201006-Human-mobility-restrictions-and-inter-provincial-migration-during-the-COVID-19-crisis-in-China" class="headerlink" title="6、20201006-Human mobility restrictions and inter-provincial migration during the COVID-19 crisis in China"></a>6、20201006-Human mobility restrictions and inter-provincial migration during the COVID-19 crisis in China</h2><p>本研究考察了新冠肺炎疫情期间，人口流动限制对中国省际人口流动影响的变化。结果表明:2020年1月底至5月初，流动限制降低了63%的省际人口流入和62%的省际人口流出，但不同省份间的影响差异显著。此外，社会媒体参与度高、公共安全支出高、突发公共卫生事件一级响应时间长的省份，流动限制对省级人口外流的负面影响更大</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808132020273.png" class title="image-20210808132020273"></div><h2 id="7、20200624-COVID-19-outbreak-response-a-dataset-to-assess-mobility-changes-in-Italy-following-national-lockdown"><a href="#7、20200624-COVID-19-outbreak-response-a-dataset-to-assess-mobility-changes-in-Italy-following-national-lockdown" class="headerlink" title="7、20200624-COVID-19 outbreak response, a dataset to assess mobility changes in Italy following national lockdown"></a>7、20200624-COVID-19 outbreak response, a dataset to assess mobility changes in Italy following national lockdown</h2><p>提供了三个不同的聚集流动性指标的每日时间序列:意大利各省之间的出发地-目的地移动、回转半径和空间邻近网络的平均程度。所有指标都是通过处理大规模数据集计算出来的，这些数据集包含疫情爆发前和期间约17万名未识别的智能手机用户的匿名共享位置。这一数据集有助于监测封锁对疫情轨迹的影响</p><h2 id="8、20200524-Changes-in-mobility-patterns-in-Europe-during-the-COVID-19-pandemic-Novel-insights-using-open-source-data"><a href="#8、20200524-Changes-in-mobility-patterns-in-Europe-during-the-COVID-19-pandemic-Novel-insights-using-open-source-data" class="headerlink" title="8、20200524-Changes in mobility patterns in Europe during the COVID-19 pandemic Novel insights using open source data"></a>8、20200524-Changes in mobility patterns in Europe during the COVID-19 pandemic Novel insights using open source data</h2><p>通过综合不同公开来源的数据得出的结果，以阐明欧洲大流行期间流动模式的变化。利用这些数据，我们发现不同国家的人口流动模式已经发生了变化，这取决于他们在疫情期间采取的策略。我们的数据显示，在封锁期间，大多数欧洲公民步行的次数减少了，而且，尽管航班减少了，但开车的人数大幅增加。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808152906868.png" class title="image-20210808152906868"></div><h2 id="9、20200522-Understanding-the-collective-responses-of-populations-to-the-covid-19-pandemic-in-mainland-china"><a href="#9、20200522-Understanding-the-collective-responses-of-populations-to-the-covid-19-pandemic-in-mainland-china" class="headerlink" title="9、20200522-Understanding the collective responses of populations to the covid-19 pandemic in mainland china"></a>9、20200522-Understanding the collective responses of populations to the covid-19 pandemic in mainland china</h2><p>从信息和流动性的角度，评估中国大规模人口对新冠肺炎疫情的应急响应程度。利用从百度Maps和百度搜索引擎收集的实时和历史数据，我们证实了2020年1月1日至23日期间，中国各主要城市的本地疫情形势与来自武汉的人口流入之间存在很强的相关性。随着当地感染情况的恶化，个人对信息的需求也越来越高。一个城市的感染病例越多，这个城市的居民就会越多地上网搜索相关信息。然而，人们不太可能逃离他们居住的城市，即使在情况危急的时候。一个城市的传染病情况越严重，居民越不可能走出城市。此外，消息灵通的个人更有可能减少旅行，一个城市的居民参与与疫情有关的搜索越多，这些居民就越有可能避免旅行。</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210808170801147.png" class title="image-20210808170801147"></div><h2 id="10、202103-A-big-data-driven-approach-to-analyzing-and-modeling-human-mobility-trend-under-non-pharmaceutical-interventions-during-COVID-19-pandemic"><a href="#10、202103-A-big-data-driven-approach-to-analyzing-and-modeling-human-mobility-trend-under-non-pharmaceutical-interventions-during-COVID-19-pandemic" class="headerlink" title="10、202103-A big-data driven approach to analyzing and modeling human mobility trend under non-pharmaceutical interventions during COVID-19 pandemic"></a>10、202103-A big-data driven approach to analyzing and modeling human mobility trend under non-pharmaceutical interventions during COVID-19 pandemic</h2><p>本文提出了一个大数据驱动的分析框架，每天吸收tb数据，定量评估COVID-19期间的人的流动趋势。该研究使用了美国超过1.5亿月度活跃样本的移动设备位置数据，成功地衡量了县级人口的流动性，“居家令”只导致人员流动减少3.5% - 7.9%，而“重新开放指南”导致人员流动增加1.6%-5.2%。研究结果还表明，美国各州之间存在合理的空间异质性，其中确诊病例数量、收入水平、产业结构、年龄和种族分布起着重要作用。</p><h2 id="11、20200520-People-Behavior-Changes-in-China-during-COVID-19-Pandemic"><a href="#11、20200520-People-Behavior-Changes-in-China-during-COVID-19-Pandemic" class="headerlink" title="11、20200520-People Behavior Changes in China during COVID-19 Pandemic"></a>11、20200520-People Behavior Changes in China during COVID-19 Pandemic</h2><p>我们对中国五个主要城市的1048人进行了调查，跟踪和量化疫情爆发后不同时期的行为变化。研究发现，外出活动(工作、吃饭、购物、乘坐公共交通和旅行)在高峰期减少了近80%。在遏制措施放松后，此类活动逐渐增多，但仍大大低于疫情前水平。这种显著的行为变化有助于中国病毒传播的快速控制。虽然各国正在病毒消失前重新开放经济，但检测和追踪接触者的系统和能力应仔细设计，以跟踪未来人们的行为变化。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210820114246257.png" class title="image-20210820114246257"></div><h1 id="四、COVID-19"><a href="#四、COVID-19" class="headerlink" title="四、COVID-19"></a>四、COVID-19</h1><h2 id="1、20210716-Exploration-of-transmission-chain-and-prevention-of-the-recurrence-of-coronavirus-disease-2019-in-Heilongjiang-Province-due-to-in-hospital-transmission"><a href="#1、20210716-Exploration-of-transmission-chain-and-prevention-of-the-recurrence-of-coronavirus-disease-2019-in-Heilongjiang-Province-due-to-in-hospital-transmission" class="headerlink" title="1、20210716-Exploration of transmission chain and prevention of the recurrence of coronavirus disease 2019 in Heilongjiang Province due to in-hospital transmission"></a>1、20210716-Exploration of transmission chain and prevention of the recurrence of coronavirus disease 2019 in Heilongjiang Province due to in-hospital transmission</h2><p>哈尔滨市疫情反弹，对不同级别（包括市级、医院级和医务人员级）的复发原因进行了调查，描述了完整的传播链，分析了疫情爆发的原因，并结合实际的临床经验提出了相应的对策</p><div style="width: 67%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/39e7a431.htm/39e7a431/image-20210803103818634.png" class title="image-20210803103818634"></div><h2 id="2、20210421-Smart-city-projects-against-COVID-19-Quantitative-evidence-from-China"><a href="#2、20210421-Smart-city-projects-against-COVID-19-Quantitative-evidence-from-China" class="headerlink" title="2、20210421-Smart city projects against COVID-19 Quantitative evidence from China"></a>2、20210421-Smart city projects against COVID-19 Quantitative evidence from China</h2><p>将智慧城市项目分为与新冠疫情防控密切相关的智慧社区、智慧政府、智慧医疗、智慧信息四大类。实证结果表明，每万人的智慧城市投资每增加100万元，每万人新冠肺炎确诊病例减少0.342例。异质性分析结果表明，智慧城市项目在新冠病毒在城市内传播期间的效果强于流入期间。此外，人口规模不同的城市，其影响也不同。对于人口规模中等城市来说，其影响并不像大城市和小城市显著。</p><h2 id="3、20200322-Social-distancing-strategies-for-curbing-the-COVID-19-epidemic"><a href="#3、20200322-Social-distancing-strategies-for-curbing-the-COVID-19-epidemic" class="headerlink" title="3、20200322-Social distancing strategies for curbing the COVID-19 epidemic"></a>3、20200322-Social distancing strategies for curbing the COVID-19 epidemic</h2><p>本文使用数学模型评估，一次性干预措施不足以在美国重症监护能力范围内维持COVID-19的流行。传播的季节性变化将有助于在夏季控制疫情，但也可能导致秋季疫情的严重复发。间歇性的保持距离措施可以保持对疫情的控制，但如果没有其他干预措施，这些措施可能会持续到2022年。提高重症监护能力可以缩短SARS-CoV-2疫情的持续时间，同时确保危重患者得到适当的护理。</p><img src="/posts/39e7a431.htm/39e7a431/image-20210825162006112.png" class title="image-20210825162006112"><h1 id="五、综述"><a href="#五、综述" class="headerlink" title="五、综述"></a>五、综述</h1><h2 id="1、Results-from-the-centers-for-disease-control-and-prevention’s-predict-the-2013–2014-Influenza-Season-Challenge"><a href="#1、Results-from-the-centers-for-disease-control-and-prevention’s-predict-the-2013–2014-Influenza-Season-Challenge" class="headerlink" title="1、Results from the centers for disease control and prevention’s predict the 2013–2014 Influenza Season Challenge"></a>1、Results from the centers for disease control and prevention’s predict the 2013–2014 Influenza Season Challenge</h2>]]></content>
      
      
      <categories>
          
          <category> 文献调研 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Docker-OSRM</title>
      <link href="posts/4ecd7bb4.html"/>
      <url>posts/4ecd7bb4.html</url>
      
        <content type="html"><![CDATA[<h1 id="1、安装docker并升级到最新版本"><a href="#1、安装docker并升级到最新版本" class="headerlink" title="1、安装docker并升级到最新版本"></a>1、安装docker并升级到最新版本</h1><p>安装时加入到环境变量</p><h1 id="2、在docker中拉取osrm镜像"><a href="#2、在docker中拉取osrm镜像" class="headerlink" title="2、在docker中拉取osrm镜像"></a>2、在docker中拉取osrm镜像</h1><p>cmd中执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker pull osrm/osrm-backend  <span class="comment"># 在docker hub上下载旧版（https://hub.docker.com/r/osrm/osrm-backend/tags）  </span></span><br><span class="line">docker pull ghcr.io/project-osrm/osrm-backend:v5.27.1  <span class="comment"># 在github上下载新版（https://github.com/Project-OSRM/osrm-backend/releases）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 非必要命令</span></span><br><span class="line">docker run -it --<span class="built_in">rm</span> ghcr.io/project-osrm/osrm-backend:v5.27.1 /bin/bash  <span class="comment"># 进入</span></span><br><span class="line"><span class="built_in">ls</span> <span class="comment"># 进入查看配置文件</span></span><br></pre></td></tr></table></figure><h1 id="3、下载OSM的地区文件"><a href="#3、下载OSM的地区文件" class="headerlink" title="3、下载OSM的地区文件"></a>3、下载OSM的地区文件</h1><p>.osm.pbf格式的，数据放在D:\APP\OSRM\osrm文件夹下，数据名称叫做sjz_car.osm.pbf</p><h1 id="4、用osrm配置文件处理数据（共4步）"><a href="#4、用osrm配置文件处理数据（共4步）" class="headerlink" title="4、用osrm配置文件处理数据（共4步）"></a>4、用osrm配置文件处理数据（共4步）</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用不同交通方式提取数据，这里的car可以改成bicycle和foot，最后采用不同端口部署（本科5001:foot，5002:bicycle, 5003:car)</span></span><br><span class="line">docker run -t -v D:\APP\OSRM\osrm:/data ghcr.io/project-osrm/osrm-backend:v5<span class="number">.27</span><span class="number">.1</span> osrm-extract -p car.lua /data/sjz_car.osm.pbf  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行数据分区：OSRM使用多级分区技术（MLD）将路网划分为多个层级的区域，以加速路径查询。这种分区结构使得在大型路网中进行路径计算时，可以快速缩小搜索范围，提高查询效率。</span></span><br><span class="line">docker run -t -v D:\APP\OSRM\osrm:/data ghcr.io/project-osrm/osrm-backend:v5<span class="number">.27</span><span class="number">.1</span> osrm-partition /data/sjz_car.osrm  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据订制化，定制化过程根据特定的交通方式和用户需求，对预处理的数据进行调整。例如，针对不同的交通方式，可能需要应用不同的速度限制、道路优先级或其他约束条件。定制化确保了路由引擎能够根据实际需求提供最优的路线规划</span></span><br><span class="line">docker run -t -v D:\APP\OSRM\osrm:/data ghcr.io/project-osrm/osrm-backend:v5<span class="number">.27</span><span class="number">.1</span> osrm-customize /data/sjz_car.osrm  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 以不同的端口运行</span></span><br><span class="line">docker run -d -p <span class="number">5003</span>:<span class="number">5000</span> --name osrm_backend_car -v D:\APP\OSRM\osrm:/data ghcr.io/project-osrm/osrm-backend:v5<span class="number">.27</span><span class="number">.1</span> osrm-routed --algorithm mld /data/sjz_car.osrm  </span><br><span class="line"><span class="comment"># 检验, 端口决定交通方式，car位置可填任何字符串，都默认为该端口配置的</span></span><br><span class="line">http://localhost:<span class="number">5003</span>/route/v1/car/<span class="number">114.557077</span>,<span class="number">38.0156195</span>;<span class="number">114.169827</span>,<span class="number">37.618745</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 其他命令</span></span><br><span class="line">docker ps -a 查看所有容器； docker stop 容器<span class="built_in">id</span> 中断对应容器； docker rm 容器<span class="built_in">id</span> 删除对应容器</span><br></pre></td></tr></table></figure><h1 id="5、爬虫"><a href="#5、爬虫" class="headerlink" title="5、爬虫"></a>5、爬虫</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> polyline</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_walking_route</span>(<span class="params">start_coords, end_coords, osrm_url=<span class="string">&#x27;http://localhost:5001&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    从 OSRM 获取步行路线的时间、距离和路径坐标</span></span><br><span class="line"><span class="string">    :param start_coords: 起点的经纬度元组 (纬度, 经度)</span></span><br><span class="line"><span class="string">    :param end_coords: 终点的经纬度元组 (纬度, 经度)</span></span><br><span class="line"><span class="string">    :param osrm_url: OSRM 服务的 URL 地址，默认本地服务</span></span><br><span class="line"><span class="string">    :return: None，直接打印结果</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 构建请求 URL</span></span><br><span class="line">    url = <span class="string">f&quot;<span class="subst">&#123;osrm_url&#125;</span>/route/v1/walking/<span class="subst">&#123;start_coords[<span class="number">1</span>]&#125;</span>,<span class="subst">&#123;start_coords[<span class="number">0</span>]&#125;</span>;<span class="subst">&#123;end_coords[<span class="number">1</span>]&#125;</span>,<span class="subst">&#123;end_coords[<span class="number">0</span>]&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 请求参数：overview=full 表示返回完整路线，steps=true 返回每个步骤的详细信息，geometries=polyline 返回 polyline 格式的路径</span></span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&#x27;overview&#x27;</span>: <span class="string">&#x27;full&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;steps&#x27;</span>: <span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;geometries&#x27;</span>: <span class="string">&#x27;polyline&#x27;</span>  <span class="comment"># 返回路径的 polyline 编码</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发起 GET 请求</span></span><br><span class="line">    response = requests.get(url, params=params)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        data = response.json()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 获取第一个路径</span></span><br><span class="line">        route = data[<span class="string">&#x27;routes&#x27;</span>][<span class="number">0</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 路程和时间</span></span><br><span class="line">        duration = route[<span class="string">&#x27;duration&#x27;</span>] / <span class="number">60</span>  <span class="comment"># 转换为分钟</span></span><br><span class="line">        distance = route[<span class="string">&#x27;distance&#x27;</span>] / <span class="number">1000</span>  <span class="comment"># 转换为公里</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 获取路径的 polyline 编码，并解码为坐标</span></span><br><span class="line">        encoded_polyline = route[<span class="string">&#x27;geometry&#x27;</span>]</span><br><span class="line">        decoded_polyline = polyline.decode(encoded_polyline)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 输出路线信息</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;步行路线信息:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;总路程: <span class="subst">&#123;distance:<span class="number">.2</span>f&#125;</span> 公里&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;预计时间: <span class="subst">&#123;duration:<span class="number">.2</span>f&#125;</span> 分钟&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;路径坐标 (Polyline 解码):&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> decoded_polyline:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;(<span class="subst">&#123;point[<span class="number">0</span>]&#125;</span>, <span class="subst">&#123;point[<span class="number">1</span>]&#125;</span>)&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 输出详细的路线步骤</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n路线步骤:&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> step <span class="keyword">in</span> route[<span class="string">&#x27;legs&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;steps&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;- <span class="subst">&#123;step[<span class="string">&#x27;instruction&#x27;</span>]&#125;</span> (距离: <span class="subst">&#123;step[<span class="string">&#x27;distance&#x27;</span>]&#125;</span> 米, 时间: <span class="subst">&#123;step[<span class="string">&#x27;duration&#x27;</span>] / <span class="number">60</span>:<span class="number">.2</span>f&#125;</span> 分钟)&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;请求失败: <span class="subst">&#123;response.status_code&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(response.text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 示例：起点和终点的经纬度（例如，柏林的两个位置）</span></span><br><span class="line">    start_coordinates = (<span class="number">52.517037</span>, <span class="number">13.388860</span>)  <span class="comment"># 起点：柏林</span></span><br><span class="line">    end_coordinates = (<span class="number">52.529407</span>, <span class="number">13.397634</span>)    <span class="comment"># 终点：柏林</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 调用函数获取步行路线信息</span></span><br><span class="line">    get_walking_route(start_coordinates, end_coordinates)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="6、服务的关闭与开启"><a href="#6、服务的关闭与开启" class="headerlink" title="6、服务的关闭与开启"></a>6、服务的关闭与开启</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动：docker start &lt;container_name&gt;</span></span><br><span class="line"><span class="comment"># 停止：docker stop &lt;container_name&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 科研技能 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>远程桌面连接</title>
      <link href="posts/ce3115a7.html"/>
      <url>posts/ce3115a7.html</url>
      
        <content type="html"><![CDATA[<h1 id="1、如何删除远程桌面的账号"><a href="#1、如何删除远程桌面的账号" class="headerlink" title="1、如何删除远程桌面的账号"></a>1、如何删除远程桌面的账号</h1><p>（1）win + R， 输入regedit，进入注册表</p><p>（2）进入目录：计算机\HKEY_CURRENT_USER\SOFTWARE\Microsoft\Terminal Server Client\Default，将对应的ip删掉即可</p><img src="/posts/ce3115a7.htm/ce3115a7/image-20251230131933686.png" class title="image-20251230131933686">]]></content>
      
      
      <categories>
          
          <category> 奇奇怪怪的小tips </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>写Paper</title>
      <link href="posts/3644d420.html"/>
      <url>posts/3644d420.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何写文章"><a href="#如何写文章" class="headerlink" title="如何写文章"></a>如何写文章</h1><p>①introduction：大帽子 相关工作 however 我们的工作价值（极简总结 first second ）<br>② result：至少1张解释图illustration+4张框架图<br>③discussion ：总结提纯result 突出意义 不足 展望 in conclusion（领域内的意义、历史应用） introduction-》result-》abstract-》conclusion-》title</p><p>不管是做哪个学科 哪个方向 在做好文献调研之后 准备做东西之前和过程基本都是这个套路：<br>①先做规模一个思路 如果不确定就是猜 当然不是乱猜的 你需要细致深入的了解之后再猜<br>②之后就是去一步一步完成 不断完善修改之前的思路 以及验证之前的猜测<br>③都验证完了 从头到尾的逻辑也就已经通了<br>④然后在算一些相关佐证的东西 作为锦上添花的 完善整个工作的意义和工作量<br>⑤最后想办法把结论与实际问题联系上提出一定解决方案 就算是圆了</p><p>① 想<br>② 试 驳斥自己想的东西<br>③ 理解自己手里的东西，总结出核心的问题，围绕着自己的问题去做</p><h1 id="AI模版"><a href="#AI模版" class="headerlink" title="AI模版"></a>AI模版</h1><p>你是一个杰出的科研文献翻译家，你能结合文段所涉及领域的专业知识将原文翻译得即准确又通顺。请你将所给的文本段落按照原文格式翻译为中文，注意不要输出除译文以外的任何额外内容。 以下是一些翻译要求： agent翻译为智能体，LLM不要翻译，文章独创的组合词不要翻译（例如RoleAgent）</p><p>你是《Sustainable Cities and Society》《Computers, Environment and Urban Systems》《Cities》三个期刊的审稿人。你熟知城市科学、人类出行、疾病传播领域，是这些领域杰出的科研文献翻译家。请你协助我，帮我把文章文段将中文转换为英文，要保证准确和专业性，也要符合期刊的语言特色，不要太晦涩难懂，也不要太简单。注意语句之间的连贯性。专业词汇，脱标度化翻译成rescaled；防控措施翻译成interventions</p><h1 id="城市科学期刊"><a href="#城市科学期刊" class="headerlink" title="城市科学期刊"></a>城市科学期刊</h1><img src="/posts/3644d420.htm/3644d420/image-20250917210452039-17602390684663.png" class title="image-20250917210452039"><h1 id="投稿"><a href="#投稿" class="headerlink" title="投稿"></a>投稿</h1><h2 id="1、Sustainable-Cities-and-Society"><a href="#1、Sustainable-Cities-and-Society" class="headerlink" title="1、Sustainable Cities and Society"></a>1、Sustainable Cities and Society</h2><img src="/posts/3644d420.htm/3644d420/image-20251012112058267.png" class title="image-20251012112058267"><img src="/posts/3644d420.htm/3644d420/image-20251012112104881.png" class title="image-20251012112104881"><img src="/posts/3644d420.htm/3644d420/image-20251012112111303.png" class title="image-20251012112111303"><p>这里要上传Latex的文件夹，文件夹里包括以下内容</p><img src="/posts/3644d420.htm/3644d420/image-20251012112125446.png" class title="image-20251012112125446"><p>上传完之后要在这里对应选内容</p><img src="/posts/3644d420.htm/3644d420/image-20251012112133019.png" class title="image-20251012112133019"><p>然后在下拉列表里把其他的文件也上传了</p><img src="/posts/3644d420.htm/3644d420/image-20251012112151700.png" class title="image-20251012112151700"><p>然后进入第三步，需要选择对应的领域，如下图，可以翻译快速寻找</p><img src="/posts/3644d420.htm/3644d420/image-20251012112203028.png" class title="image-20251012112203028"><img src="/posts/3644d420.htm/3644d420/image-20251012112209877.png" class title="image-20251012112209877"><p>第五步不用写</p><img src="/posts/3644d420.htm/3644d420/image-20251012112223864.png" class title="image-20251012112223864"><p>第六步需要填一下，然后作者那添加完可以拖动调换顺序</p><img src="/posts/3644d420.htm/3644d420/image-20251012112236401.png" class title="image-20251012112236401"><img src="/posts/3644d420.htm/3644d420/image-20251012112241857.png" class title="image-20251012112241857"><p>然后就可以点build PDF for Approval, 再然后出去会不停的刷新，刷新完了就可以检查pdf了。尤其要检查正文编译是否存在问题，如果没问题了，就可以提交了，提交之后就是下面这个页面。</p><img src="/posts/3644d420.htm/3644d420/image-20251012112253379.png" class title="image-20251012112253379"><img src="/posts/3644d420.htm/3644d420/image-20251012112300579.png" class title="image-20251012112300579">]]></content>
      
      
      <categories>
          
          <category> 科研技能 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>常用代码</title>
      <link href="posts/7f5a32bc.html"/>
      <url>posts/7f5a32bc.html</url>
      
        <content type="html"><![CDATA[<h1 id="常用代码"><a href="#常用代码" class="headerlink" title="常用代码"></a>常用代码</h1><h2 id="一、常用引入库"><a href="#一、常用引入库" class="headerlink" title="一、常用引入库"></a>一、常用引入库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> atan,radians,tan,cos,sin,acos</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">plt.rcParams[<span class="string">&#x27;figure.dpi&#x27;</span>] = <span class="number">300</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Microsoft YaHei&#x27;</span>] <span class="comment"># Microsoft YaHei</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span>  <span class="comment"># 负数</span></span><br></pre></td></tr></table></figure><h2 id="二、分布图绘制"><a href="#二、分布图绘制" class="headerlink" title="二、分布图绘制"></a>二、分布图绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">draw_distrubution</span>(<span class="params">date, drawdata, xlabel, drawtype</span>):</span><br><span class="line">    <span class="keyword">if</span> drawtype == <span class="string">&#x27;hist&#x27;</span>:</span><br><span class="line">        plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">        <span class="comment"># data = [np.log10(a) for a in drawdata]  # 对数直方图，以10为底，np.log(a)默认以e为底</span></span><br><span class="line">        data = drawdata</span><br><span class="line">        min_val, max_val = np.<span class="built_in">min</span>(data), np.<span class="built_in">max</span>(data)</span><br><span class="line">        bins1 = np.linspace(min_val, max_val, num=<span class="number">20</span>)</span><br><span class="line">        sns.histplot(data, bins=bins1, color=<span class="string">&quot;red&quot;</span>, alpha=<span class="number">0.7</span>, stat=<span class="string">&quot;density&quot;</span>)  <span class="comment"># stat=&#x27;count&#x27;默认是频数 , stat=&quot;density&quot;画概率密度</span></span><br><span class="line">        plt.xlabel(xlabel, fontsize=<span class="number">14</span>)</span><br><span class="line">        plt.ylabel(drawtype, fontsize=<span class="number">14</span>)</span><br><span class="line">        plt.title(date, fontsize=<span class="number">16</span>)</span><br><span class="line">        plt.show()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        draw_y = []</span><br><span class="line">        <span class="keyword">if</span> drawtype == <span class="string">&#x27;PDF&#x27;</span>:</span><br><span class="line">            count = Counter(drawdata)  <span class="comment"># 计算出现频次</span></span><br><span class="line">            x = <span class="built_in">sorted</span>(count.keys())</span><br><span class="line">            y = [count[key] <span class="keyword">for</span> key <span class="keyword">in</span> x]</span><br><span class="line">            draw_y = y</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">else</span>: </span><br><span class="line">            count = Counter(drawdata)  <span class="comment"># 计算出现频次</span></span><br><span class="line">            x = <span class="built_in">sorted</span>(count.keys())</span><br><span class="line">            y = [count[key] <span class="keyword">for</span> key <span class="keyword">in</span> x]</span><br><span class="line">            y_cu = []  <span class="comment"># 累积</span></span><br><span class="line">            y_ccu = []  <span class="comment"># 互补累积</span></span><br><span class="line">            cu_pro = <span class="number">0</span></span><br><span class="line">            ccu_pro = <span class="number">1</span></span><br><span class="line">            total = <span class="built_in">sum</span>(y) </span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(y)):</span><br><span class="line">                cu_pro += y[i]/total</span><br><span class="line">                y_cu.append(cu_pro) </span><br><span class="line">                </span><br><span class="line">                y_ccu.append(ccu_pro)</span><br><span class="line">                ccu_pro -= y[i]/total     </span><br><span class="line">            <span class="keyword">if</span> drawtype == <span class="string">&#x27;CCDF&#x27;</span>:  </span><br><span class="line">                draw_y = y_ccu</span><br><span class="line">            <span class="keyword">elif</span> drawtype == <span class="string">&#x27;CDF&#x27;</span>:</span><br><span class="line">                draw_y = y_cu</span><br><span class="line">            </span><br><span class="line">        plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">        plt.scatter(x, draw_y, c=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">        plt.title(date, fontsize=<span class="number">16</span>)</span><br><span class="line">        plt.xscale(<span class="string">&#x27;log&#x27;</span>, base=<span class="number">10</span>)  <span class="comment"># 默认底数为10,也可以设置base=np.e以e为底数</span></span><br><span class="line">        plt.yscale(<span class="string">&#x27;log&#x27;</span>, base=<span class="number">10</span>)</span><br><span class="line">        plt.xlabel(xlabel, fontsize=<span class="number">14</span>)</span><br><span class="line">        plt.ylabel(drawtype, fontsize=<span class="number">14</span>)</span><br><span class="line">        <span class="comment"># plt.ylim(bottom=1e-6)  # 设置y轴下限</span></span><br><span class="line">        plt.show()</span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure><h2 id="三、计算"><a href="#三、计算" class="headerlink" title="三、计算"></a>三、计算</h2><h3 id="1、计算距离"><a href="#1、计算距离" class="headerlink" title="1、计算距离"></a>1、计算距离</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">calcDistance</span>(<span class="params">Lat_A, Lng_A, Lat_B, Lng_B</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    input Lat_A 纬度A</span></span><br><span class="line"><span class="string">    input Lng_A 经度A</span></span><br><span class="line"><span class="string">    input Lat_B 纬度B</span></span><br><span class="line"><span class="string">    input Lng_B 经度B</span></span><br><span class="line"><span class="string">    output distance m</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    Lat_A=<span class="built_in">round</span>(Lat_A,<span class="number">6</span>)</span><br><span class="line">    Lat_B=<span class="built_in">round</span>(Lat_B,<span class="number">6</span>)</span><br><span class="line">    Lng_A=<span class="built_in">round</span>(Lng_A,<span class="number">6</span>)</span><br><span class="line">    Lng_B=<span class="built_in">round</span>(Lng_B,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> Lat_A==Lat_B <span class="keyword">and</span> Lng_A==Lng_B:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    ra = <span class="number">6378.140</span>  <span class="comment"># 赤道半径 (km)</span></span><br><span class="line">    rb = <span class="number">6356.755</span>  <span class="comment"># 极半径 (km)</span></span><br><span class="line">    flatten = (ra - rb) / ra  <span class="comment"># 地球扁率</span></span><br><span class="line">    rad_lat_A = radians(Lat_A)</span><br><span class="line">    rad_lng_A = radians(Lng_A)</span><br><span class="line">    rad_lat_B = radians(Lat_B)</span><br><span class="line">    rad_lng_B = radians(Lng_B)</span><br><span class="line">    pA = atan(rb / ra * tan(rad_lat_A))</span><br><span class="line">    pB = atan(rb / ra * tan(rad_lat_B))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        xx = acos(sin(pA) * sin(pB) + cos(pA) * cos(pB) * cos(rad_lng_A - rad_lng_B))</span><br><span class="line">        c1 = (sin(xx) - xx) * (sin(pA) + sin(pB)) ** <span class="number">2</span> / cos(xx / <span class="number">2</span>) ** <span class="number">2</span></span><br><span class="line">        c2 = (sin(xx) + xx) * (sin(pA) - sin(pB)) ** <span class="number">2</span> / sin(xx / <span class="number">2</span>) ** <span class="number">2</span></span><br><span class="line">        dr = flatten / <span class="number">8</span> * (c1 - c2)</span><br><span class="line">        distance = ra * (xx + dr)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        distance = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> distance * <span class="number">1000</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 科研技能 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>画图</title>
      <link href="posts/45331dc3.html"/>
      <url>posts/45331dc3.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、画图基本代码"><a href="#一、画图基本代码" class="headerlink" title="一、画图基本代码"></a>一、画图基本代码</h1><h2 id="1、引入库"><a href="#1、引入库" class="headerlink" title="1、引入库"></a>1、引入库</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">plt.rcParams[<span class="string">&#x27;figure.dpi&#x27;</span>] = <span class="number">300</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Microsoft YaHei&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="2、直方分布图"><a href="#2、直方分布图" class="headerlink" title="2、直方分布图"></a>2、直方分布图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">data = [np.log10(a) <span class="keyword">for</span> a <span class="keyword">in</span> list_conformity_real]  <span class="comment"># 对数直方图，以10为底，np.log(a)默认以e为底</span></span><br><span class="line">min_val, max_val = np.<span class="built_in">min</span>(data), np.<span class="built_in">max</span>(data)</span><br><span class="line">bins1 = np.linspace(min_val, max_val, num=<span class="number">30</span>)</span><br><span class="line">sns.histplot(data, bins=bins1, color=<span class="string">&quot;red&quot;</span>, alpha=<span class="number">0.7</span>, label=<span class="string">&#x27;real_data&#x27;</span>)  <span class="comment"># stat=&#x27;count&#x27;默认是频数 , stat=&quot;density&quot;画概率密度</span></span><br><span class="line"><span class="comment"># plt.hist(l1, bins=30, range=(min_val, max_val), color=&#x27;red&#x27;, edgecolor=&#x27;black&#x27;, alpha=0.7)</span></span><br><span class="line"><span class="comment"># sns是升级的直方图，plt.hist是基础直方图</span></span><br></pre></td></tr></table></figure><h2 id="3、互补累计分布图"><a href="#3、互补累计分布图" class="headerlink" title="3、互补累计分布图"></a>3、互补累计分布图</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">count = Counter(list_conformity_real)  <span class="comment"># 计算出现频次</span></span><br><span class="line">x = <span class="built_in">sorted</span>(count.keys())</span><br><span class="line">y = [count[key] <span class="keyword">for</span> key <span class="keyword">in</span> x]</span><br><span class="line">y_cu = []  <span class="comment"># 互补累积</span></span><br><span class="line">pro = <span class="number">1</span></span><br><span class="line">total = <span class="built_in">sum</span>(y)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(y)):</span><br><span class="line">    y_cu.append(pro)        </span><br><span class="line">    pro -= y[i]/total</span><br><span class="line">plt.scatter(x, y_cu, c=<span class="string">&#x27;red&#x27;</span>, label=<span class="string">&#x27;真实数据&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;从众性互补累积分布图&#x27;</span>, fontsize=<span class="number">16</span>)</span><br><span class="line">plt.xscale(<span class="string">&#x27;log&#x27;</span>, base=<span class="number">10</span>)  <span class="comment"># 默认底数为10,也可以设置base=np.e以e为底数</span></span><br><span class="line">plt.yscale(<span class="string">&#x27;log&#x27;</span>, base=<span class="number">10</span>)  </span><br><span class="line">plt.xlabel(<span class="string">&#x27;从众性&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;概率&#x27;</span>, fontsize=<span class="number">14</span>)</span><br><span class="line"><span class="comment"># plt.ylim(bottom=1e-6)  # 设置y轴下限</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="4、拟合正态分布并检验"><a href="#4、拟合正态分布并检验" class="headerlink" title="4、拟合正态分布并检验"></a>4、拟合正态分布并检验</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> norm</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> shapiro, kstest</span><br><span class="line"><span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm</span><br><span class="line"></span><br><span class="line">mean, std = norm.fit(data)  <span class="comment"># 正态分布拟合</span></span><br><span class="line">xn = np.linspace(<span class="built_in">min</span>(data), <span class="built_in">max</span>(data), <span class="number">1000</span>)</span><br><span class="line">pn = norm.pdf(xn, mean, std)</span><br><span class="line"><span class="comment"># plt.plot(xn, pn, &#x27;b-&#x27;, label=&#x27;Normal fit&#x27;)  # 概率密度拟合</span></span><br><span class="line"></span><br><span class="line">bin_width = bins1[<span class="number">1</span>] - bins1[<span class="number">0</span>]  <span class="comment"># 计算每个bin的宽度</span></span><br><span class="line">pn_scaled = pn * <span class="built_in">len</span>(data) * bin_width  <span class="comment"># 概率密度转为频数</span></span><br><span class="line">plt.plot(xn, pn_scaled, <span class="string">&#x27;b-&#x27;</span>, label=<span class="string">&#x27;Normal fit&#x27;</span>)  <span class="comment"># 频数拟合直方分布</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以用 Shapiro-Wilk 检验或 Kolmogorov-Smirnov 检验判断正态性：</span></span><br><span class="line">stat, p_value = shapiro(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Shapiro-Wilk test p-value:&#x27;</span>, p_value)</span><br><span class="line"><span class="comment"># 如果 p 值大于 0.05，则不能拒绝正态分布假设，说明对数数据近似正态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 statsmodels 画 Q-Q 图，直观判断数据与正态分布的吻合度：</span></span><br><span class="line">sm.qqplot(np.array(data), line=<span class="string">&#x27;45&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment"># 点大致沿对角线分布说明近似正态</span></span><br></pre></td></tr></table></figure><h1 id="二、ArcGIS操作"><a href="#二、ArcGIS操作" class="headerlink" title="二、ArcGIS操作"></a>二、ArcGIS操作</h1><h2 id="1、获得城市矢量底图的步骤"><a href="#1、获得城市矢量底图的步骤" class="headerlink" title="1、获得城市矢量底图的步骤"></a>1、获得城市矢量底图的步骤</h2><p>打开arcmap-添加数据-AddBasemap-选择一个合适的风格，然后选定自己想要的地区(查找-输入地区名称)-文件-导出地图-emp/emf</p><h1 id="三、画图示例图"><a href="#三、画图示例图" class="headerlink" title="三、画图示例图"></a>三、画图示例图</h1><h2 id="1、折线图"><a href="#1、折线图" class="headerlink" title="1、折线图"></a><strong>1、折线图</strong></h2><ul><li><a href="https://www.sciencedirect.com/science/article/pii/S026427512500705X?dgcid=rss_sd_all#f0040">https://www.sciencedirect.com/science/article/pii/S026427512500705X?dgcid=rss_sd_all#f0040</a></li></ul><img src="/posts/45331dc3.htm/45331dc3/image-20250917212139733.png" class title="image-20250917212139733"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212148077.png" class title="image-20250917212148077"><h2 id="2、柱状图"><a href="#2、柱状图" class="headerlink" title="2、柱状图"></a>2、柱状图</h2><h2 id="3、饼图"><a href="#3、饼图" class="headerlink" title="3、饼图"></a>3、饼图</h2><h2 id="4、散点图"><a href="#4、散点图" class="headerlink" title="4、散点图"></a>4、散点图</h2><ul><li><a href="https://echarts.apache.org/examples/zh/editor.html?c=scatter-jitter">https://echarts.apache.org/examples/zh/editor.html?c=scatter-jitter</a></li></ul><div style="width: 25%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212221636.png" class title="image-20250917212221636"></div><h2 id="5、地图"><a href="#5、地图" class="headerlink" title="5、地图"></a>5、地图</h2><h2 id="6、雷达图"><a href="#6、雷达图" class="headerlink" title="6、雷达图"></a>6、雷达图</h2><h2 id="7、箱线图"><a href="#7、箱线图" class="headerlink" title="7、箱线图"></a>7、箱线图</h2><h2 id="8、热力图"><a href="#8、热力图" class="headerlink" title="8、热力图"></a>8、热力图</h2><ul><li><a href="https://www.sciencedirect.com/science/article/pii/S026427512500705X?dgcid=rss_sd_all#f0040">https://www.sciencedirect.com/science/article/pii/S026427512500705X?dgcid=rss_sd_all#f0040</a></li></ul><img src="/posts/45331dc3.htm/45331dc3/image-20250917212303984.png" class title="image-20250917212303984"><ul><li><a href="https://www.sciencedirect.com/science/article/pii/S0264275125007358?dgcid=rss_sd_all#f0045">www.sciencedirect.com</a></li></ul><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212325070.png" class title="image-20250917212325070"></div><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212357039.png" class title="image-20250917212357039"></div><img src="/posts/45331dc3.htm/45331dc3/image-20250917212412592.png" class title="image-20250917212412592"><ul><li><a href="https://www.sciencedirect.com/science/article/pii/S0198971525000237?via%3Dihub#f0020">https://www.sciencedirect.com/science/article/pii/S0198971525000237?via%3Dihub#f0020</a></li></ul><div style="width: 30%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20251005213909810.png" class title="image-20251005213909810"></div><h2 id="9、关系图"><a href="#9、关系图" class="headerlink" title="9、关系图"></a>9、关系图</h2><ul><li><a href="https://echarts.apache.org/examples/zh/editor.html?c=graph-circular-layout">https://echarts.apache.org/examples/zh/editor.html?c=graph-circular-layout</a></li></ul><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212434103.png" class title="image-20250917212434103"></div><h2 id="10、桑基图"><a href="#10、桑基图" class="headerlink" title="10、桑基图"></a>10、桑基图</h2><ul><li><a href="https://echarts.apache.org/examples/zh/editor.html?c=sankey-energy">https://echarts.apache.org/examples/zh/editor.html?c=sankey-energy</a></li></ul><div style="width: 33%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/45331dc3.htm/45331dc3/image-20250917212452072.png" class title="image-20250917212452072"></div>]]></content>
      
      
      <categories>
          
          <category> 科研技能 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>概率分布检验</title>
      <link href="posts/fc9d03e3.html"/>
      <url>posts/fc9d03e3.html</url>
      
        <content type="html"><![CDATA[<h1 id="1、分布是概率密度函数还是互补累积分布"><a href="#1、分布是概率密度函数还是互补累积分布" class="headerlink" title="1、分布是概率密度函数还是互补累积分布"></a>1、分布是概率密度函数还是互补累积分布</h1><img src="/posts/fc9d03e3.htm/fc9d03e3/image-20250917210856428.png" class title="image-20250917210856428"><img src="/posts/fc9d03e3.htm/fc9d03e3/image-20250917210901094.png" class title="image-20250917210901094"><h1 id="2、如何辨别幂律分布还是指数分布"><a href="#2、如何辨别幂律分布还是指数分布" class="headerlink" title="2、如何辨别幂律分布还是指数分布"></a>2、如何辨别幂律分布还是指数分布</h1><img src="/posts/fc9d03e3.htm/fc9d03e3/image-20250917210931444.png" class title="image-20250917210931444"><img src="/posts/fc9d03e3.htm/fc9d03e3/image-20250917210936073.png" class title="image-20250917210936073"><img src="/posts/fc9d03e3.htm/fc9d03e3/image-20250917210945154.png" class title="image-20250917210945154"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># 生成幂律分布数据</span></span><br><span class="line">power_data = np.random.pareto(<span class="number">2</span>, <span class="number">1000</span>) + <span class="number">1</span>  <span class="comment"># α=2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成指数分布数据</span></span><br><span class="line">exp_data = np.random.exponential(scale=<span class="number">1</span>, size=<span class="number">1000</span>)  <span class="comment"># λ=1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 画双对数观察</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_loglog</span>(<span class="params">data, title</span>):  </span><br><span class="line">    counts, bins = np.histogram(data, bins=<span class="number">50</span>)</span><br><span class="line">    pdf = counts / (<span class="built_in">sum</span>(counts) * np.diff(bins))  <span class="comment"># 计算概率密度</span></span><br><span class="line">    plt.loglog(bins[:-<span class="number">1</span>], pdf, <span class="string">&#x27;o&#x27;</span>)  <span class="comment"># 双对数图</span></span><br><span class="line">    plt.title(title)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Value&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Probability Density&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>, <span class="number">5</span>))</span><br><span class="line">plt.subplot(<span class="number">121</span>)</span><br><span class="line">plot_loglog(power_data, <span class="string">&#x27;Power Law Distribution&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plot_loglog(exp_data, <span class="string">&#x27;Exponential Distribution&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> powerlaw <span class="keyword">import</span> Fit</span><br><span class="line"><span class="comment"># 检验幂律分布</span></span><br><span class="line">fit = Fit(power_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Estimated alpha: <span class="subst">&#123;fit.alpha&#125;</span>&quot;</span>)  <span class="comment"># 是估计的幂律指数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Log-likelihood: <span class="subst">&#123;fit.power_law.loglikelihood&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制拟合结果</span></span><br><span class="line">fig = fit.plot_pdf(color=<span class="string">&#x27;b&#x27;</span>, label=<span class="string">&#x27;Empirical Data&#x27;</span>)</span><br><span class="line">fit.power_law.plot_pdf(color=<span class="string">&#x27;r&#x27;</span>, linestyle=<span class="string">&#x27;--&#x27;</span>, label=<span class="string">&#x27;Power Law Fit&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> expon</span><br><span class="line"><span class="comment"># 拟合指数分布参数</span></span><br><span class="line">lambda_hat = <span class="number">1</span> / np.mean(exp_data)  <span class="comment"># λ的估计值</span></span><br><span class="line">ks_stat, p_value = expon.fit(exp_data)  <span class="comment"># 如果P值较大（如 &gt;0.05），则不能拒绝数据符合指数分布的假设。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Estimated lambda: <span class="subst">&#123;lambda_hat&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;KS Statistic: <span class="subst">&#123;ks_stat&#125;</span>, P-value: <span class="subst">&#123;p_value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制经验数据与拟合结果</span></span><br><span class="line">counts, bins = np.histogram(exp_data, bins=<span class="number">50</span>, density=<span class="literal">True</span>)</span><br><span class="line">plt.hist(exp_data, bins=<span class="number">50</span>, density=<span class="literal">True</span>, alpha=<span class="number">0.5</span>, label=<span class="string">&#x27;Empirical Data&#x27;</span>)</span><br><span class="line">plt.plot(bins, expon.pdf(bins, scale=<span class="number">1</span>/lambda_hat), <span class="string">&#x27;r--&#x27;</span>, label=<span class="string">&#x27;Exponential Fit&#x27;</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Value&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Probability Density&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Exponential Fit&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 评估两种你和效果</span></span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> expon</span><br><span class="line"><span class="comment"># 幂律拟合</span></span><br><span class="line">fit_power = Fit(power_data)</span><br><span class="line">log_likelihood_power = fit_power.power_law.loglikelihood</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指数拟合</span></span><br><span class="line">lambda_hat = <span class="number">1</span> / np.mean(exp_data)</span><br><span class="line">log_likelihood_exp = <span class="built_in">sum</span>(np.log(expon.pdf(exp_data, scale=lambda_hat)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 比较似然比</span></span><br><span class="line">likelihood_ratio = log_likelihood_power - log_likelihood_exp</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Likelihood Ratio: <span class="subst">&#123;likelihood_ratio&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="3、特殊的幂律分布"><a href="#3、特殊的幂律分布" class="headerlink" title="3、特殊的幂律分布"></a>3、特殊的幂律分布</h1><p><a href="https://www.jianshu.com/p/b7e06c4839b2">https://www.jianshu.com/p/b7e06c4839b2</a></p><p>截断幂律、尺度不变性、胖尾 长尾</p>]]></content>
      
      
      <categories>
          
          <category> 科研方法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>识别热点/中心的方法</title>
      <link href="posts/9e1a0ec0.html"/>
      <url>posts/9e1a0ec0.html</url>
      
        <content type="html"><![CDATA[<h1 id="1、pagerank"><a href="#1、pagerank" class="headerlink" title="1、pagerank"></a>1、pagerank</h1><img src="/posts/9e1a0ec0.htm/9e1a0ec0/image-20251011211828307.png" class title="image-20251011211828307">]]></content>
      
      
      <categories>
          
          <category> 科研方法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>聚类</title>
      <link href="posts/186e9376.html"/>
      <url>posts/186e9376.html</url>
      
        <content type="html"><![CDATA[<h1 id="一、聚类算法"><a href="#一、聚类算法" class="headerlink" title="一、聚类算法"></a>一、聚类算法</h1><h2 id="（一）聚合聚类"><a href="#（一）聚合聚类" class="headerlink" title="（一）聚合聚类"></a>（一）聚合聚类</h2><p>聚合聚类(Agglomerative Clustering)是一种自底向上的聚类方法。它从数据点（或称为观测值）的集合开始，然后将这些点视为初始的簇。接着，算法逐步合并这些簇，直到满足某个停止条件，如达到预设的簇数量或达到某个特定的簇大小。在这个过程中，算法通过计算簇之间的距离来确定哪些簇应该被合并。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251015225342314.png" class title="image-20251015225342314"></div><h3 id="1、步骤"><a href="#1、步骤" class="headerlink" title="1、步骤"></a>1、步骤</h3><ol><li>初始化：每个数据点被视为一个簇。</li><li>合并：根据某种距离度量（如欧氏距离、余弦相似度等），将最近的簇合并为一个新的簇。</li><li>重复：重复步骤2，直到满足停止条件。</li><li>输出：返回合并后的簇结果。</li></ol><h3 id="2、优缺点"><a href="#2、优缺点" class="headerlink" title="2、优缺点"></a>2、优缺点</h3><ul><li>层次结构：能够生成数据的层次结构或嵌套聚类，这在某些应用中非常有用。</li><li>可解释性：由于是自底向上的方法，可以更容易地解释和可视化结果。</li><li>处理大型数据集：由于不需要一次性处理所有数据，因此可以有效地处理大型数据集。</li></ul><ul><li>时间复杂度：随着数据集规模的增加，时间复杂度可能会迅速增加。</li><li>不平衡簇：可能产生不平衡的簇，即某些簇包含大量数据点，而其他簇则包含很少的数据点。</li><li>初始化敏感：对初始化的选择敏感，可能会导致不同的聚类结果。</li></ul><h3 id="3、使用场景"><a href="#3、使用场景" class="headerlink" title="3、使用场景"></a>3、使用场景</h3><ul><li>层次聚类：适用于需要层次结构的聚类任务，如市场细分或社交网络分析。</li><li>异常检测：可以通过观察聚类结果中的离群点来检测异常值。</li><li>数据预处理：在某些机器学习任务中，可以使用聚合聚类作为预处理步骤来简化数据或提取特征。</li></ul><h3 id="4、代码"><a href="#4、代码" class="headerlink" title="4、代码"></a>4、代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> AgglomerativeClustering <span class="comment"># 导入AgglomerativeClustering类 </span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="comment"># 导入datasets用于生成样本数据 </span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler <span class="comment"># 导入StandardScaler进行标准化处理 </span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment"># 导入绘图库</span></span><br><span class="line">iris = datasets.load_iris() <span class="comment"># 生成样本数据 </span></span><br><span class="line">X = iris[<span class="string">&quot;data&quot;</span>]  <span class="comment"># 使用Iris数据集作为示例 # 提取特征矩阵</span></span><br><span class="line">scaler = StandardScaler()  <span class="comment"># 数据标准化 </span></span><br><span class="line">X = scaler.fit_transform(X) <span class="comment"># 对数据进行标准化处理 # 设置聚类数 </span></span><br><span class="line">n_clusters = <span class="number">2</span> <span class="comment"># 根据需求设置聚类数 </span></span><br><span class="line">clustering = AgglomerativeClustering(n_clusters=n_clusters) <span class="comment"># 创建AgglomerativeClustering对象并拟合数据 </span></span><br><span class="line">labels = clustering.fit_predict(X) <span class="comment"># 获取每个样本点的聚类标签 </span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=labels, cmap=<span class="string">&#x27;viridis&#x27;</span>) <span class="comment"># 使用viridis色彩映射绘制结果图 </span></span><br><span class="line">plt.show() <span class="comment"># 显示结果图 ```</span></span><br></pre></td></tr></table></figure><h2 id="（二）DBSCAN-聚类"><a href="#（二）DBSCAN-聚类" class="headerlink" title="（二）DBSCAN 聚类"></a>（二）DBSCAN 聚类</h2><p>Density-Based Spatial Clustering of Applications with Noise是一种基于密度的聚类方法。它的主要思想是：一个簇是由一个密度足够大的区域所组成的，并且这个区域是核心对象所连接的稠密区域。DBSCAN将簇定义为具有足够高密度的区域，并且通过噪声点将簇与相邻的密度区域分开。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251015230101612.png" class title="image-20251015230101612"></div><h3 id="1、步骤-1"><a href="#1、步骤-1" class="headerlink" title="1、步骤"></a>1、步骤</h3><ol><li>初始化：选择一个未被访问过的点作为当前点。</li><li>密度估计：如果当前点的ε-邻域内的点数量大于等于MinPts，则当前点为核心点。否则，当前点为噪声点。</li><li>扩展簇：从核心点开始，将其标记为簇的一部分，并递归地访问其ε-邻域内的所有点。如果某个点的ε-邻域内的点数量大于等于MinPts，则该点为核心点，并将其标记为已访问。</li><li>重复：重复步骤2和3，直到所有点都被访问。</li><li>输出：返回所有簇的结果。</li></ol><h3 id="2、优缺点-1"><a href="#2、优缺点-1" class="headerlink" title="2、优缺点"></a>2、优缺点</h3><ul><li>密度敏感：能够发现任何形状的簇，并处理异常值和噪声。</li><li>可扩展性：对于大规模数据集，DBSCAN具有较好的可扩展性。</li><li>无需预设簇数量：与其他基于距离的聚类方法相比，DBSCAN不需要预设簇的数量。</li></ul><ul><li>参数敏感：对参数ε和MinPts的选择较为敏感，不同的参数值可能会导致不同的聚类结果。</li><li>计算量大：对于高维数据，DBSCAN的计算量可能会很大。</li><li>对噪声和异常值敏感：如果数据集中存在大量噪声或异常值，可能会影响聚类的效果。</li></ul><h3 id="3、使用场景-1"><a href="#3、使用场景-1" class="headerlink" title="3、使用场景"></a>3、使用场景</h3><ul><li>异常检测：由于DBSCAN对噪声和异常值敏感，因此可以用于异常检测任务。</li><li>任意形状的簇：对于需要发现任意形状的簇的应用，如社交网络分析、图像分割等，DBSCAN是一个很好的选择。</li><li>数据预处理：在某些机器学习任务中，可以使用DBSCAN对数据进行预处理，以便进一步的分析或分类。</li></ul><h3 id="4、代码-1"><a href="#4、代码-1" class="headerlink" title="4、代码"></a>4、代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> DBSCAN <span class="comment"># 导入DBSCAN聚类算法 </span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="comment"># 导入datasets用于生成样本数据 </span></span><br><span class="line">importmatplotlib.pyplotasplt <span class="comment">#导入绘图库</span></span><br><span class="line">iris = datasets.load_iris() <span class="comment"># 使用Iris数据集作为示例 </span></span><br><span class="line">X = iris[<span class="string">&quot;data&quot;</span>] <span class="comment"># 提取特征矩阵  </span></span><br><span class="line">dbscan = DBSCAN(eps=<span class="number">0.3</span>, min_samples=<span class="number">5</span>) <span class="comment"># 创建DBSCAN对象并拟合数据 eps是邻域半径，min_samples是形成核心对象的最小点数 </span></span><br><span class="line">labels = dbscan.fit_predict(X) <span class="comment"># 获取每个样本点的聚类标签 # 可视化结果 </span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=labels, cmap=<span class="string">&#x27;viridis&#x27;</span>) <span class="comment"># 使用viridis色彩映射绘制结果图 </span></span><br><span class="line">plt.show() <span class="comment"># 显示结果图 ```</span></span><br></pre></td></tr></table></figure><h2 id="三）OPTICS聚类"><a href="#三）OPTICS聚类" class="headerlink" title="(三）OPTICS聚类"></a>(三）OPTICS聚类</h2><p>OPTICS（Ordering Points To Identify the Clustering Structure）是一种基于密度的聚类算法，它是为了优化DBSCAN算法而提出的。与DBSCAN类似，OPTICS算法的核心思想是通过分析样本点的密度分布来识别出数据集中的聚类结构。然而，OPTICS算法在处理过程中不直接产生聚类结果，而是生成一个有序的样本点列表，这个列表可以用来构建一个决策图，进而为DBSCAN算法选择合适的邻域半径参数。</p><p>OPTICS算法引入了两个新的距离概念，即<strong>核心距离</strong>和<strong>可达距离</strong>：<br><strong>核心距离</strong>：对于一个给定的核心对象X，使得X成为核心对象的最小邻域距离 r 就是X的核心距离。这句话乍一看有点绕，其实仔细读两遍就明白了，假如在DBSCAN中我们定义 eps = 1.2 和  min_samples=5，X在eps = 1.2的邻域内有8个样本点，则X是核心对象，但是我们发现距离X最近的第5个点和X的距离是0.8，那么核心对象 X 的核心距离就是 0.8，显然每个核心对象的核心距离并不都是相同的。参考图1，注意在计算 min_samples 的时候，一般也包括样本点自身，所以只需在P点eps邻域内找到7个点，那么P点就是核心点。<br><strong>可达距离</strong>：如果X是核心对象，则对象 Y 到对象 X 的可达距离就是Y到X的欧氏距离和X的核心距离的最大值，如果X不是核心对象，则Y和X之间的可达距离就没有意义（不存在可达距离），显然，数据集中有多少核心对象，那么 Y 就有多少个可达距离。在下文介绍 API 的时候，我们会介绍在OPTICS中，一般默认设置 eps 为无穷大，即只要数据集的样本数不少于 min_samples，那么任意一个样本点都是核心对象，即都有核心距离，且任意两个对象之间都存在可达距离。</p><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251017112141817.png" class title="image-20251017112141817"></div><h3 id="1、步骤-2"><a href="#1、步骤-2" class="headerlink" title="1、步骤"></a>1、步骤</h3><ol><li><p>已知数据集 D，创建两个队列，有序队列O和结果队列R（有序队列用来存储核心对象及其该核心对象的密度直达对象，并按可达距离升序排列；结果队列用来存储样本点的输出次序。可以把有序队列里面放的理解为待处理的数据，而结果队列里放的是已经处理完的数据）。</p></li><li><p>如果D中所有点都处理完毕或者不存在核心点，则算法结束。否则，选择一个未处理（即不在结果队列R中）且为核心对象的样本点 p，首先将 p 放入结果队列R中，并从D中删除 p。然后找到 D 中 p 的所有密度直达样本点 x，计算 x 到 p 的可达距离，如果 x 不在有序队列 O 中，则将 x 以及可达距离放入 O 中，若 x 在 O 中，则如果 x 新的可达距离更小，则更新 x 的可达距离，最后对 O 中数据按可达距离从小到大重新排序。</p></li><li><p>如果有序队列 O 为空，则回到步骤2，否则取出 O 中第一个样本点 y（即可达距离最小的样本点），放入 R 中，并从 D 和 O 中删除 y。如果 y 不是核心对象，则重复步骤 3（即找 O 中剩余数据可达距离最小的样本点）；如果 y 是核心对象，则找到 y 在 D 中的所有密度直达样本点，并计算到 y 的可达距离，然后按照步骤2将所有 y 的密度直达样本点更新到 O 中。</p></li><li><p>重复步骤2、3，直到算法结束。最终可以得到一个有序的输出结果，以及相应的可达距离。</p></li><li><p>通过上述流程，OPTICS算法最终会得到一个有序的输出结果和相应的可达距离。这个有序的结果可以用来绘制一个可达距离图，通过这个图可以观察到数据的聚类结构。</p><img src="/posts/186e9376.htm/186e9376/image-20251017124214008.png" class title="image-20251017124214008"></li></ol><h3 id="2、优缺点-2"><a href="#2、优缺点-2" class="headerlink" title="2、优缺点"></a>2、优缺点</h3><ul><li>无需预设聚类簇数，可发现不同密度和形状的簇。</li><li>对参数不敏感，鲁棒性强。</li><li>能自然发现噪声点和孤立点。</li></ul><ul><li>计算复杂度较高，训练大规模数据集时间较长。</li><li>聚类结构需结合可达距离图分析，理解与参数调整较为复杂。</li></ul><h3 id="3、使用场景-2"><a href="#3、使用场景-2" class="headerlink" title="3、使用场景"></a>3、使用场景</h3><ul><li>复杂、有噪声、密度不均的数据（如时序数据、地理数据、图像分割）。</li><li>无法预先确定簇数时的实际聚类分析。</li></ul><h3 id="4、代码-2"><a href="#4、代码-2" class="headerlink" title="4、代码"></a>4、代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> OPTICS</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 定义样本数据集</span></span><br><span class="line">X = np.array([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">5</span>], [<span class="number">8</span>, <span class="number">7</span>], [<span class="number">3</span>, <span class="number">6</span>], [<span class="number">8</span>, <span class="number">8</span>], [<span class="number">7</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line"><span class="comment"># 执行OPTICS算法</span></span><br><span class="line">clustering = OPTICS(min_samples=<span class="number">2</span>).fit(X)</span><br><span class="line"><span class="comment"># 输出核心距离、样本点的排序、可达距离和聚类标签</span></span><br><span class="line"><span class="built_in">print</span>(clustering.core_distances_)</span><br><span class="line"><span class="built_in">print</span>(clustering.ordering_)</span><br><span class="line"><span class="built_in">print</span>(clustering.reachability_)</span><br><span class="line"><span class="built_in">print</span>(clustering.labels_)</span><br></pre></td></tr></table></figure><h2 id="四）K-Means-聚类模型"><a href="#四）K-Means-聚类模型" class="headerlink" title="(四）K-Means 聚类模型"></a>(四）<strong>K-Means 聚类模型</strong></h2><p>K-Means聚类是一种基于距离的聚类方法，通过最小化每个数据点到其所属簇中心点的距离之和，将数据点划分为K个簇。算法的主要思想是：每个簇有一个中心点，数据点被分配到最近的中心点所在的簇中。通过迭代更新每个簇的中心点，使得所有数据点到其所属簇的中心点的距离之和最小</p><img src="/posts/186e9376.htm/186e9376/image-20251015230458282.png" class title="image-20251015230458282"><h3 id="1、步骤-3"><a href="#1、步骤-3" class="headerlink" title="1、步骤"></a>1、步骤</h3><ol><li>初始化：随机选择K个中心点。</li><li>分配数据点：将每个数据点分配到最近的中心点所在的簇中。</li><li>更新中心点：重新计算每个簇的中心点，即簇中所有数据点的均值。</li><li>重复：重复步骤2和3，直到中心点不再发生显著变化或达到预设的迭代次数。</li><li>输出：返回K个簇的结果</li></ol><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251015230532638.png" class title="image-20251015230532638"></div><h3 id="2、优点"><a href="#2、优点" class="headerlink" title="2、优点"></a>2、优点</h3><ul><li>简单易理解：K-Means聚类模型简单直观，易于理解。</li><li>可扩展性：对于大规模数据集，K-Means算法具有较好的可扩展性。</li><li>无监督学习：K-Means是一种无监督学习方法，适用于未标记的数据集。</li><li>对异常值不敏感：由于是基于距离的聚类方法，异常值对聚类结果的影响较小。</li></ul><ul><li>参数敏感：对初始选择的K值和初始中心点敏感，不同的初始参数可能导致不同的聚类结果。</li><li>易陷入局部最优解：可能陷入局部最优解，而非全局最优解。</li><li>形状限制：只能发现球形簇，对于非球形簇的形状可能无法准确识别。</li><li>计算量大：对于高维数据，计算量较大。</li></ul><h3 id="3、使用场景-3"><a href="#3、使用场景-3" class="headerlink" title="3、使用场景"></a>3、使用场景</h3><ul><li>异常检测：K-Means聚类可以用于异常检测，将异常值识别为与其它数据点距离较远的簇。</li><li>市场细分：在市场营销领域，可以使用K-Means聚类将客户划分为不同的细分市场。</li><li>图像分割：在图像处理中，可以使用K-Means聚类进行图像分割，将图像划分为多个区域或对象。</li><li>特征提取：通过K-Means聚类可以提取数据的内在结构特征，用于分类或预测任务。</li></ul><h3 id="4、代码-3"><a href="#4、代码-3" class="headerlink" title="4、代码"></a>4、代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans <span class="comment"># 导入K-Means聚类算法 </span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets <span class="comment"># 导入datasets用于生成样本数据 </span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment"># 导入绘图库 </span></span><br><span class="line">iris = datasets.load_iris() <span class="comment"># 使用Iris数据集作为示例 </span></span><br><span class="line">X = iris[<span class="string">&quot;data&quot;</span>] <span class="comment"># 提取特征矩阵 </span></span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">3</span>) <span class="comment"># 假设有3个簇 </span></span><br><span class="line">labels = kmeans.fit_predict(X) <span class="comment"># 获取每个样本点的聚类标签 </span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=labels, cmap=<span class="string">&#x27;viridis&#x27;</span>) <span class="comment"># 使用viridis色彩映射绘制结果图 </span></span><br><span class="line">plt.show() <span class="comment"># 显示结果图 ```</span></span><br></pre></td></tr></table></figure><h1 id="二、评价指标"><a href="#二、评价指标" class="headerlink" title="二、评价指标"></a>二、评价指标</h1><p>常用评估指标包括外部评价指标和内部评价指标。外部评价指标是在已知真实标签的情况下评估聚类结果的准确性，而内部评价指标则是在不知道真实标签的情况下评估聚类结果的质量。</p><h2 id="一）外部指标"><a href="#一）外部指标" class="headerlink" title="(一）外部指标"></a>(一）外部指标</h2><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251017131122615.png" class title="image-20251017131122615"></div><h2 id="二）内部指标"><a href="#二）内部指标" class="headerlink" title="(二）内部指标"></a>(二）内部指标</h2><div style="width: 50%; max-width: 100%; display: block; margin: 0 auto;"><img src="/posts/186e9376.htm/186e9376/image-20251017131242527.png" class title="image-20251017131242527"></div><p>.jpg)</p>]]></content>
      
      
      <categories>
          
          <category> 科研方法 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexo+github搭建博客</title>
      <link href="posts/1bda8925.html"/>
      <url>posts/1bda8925.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about some steps to build a blog.           If you get any problems，you can ask me on the <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.    </p><h2 id="一-下载安装-Node-js和Git"><a href="#一-下载安装-Node-js和Git" class="headerlink" title="一.下载安装 Node.js和Git"></a>一.下载安装 Node.js和Git</h2><p>1.Node.js下载地址：<a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p><p>选大多数人用的版本就可，下载后安装到固定文件夹下，在这里我们安装到D:\博客\node</p><p>2.Git下载地址：<a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></p><p>根据自己电脑选择合适版本，下载安装到固定文件夹下，在这里我们安装到D:\博客\git</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在终端输入以下命令，检查node.js和git是否安装成功</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">git --version</span><br></pre></td></tr></table></figure><img src="/posts/1bda8925.htm/1bda8925/1.png" class><h2 id="二-搭建github博客"><a href="#二-搭建github博客" class="headerlink" title="二.搭建github博客"></a>二.搭建github博客</h2><p>1.首先在GitHub上创建一个账号，注册的邮箱一定要验证，否则不会成功；</p><img src="/posts/1bda8925.htm/1bda8925/2.png" class><p>2.创建仓库</p><img src="/posts/1bda8925.htm/1bda8925/3.png" class><img src="/posts/1bda8925.htm/1bda8925/4.png" class><p>仓库名字必须是：<code>username.github.io</code>，其中<code>username</code>是你的用户名；仓库创建成功不会立即生效，需要过一段时间，大概10-30分钟，或者更久；</p><img src="/posts/1bda8925.htm/1bda8925/5.png" class><p>显示创建成功，可以登录那个网址，就是下图这样的界面，也可在上图中修改主题</p><img src="/posts/1bda8925.htm/1bda8925/6.png" class><h2 id="三-配置SSH-key"><a href="#三-配置SSH-key" class="headerlink" title="三.配置SSH key"></a>三.配置SSH key</h2><p>1.随便找个位置右击出现git bash here，然后在里面输入口令</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;邮件地址&quot;</span></span><br></pre></td></tr></table></figure><p>2.然后连续3次回车，最终会生成一个文件在用户目录下，打开用户目录，找到<code>.ssh\id_rsa.pub</code>文件，记事本打开并复制里面的内容</p><img src="/posts/1bda8925.htm/1bda8925/7.png" class><p>3.打开你的github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key将刚复制的内容粘贴到key那里，title随便填，保存。</p><img src="/posts/1bda8925.htm/1bda8925/8.png" class><p>4.测试是否成功</p><p>随便找个位置右击出现git bash here，然后在里面输入口令</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com # 注意邮箱地址不用改</span><br></pre></td></tr></table></figure><p>如果提示<code>Are you sure you want to continue connecting (yes/no)?</code>，输入yes，然后会看到：</p><blockquote><p>Hi t1anyu! You’ve successfully authenticated, but GitHub does not provide shell access.</p></blockquote><p>看到这个信息说明SSH已配置成功！</p><p>此时你还需要配置：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&quot;t1anyu&quot;</span><span class="comment">// 你的github用户名，非昵称</span></span><br><span class="line">$ git config --global user.email  <span class="string">&quot;xxx@qq.com&quot;</span><span class="comment">// 填写你的github注册邮箱</span></span><br></pre></td></tr></table></figure><img src="/posts/1bda8925.htm/1bda8925/9.png" class><h2 id="四-安装配置-Hexo"><a href="#四-安装配置-Hexo" class="headerlink" title="四.安装配置 Hexo"></a>四.安装配置 Hexo</h2><p>前面已经安装了Git和Node.js，然后用npm，安装Hexo  找个D:\博客\hexo文件夹，在这个文件夹里面右键“git bash here”,打开git控制台</p><p>1.安装 npm install hexo-cli -g</p><p>2.初始化 hexo init</p><p>hexo会自动下载一些文件到这个目录，包括node_modules</p><img src="/posts/1bda8925.htm/1bda8925/10.png" class><p>4.启动服务 hexo s </p><p><code>hexo s</code>是开启本地预览服务，打开浏览器访问 <a href="http://localhost:4000/">http://localhost:4000</a> 即可看到内容，很多人会碰到浏览器一直在转圈但是就是加载不出来的问题，一般情况下是因为端口占用的缘故，因为4000这个端口太常见了，解决端口冲突问题请参考这篇文章：</p><p><a href="http://blog.liuxianan.com/windows-port-bind.html">http://blog.liuxianan.com/windows-port-bind.html</a></p><p>第一次初始化的时候hexo已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑，打开时就是这个样子：</p><img src="/posts/1bda8925.htm/1bda8925/11.png" class><p>5.上传到GitHub</p><p>配置hexo初始化目录（D:\博客\hexo）下的<code>_config.yml</code>中有关deploy的部分：</p><p>正确写法：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:t1anyu/t1anyu.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>然后在D:\博客\hexo下git bash here执行</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安装插件:npm install hexo-deployer-git --save</span><br><span class="line">清除缓存文件：hexo clean</span><br><span class="line">生成：hexo g</span><br><span class="line">部署：hexo d</span><br></pre></td></tr></table></figure><img src="/posts/1bda8925.htm/1bda8925/12.png" class><p><strong>成功后登录上面那个网址(<a href="https://t1anyu.github.io/)即可，博客就算是搭好了，下面的内容是一些美化功能以及写博客的要求">https://t1anyu.github.io/)即可，博客就算是搭好了，下面的内容是一些美化功能以及写博客的要求</a></strong></p><h2 id="五-更换主题"><a href="#五-更换主题" class="headerlink" title="五.更换主题"></a>五.更换主题</h2><p>下载对应的主题：可以去对应的github之类的网站</p><p>参考链接中的修改主题部分，或者随便搜一下hexo更换主题</p><p><a href="https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html#%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%A2%98">https://www.cnblogs.com/liuxianan/p/build-blog-website-by-hexo-github.html#%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%A2%98</a></p><h2 id="六-如何写文章"><a href="#六-如何写文章" class="headerlink" title="六.如何写文章"></a>六.如何写文章</h2><p>参考五中的写博客部分以及下面两个链接</p><p>1、<a href="https://blog.csdn.net/wsmrzx/article/details/81478945?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&amp;dist_request_id=1332049.8468.16193996158144771&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control">https://blog.csdn.net/wsmrzx/article/details/81478945?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&amp;dist_request_id=1332049.8468.16193996158144771&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control</a></p><p>这里面说的站点文件夹是D:\APP\blog\hexo，在这个文件夹下 git bash，输入以下代码，就会在 <code>source/_post</code> 文件夹下创建一个文件，命名为：<code>title.md</code>，便可以写文字了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new &quot;title&quot;</span><br></pre></td></tr></table></figure><p>写完之后还在站点文件夹下，输入如下命令部署</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure><p>先试用以下命令运行本地站点，在浏览器输入地址 <a href="http://localhost:4000/">http://localhost:4000/</a> 检查是否有问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>检查无误后，再用一下命令发布</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure><p>2、<a href="https://www.jianshu.com/p/191d1e21f7ed">https://www.jianshu.com/p/191d1e21f7ed</a></p>]]></content>
      
      
      <categories>
          
          <category> 奇奇怪怪的小tips </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>栈和队列（持续更新中）</title>
      <link href="posts/6a91c765.html"/>
      <url>posts/6a91c765.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about my organization of the data structure.   If you get any problems，you can ask me on <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.</p><h2 id="1-栈"><a href="#1-栈" class="headerlink" title="1 栈"></a>1 栈</h2><h3 id="1-1-基本概念："><a href="#1-1-基本概念：" class="headerlink" title="1.1 基本概念："></a>1.1 基本概念：</h3><p>栈是运算受限的线性表</p><p>限制：插入和删除操作只能在同一端进行</p><p>特点：后进先出(LIFO)或先进后出(FILO)</p><p>栈是仅在表尾进行插入、删除操作的线性表。表尾称为栈顶(Top)，表头称为栈底(Base)。</p><h3 id="1-2-数学内容"><a href="#1-2-数学内容" class="headerlink" title="1.2 数学内容"></a>1.2 数学内容</h3><p>若n个元素顺序入栈，则可能的出栈顺序为C(2n,n)/(n+1)=(2n)!/((n+1)!n!)</p><h3 id="1-3-顺序表示"><a href="#1-3-顺序表示" class="headerlink" title="1.3 顺序表示"></a>1.3 顺序表示</h3><p>==*加代码==</p><h3 id="1-4-链式表示"><a href="#1-4-链式表示" class="headerlink" title="1.4 链式表示"></a>1.4 链式表示</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试样例是PPT中十进制转八进制  1348</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ok 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> overflow 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> <span class="keyword">error</span> 0</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> status;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> selemtype;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">snode</span>&#123;</span></span><br><span class="line">selemtype date;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">snode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;lsnode,*slnode;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">InitStack</span><span class="params">(slnode *h)</span><span class="comment">//初始化 </span></span><br><span class="line">&#123;</span><br><span class="line">*h=(slnode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(lsnode));</span><br><span class="line"><span class="keyword">if</span>(!*h) <span class="built_in">exit</span>(overflow);</span><br><span class="line">(*h)-&gt;next=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> ok; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">Push</span><span class="params">(slnode *h,selemtype e)</span><span class="comment">//入栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r;</span><br><span class="line">r=(slnode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(lsnode));</span><br><span class="line"><span class="keyword">if</span>(!r) <span class="built_in">exit</span>(overflow);</span><br><span class="line">r-&gt;date=e;</span><br><span class="line">r-&gt;next=(*h)-&gt;next;</span><br><span class="line">(*h)-&gt;next=r;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">Pop</span><span class="params">(slnode *h,selemtype *e)</span><span class="comment">//出栈 </span></span><br><span class="line">&#123;</span><br><span class="line">*h=(*h)-&gt;next;</span><br><span class="line">*e=(*h)-&gt;date;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">GetTop</span><span class="params">(slnode h, selemtype *e)</span><span class="comment">//读栈顶 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(h-&gt;next==<span class="number">0</span>) <span class="keyword">return</span> error;</span><br><span class="line">*e=h-&gt;next-&gt;date;</span><br><span class="line"><span class="keyword">return</span> ok; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackEmpty</span><span class="params">(slnode h)</span><span class="comment">//判断栈空 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(h-&gt;next==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">fun1</span><span class="params">(selemtype n)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackTravers</span><span class="params">(slnode h, <span class="type">void</span> (*fun1)(selemtype n))</span><span class="comment">//遍历栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r=h-&gt;next;</span><br><span class="line"><span class="keyword">while</span>(r!=<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">(*fun1)(r-&gt;date);</span><br><span class="line">r=r-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">DestroyStack</span><span class="params">(slnode *h)</span><span class="comment">//销毁栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r;</span><br><span class="line"><span class="keyword">while</span>(*h)</span><br><span class="line">&#123;</span><br><span class="line">r=*h;</span><br><span class="line">*h=(*h)-&gt;next;</span><br><span class="line"><span class="built_in">free</span>(r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">free</span>(*h); </span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackLength</span><span class="params">(slnode h,<span class="type">int</span> *i)</span><span class="comment">//求栈长度 </span></span><br><span class="line">&#123;</span><br><span class="line">(*i)=<span class="number">0</span>;</span><br><span class="line">slnode r=h-&gt;next;</span><br><span class="line"><span class="keyword">while</span>(r)</span><br><span class="line">&#123;</span><br><span class="line">(*i)++;</span><br><span class="line">r=r-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> m,i=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line">slnode h;</span><br><span class="line">selemtype e;</span><br><span class="line"></span><br><span class="line">InitStack(&amp;h);<span class="comment">//初始化栈 </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;验证初始化栈：%d\n&quot;</span>,h);</span><br><span class="line">DestroyStack(&amp;h);<span class="comment">//销毁栈  </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;验证毁灭栈：%d\n&quot;</span>,h);</span><br><span class="line"></span><br><span class="line">InitStack(&amp;h);<span class="comment">//初始化栈 </span></span><br><span class="line"><span class="keyword">while</span>(m!=<span class="number">0</span>)<span class="comment">//入栈 </span></span><br><span class="line">&#123;</span><br><span class="line">Push(&amp;h,m%<span class="number">8</span>);</span><br><span class="line">m=m/<span class="number">8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!StackEmpty(h))<span class="comment">//判断栈空 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;遍历栈：&quot;</span>) ;</span><br><span class="line">StackTravers(h,fun1);<span class="comment">//遍历栈</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); </span><br><span class="line"></span><br><span class="line">GetTop(h,&amp;e);<span class="comment">//读栈顶</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;读栈顶：%d\n&quot;</span>,e); </span><br><span class="line"></span><br><span class="line">StackLength(h,&amp;i);<span class="comment">//求栈长度 </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;求栈长：%d\n&quot;</span>,i);</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)<span class="comment">//出栈 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!StackEmpty(h))</span><br><span class="line">&#123;</span><br><span class="line">Pop(&amp;h,&amp;e);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;出栈：%d &quot;</span>,e);</span><br><span class="line"></span><br><span class="line">StackLength(h,&amp;i);<span class="comment">//求栈长度 </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;目前栈长：%d\n&quot;</span>,i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line">DestroyStack(&amp;h);<span class="comment">//销毁栈</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5-应用"><a href="#1-5-应用" class="headerlink" title="1.5 应用"></a>1.5 应用</h3><h4 id="1-5-1-数制转换"><a href="#1-5-1-数制转换" class="headerlink" title="1.5.1 数制转换"></a>1.5.1 数制转换</h4><p>例题：设计算法，将十进制整数转换为八进制，在函数中输入数据并输出结果。</p><p>见链表表示</p><h4 id="1-5-2-括号匹配"><a href="#1-5-2-括号匹配" class="headerlink" title="1.5.2 括号匹配"></a>1.5.2 括号匹配</h4><p>例题：假设通过键盘输入的一个表达式中只出现()和[]并允许任意顺序的嵌套，设计算法，检测括号是否匹配。</p><p>==*加代码==</p><h4 id="1-5-3-迷宫求解"><a href="#1-5-3-迷宫求解" class="headerlink" title="1.5.3 迷宫求解"></a>1.5.3 迷宫求解</h4><img src="/posts/6a91c765.htm/6a91c765/%E8%BF%B7%E5%AE%AB.png" class title="迷宫"><img src="/posts/6a91c765.htm/6a91c765/%E8%BF%B7%E5%AE%AB%E6%B1%82%E8%A7%A31.png" class title="迷宫求解1"><img src="/posts/6a91c765.htm/6a91c765/%E8%BF%B7%E5%AE%AB%E6%B1%82%E8%A7%A32.png" class title="迷宫求解2"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ok 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> overflow 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> <span class="keyword">error</span> 0</span></span><br><span class="line"><span class="type">int</span> maze[<span class="number">10</span>][<span class="number">10</span>]=&#123;</span><br><span class="line">           &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,</span><br><span class="line">       &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> status;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">int</span> y;</span><br><span class="line">&#125;postype; </span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line"><span class="type">int</span> di;</span><br><span class="line"><span class="type">int</span> step;</span><br><span class="line">postypeseat; </span><br><span class="line">&#125;selemtype;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">snode</span>&#123;</span></span><br><span class="line">selemtype date;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">snode</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;lsnode,*slnode;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">InitStack</span><span class="params">(slnode *h)</span><span class="comment">//初始化 </span></span><br><span class="line">&#123;</span><br><span class="line">*h=(slnode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(lsnode));</span><br><span class="line"><span class="keyword">if</span>(!*h) <span class="built_in">exit</span>(overflow);</span><br><span class="line">(*h)-&gt;next=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> ok; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">Push</span><span class="params">(slnode *h,selemtype e)</span><span class="comment">//入栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r;</span><br><span class="line">r=(slnode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(lsnode));</span><br><span class="line"><span class="keyword">if</span>(!r) <span class="built_in">exit</span>(overflow);</span><br><span class="line">r-&gt;date=e;</span><br><span class="line">r-&gt;next=(*h)-&gt;next;</span><br><span class="line">(*h)-&gt;next=r;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">Pop</span><span class="params">(slnode *h,selemtype *e)</span><span class="comment">//出栈 </span></span><br><span class="line">&#123;</span><br><span class="line">*h=(*h)-&gt;next;</span><br><span class="line">*e=(*h)-&gt;date;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">GetTop</span><span class="params">(slnode h, selemtype *e)</span><span class="comment">//读栈顶 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(h-&gt;next==<span class="number">0</span>) <span class="keyword">return</span> error;</span><br><span class="line">*e=h-&gt;next-&gt;date;</span><br><span class="line"><span class="keyword">return</span> ok; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackEmpty</span><span class="params">(slnode h)</span><span class="comment">//判断栈空 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(h-&gt;next==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">fun1</span><span class="params">(selemtype n)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackTravers</span><span class="params">(slnode h, <span class="type">void</span> (*fun1)(selemtype n))</span><span class="comment">//遍历栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r=h-&gt;next;</span><br><span class="line"><span class="keyword">while</span>(r!=<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">(*fun1)(r-&gt;date);</span><br><span class="line">r=r-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">DestroyStack</span><span class="params">(slnode *h)</span><span class="comment">//销毁栈 </span></span><br><span class="line">&#123;</span><br><span class="line">slnode r;</span><br><span class="line"><span class="keyword">while</span>(*h)</span><br><span class="line">&#123;</span><br><span class="line">r=*h;</span><br><span class="line">*h=(*h)-&gt;next;</span><br><span class="line"><span class="built_in">free</span>(r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">free</span>(*h); </span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">StackLength</span><span class="params">(slnode h,<span class="type">int</span> *i)</span><span class="comment">//求栈长度 </span></span><br><span class="line">&#123;</span><br><span class="line">(*i)=<span class="number">0</span>;</span><br><span class="line">slnode r=h-&gt;next;</span><br><span class="line"><span class="keyword">while</span>(r)</span><br><span class="line">&#123;</span><br><span class="line">(*i)++;</span><br><span class="line">r=r-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line">status <span class="title function_">pass</span><span class="params">(postype pos)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(maze[pos.x][pos.y]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line">postype <span class="title function_">nextpos</span><span class="params">(postype pos,<span class="type">int</span> di)</span></span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">switch</span>(di)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">case</span> <span class="number">1</span>:pos.x++;<span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="number">2</span>:pos.y++;<span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">case</span> <span class="number">3</span>:pos.x--;<span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:pos.y--;<span class="keyword">break</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> pos;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">status <span class="title function_">mazepath</span><span class="params">(<span class="type">int</span> maze[<span class="number">10</span>][<span class="number">10</span>],postype start,postype end)</span></span><br><span class="line">&#123;</span><br><span class="line">slnode h;</span><br><span class="line">InitStack(&amp;h);<span class="comment">//初始化栈</span></span><br><span class="line">selemtype e;</span><br><span class="line">postype curpos=start;</span><br><span class="line"><span class="type">int</span> curstep=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(pass(curpos))</span><br><span class="line">&#123;</span><br><span class="line">maze[curpos.x][curpos.y]=curstep;</span><br><span class="line">e.step=curstep;</span><br><span class="line">e.di=<span class="number">1</span>;</span><br><span class="line">e.seat=curpos;</span><br><span class="line">Push(&amp;h,e);</span><br><span class="line"><span class="keyword">if</span>(curpos.x==end.x&amp;&amp;curpos.y==end.y) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">curpos=nextpos(curpos,<span class="number">1</span>);</span><br><span class="line">curstep++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(!StackEmpty(h)) </span><br><span class="line">&#123;</span><br><span class="line">Pop(&amp;h,&amp;e);</span><br><span class="line"><span class="keyword">while</span>(e.di==<span class="number">4</span>&amp;&amp;!StackEmpty(h))</span><br><span class="line">&#123;</span><br><span class="line">maze[e.seat.x][e.seat.y]=<span class="number">-1</span>;</span><br><span class="line">Pop(&amp;h,&amp;e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(e.di&lt;<span class="number">4</span>)</span><br><span class="line">&#123;</span><br><span class="line">e.di++;</span><br><span class="line">Push(&amp;h,e);</span><br><span class="line">curpos=nextpos(e.seat,e.di);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">while</span>(!StackEmpty(h));</span><br><span class="line"><span class="keyword">return</span> error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> i,j;</span><br><span class="line">postype start=&#123;<span class="number">1</span>,<span class="number">1</span>&#125;,end=&#123;<span class="number">8</span>,<span class="number">8</span>&#125;;</span><br><span class="line"> <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;%3d&quot;</span>,maze[i][j]);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span>(!mazepath(maze,start,end))</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;无解！\n&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">10</span>;j++)</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;%3d&quot;</span>,maze[i][j]);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-队列"><a href="#2-队列" class="headerlink" title="2 队列"></a>2 队列</h2><h3 id="2-1-基本概念："><a href="#2-1-基本概念：" class="headerlink" title="2.1 基本概念："></a>2.1 基本概念：</h3><p>队列是运算受限的线性表</p><p>限制：一端插入，另一端删除</p><p>特点：先进先出(FIFO)</p><p>允许插入(入队)的一端称队尾、允许删除(出队)的一端称队头。</p><h3 id="2-2-顺序表示"><a href="#2-2-顺序表示" class="headerlink" title="2.2 顺序表示"></a>2.2 顺序表示</h3><p>==*加代码==</p><h3 id="2-3-链式表示"><a href="#2-3-链式表示" class="headerlink" title="2.3 链式表示"></a>2.3 链式表示</h3><p>==*加代码==</p><h3 id="2-4-应用——离散事件模拟"><a href="#2-4-应用——离散事件模拟" class="headerlink" title="2.4 应用——离散事件模拟"></a>2.4 应用——离散事件模拟</h3><p>假设某银行有N个窗口对外接待客户，从银行开门起不断有客户进入银行，若有窗口空闲，则直接办理业务，反之，则排在人数最少的窗口后面。编写一个程序来模拟银行业务并计算客户在银行逗留的平均时间。</p><p>思路：1. 0分钟：银行开门，假定一客户到达。只要有客户到达，就产生两个随机数，分别表示该客户的业务办理时间和下一客户到达的时间间隔(例如随机数为8和5)，并排在人数最少的队列中。2. 此时可确定，5分钟后将有一个客户到达事件发生，8分钟时将有一个客户离开事件发生。3. 5分钟：客户到达，产生两个随机数(例如25和4)，该客户何时离开？若排在空窗口，30分钟时，否则当他为队头时计算。</p><p>事件链表：客户到达事件(0)和客户离开事件(i)，按事件发生时间非递减有序；窗口队列：模拟排队效果，记录客户到达时间和业务办理时间</p><img src="/posts/6a91c765.htm/6a91c765/%E7%A6%BB%E6%95%A3%E4%BA%8B%E4%BB%B6%E6%B5%81%E7%A8%8B%E5%9B%BE.JPG" class title="离散事件流程图"><p>==*加代码==</p><h2 id="3-习题"><a href="#3-习题" class="headerlink" title="3 习题"></a>3 习题</h2><h3 id="例题1："><a href="#例题1：" class="headerlink" title="例题1："></a>例题1：</h3><p>假设一个栈的输入序列为1,2,3，若在入栈的过程中允许出栈，则可能得到的出栈序列是什么？</p><p>① 1入1出， 2入2出，3入3出， 即123；</p><p>② 1入1出， 2、3入，3、2出， 即132；</p><p>③ 1、2入，2出， 3入3出， 即231；</p><p>④ 1、2入，2、1出，3入3出， 即213；</p><p>⑤ 1、2、3入，3、2、1出， 即321；</p><h3 id="例题2："><a href="#例题2：" class="headerlink" title="例题2："></a>例题2：</h3><p>假设一个栈的输入序列是12345，若在入栈的过程中允许出栈，则栈的输出序列12345可能实现吗？ 43512的输出呢？</p><p>12345 可能；43512 不可能</p><h2 id="4-附录——ADT定义"><a href="#4-附录——ADT定义" class="headerlink" title="4 附录——ADT定义"></a>4 附录——ADT定义</h2><h3 id="1-栈-1"><a href="#1-栈-1" class="headerlink" title="1.栈"></a>1.栈</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ADT Stack &#123;</span><br><span class="line">数据对象：D＝&#123; ai | ai ∈ElemSet, i=<span class="number">1</span>,<span class="number">2</span>,...,n, n≥<span class="number">0</span> &#125;</span><br><span class="line">数据关系：R1＝&#123; &lt;ai<span class="number">-1</span>, ai &gt;| ai<span class="number">-1</span>, ai∈D, i=<span class="number">2</span>,...,n &#125;</span><br><span class="line">                      约定an 端为栈顶，a1 端为栈底。</span><br><span class="line">基本操作：</span><br><span class="line">InitStack(&amp;S)</span><br><span class="line">    操作结果：构造一个空栈S</span><br><span class="line">DestroyStack(&amp;S)</span><br><span class="line">    初始条件：栈 S 已存在。</span><br><span class="line">    操作结果：栈 S 被销毁。</span><br><span class="line">ClearStack(&amp;S)</span><br><span class="line">    初始条件：栈 S 已存在。</span><br><span class="line">    操作结果：将 S 清为空栈。</span><br><span class="line">StackEmpty(s)</span><br><span class="line">    初始条件：栈 S 已存在。</span><br><span class="line">    操作结果：若栈 S 为空栈，返回 TRUE，否则返回 FALSE。</span><br><span class="line">StackLength(S)</span><br><span class="line">    初始条件：栈 S 已存在。</span><br><span class="line">    操作结果：返回 S 的元素个数，即栈的长度</span><br><span class="line">GetTop(S, &amp;e)</span><br><span class="line">    初始条件：栈 S 已存在且非空。</span><br><span class="line">    操作结果：用 e 返回 S 的栈顶元素。</span><br><span class="line">Push(&amp;S, e)</span><br><span class="line">    初始条件：栈 S 已存在。</span><br><span class="line">    操作结果：插入元素 e 为新的栈顶元素。</span><br><span class="line">Pop(&amp;S, &amp;e)</span><br><span class="line">    初始条件：栈 S 已存在且非空。</span><br><span class="line">    操作结果：删除栈顶元素，并用 e 返回其值。</span><br><span class="line">StackTravers(S, visit())</span><br><span class="line">    初始条件：栈 S 已存在且非空。</span><br><span class="line">    操作结果：从栈底开始遍历栈。</span><br><span class="line">&#125; ADT Stack</span><br></pre></td></tr></table></figure><h3 id="2-队列-1"><a href="#2-队列-1" class="headerlink" title="2.队列"></a>2.队列</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ADT Queue &#123;</span><br><span class="line">数据对象：D＝&#123; ai | ai ∈ElemSet, i=<span class="number">1</span>,<span class="number">2</span>,...,n, n≥<span class="number">0</span> &#125;</span><br><span class="line">数据关系：R1＝&#123; &lt;ai<span class="number">-1</span>, ai &gt;| ai<span class="number">-1</span>, ai∈D, i=<span class="number">2</span>,...,n &#125;</span><br><span class="line">                      约定an 端为队尾，a1 端为队头。</span><br><span class="line">基本操作：</span><br><span class="line">InitQueue(&amp;Q)</span><br><span class="line">    操作结果：构造一个空队列Q。</span><br><span class="line">DestroyQueue(&amp;Q)</span><br><span class="line">    初始条件：队列Q已存在。</span><br><span class="line">    操作结果：队列Q被销毁， 不再存在。</span><br><span class="line">ClearQueue(&amp;Q)</span><br><span class="line">    初始条件：队列Q已存在。</span><br><span class="line">    操作结果：将Q清为空队列。</span><br><span class="line">QueueEmpty(Q)</span><br><span class="line">    初始条件：队列Q已存在。</span><br><span class="line">    操作结果：若Q为空队列，则返回TRUE，否则返回FALSE。</span><br><span class="line">QueueLength(Q)</span><br><span class="line">    初始条件：队列Q已存在。</span><br><span class="line">    操作结果：返回Q的元素个数，即队列的长度</span><br><span class="line">GetHead(Q, &amp;e)</span><br><span class="line">    初始条件：Q为非空队列。</span><br><span class="line">    操作结果：用e返回Q的队头元素。</span><br><span class="line">EnQueue(&amp;Q, e)</span><br><span class="line">    初始条件：队列Q已存在。</span><br><span class="line">    操作结果：插入元素e为Q的新的队尾元素。</span><br><span class="line">DeQueue(&amp;Q, &amp;e)</span><br><span class="line">    初始条件：Q为非空队列。</span><br><span class="line">    操作结果：删除Q的队头元素，并用e返回其值</span><br><span class="line">&#125;ADT Queue</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>树和二叉树（持续更新中）</title>
      <link href="posts/75d72b3e.html"/>
      <url>posts/75d72b3e.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about my organization of the data structure.   If you get any problems，you can ask me on <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.</p><h2 id="1-二叉树"><a href="#1-二叉树" class="headerlink" title="1 二叉树"></a>1 二叉树</h2><h3 id="1-1-二叉树的数学内容"><a href="#1-1-二叉树的数学内容" class="headerlink" title="1.1 二叉树的数学内容"></a>1.1 二叉树的数学内容</h3><h4 id="1-1-1-性质"><a href="#1-1-1-性质" class="headerlink" title="1.1.1 性质"></a>1.1.1 性质</h4><p>性质1： 在二叉树的第i层上至多有 $ _2 i$ -1个结点(i&gt;=1)。</p><p>性质2：深度为k的二叉树至多有$ _2 k-1 $个结点（k&gt;=1)</p><p>性质3： 对任何一棵二叉树，如果其终端结点数为n0，度为2的结点数为n2，则 n0＝n2＋1。</p><p>完全二叉树的性质：</p><p>性质4 ：具有 n 个结点的完全二叉树的深度为  $ \log_{2} n+1$</p><p>性质5： 如果对一棵有n个结点的完全二叉树的所有结点按层序编号(自上向下，同层从左到右)，则对任一结点i (1&lt;=i&lt;=n)，有：</p><p>（1）如果i＝1，则结点i无双亲，是二叉树的根；如果i&gt;1，则其双亲是结点 i/2向下取余。</p><p>（2）如果2i&gt;n，则结点i为叶子结点，无左孩子；否则，其左孩子是结点2i。  </p><p>（3）如果2i＋1&gt;n，则结点i无右孩子；否则，其右孩子是结点2i＋1。</p><h4 id="1-1-2-三个推论"><a href="#1-1-2-三个推论" class="headerlink" title="1.1.2 三个推论"></a>1.1.2 三个推论</h4><p>推论1：具有n个结点的二叉树可能的形态数为C(2n,n)</p><p>推论2：完全二叉树中1度结点的个数为0或1</p><p>推论3：具有n个结点的二叉树，其二叉链表中空指针域的个数为n+1</p><h4 id="1-1-3-两个定理"><a href="#1-1-3-两个定理" class="headerlink" title="1.1.3 两个定理"></a>1.1.3 两个定理</h4><p>定理1：n(n&gt;=0)个结点的二叉树，均可由它的中序序列和先序序列唯一确定。</p><p>定理2：n(n&gt;=0)个结点的二叉树，均可由它的中序序列和后序序列唯一确定。</p><h3 id="1-2-二叉树的存储结构"><a href="#1-2-二叉树的存储结构" class="headerlink" title="1.2 二叉树的存储结构"></a>1.2 二叉树的存储结构</h3><h4 id="1-2-1-顺序存储"><a href="#1-2-1-顺序存储" class="headerlink" title="1.2.1 顺序存储"></a>1.2.1 顺序存储</h4><img src="/posts/75d72b3e.htm/75d72b3e/%E9%A1%BA%E5%BA%8F%E5%AD%98%E5%82%A8.png" class title="顺序存储"><p>只适用于完全二叉树，根据性质5可以判断双亲和孩子</p><p>==建立顺序表*加代码==</p><h4 id="1-2-2-链式存储（前2种重点）"><a href="#1-2-2-链式存储（前2种重点）" class="headerlink" title="1.2.2 链式存储（前2种重点）"></a>1.2.2 链式存储（前2种重点）</h4><h5 id="1-2-2-1-二叉链表"><a href="#1-2-2-1-二叉链表" class="headerlink" title="1.2.2.1 二叉链表"></a>1.2.2.1 二叉链表</h5><p>直观的表示出了某结点左右孩子的信息</p><p>==建立二叉链表*加代码==</p><h6 id="先根遍历"><a href="#先根遍历" class="headerlink" title="先根遍历"></a>先根遍历</h6><img src="/posts/75d72b3e.htm/75d72b3e/%E5%85%88%E6%A0%B9%E9%81%8D%E5%8E%86.png" class title="先根遍历"><p>递归算法</p><p>==*加代码==</p><p>非递归算法</p><p>==*加代码==</p><h6 id="中根遍历"><a href="#中根遍历" class="headerlink" title="中根遍历"></a>中根遍历</h6><img src="/posts/75d72b3e.htm/75d72b3e/%E4%B8%AD%E6%A0%B9%E9%81%8D%E5%8E%86.png" class title="中根遍历"><h6 id="后根遍历"><a href="#后根遍历" class="headerlink" title="后根遍历"></a>后根遍历</h6><img src="/posts/75d72b3e.htm/75d72b3e/%E5%90%8E%E6%A0%B9%E9%81%8D%E5%8E%86.png" class title="后根遍历"><h5 id="1-2-2-2-线索链表"><a href="#1-2-2-2-线索链表" class="headerlink" title="1.2.2.2 线索链表"></a>1.2.2.2 线索链表</h5><p>为了直观的表示出某结点的前驱和后继</p><h6 id="先序线索化"><a href="#先序线索化" class="headerlink" title="先序线索化"></a>先序线索化</h6><p>==*加代码==</p><h6 id="中序线索化"><a href="#中序线索化" class="headerlink" title="中序线索化"></a>中序线索化</h6><img src="/posts/75d72b3e.htm/75d72b3e/%E4%B8%AD%E5%BA%8F%E7%BA%BF%E7%B4%A2%E5%8C%96.png" class title="中序线索化"><p>==*加代码==</p><h6 id="后序线索化"><a href="#后序线索化" class="headerlink" title="后序线索化"></a>后序线索化</h6><img src="/posts/75d72b3e.htm/75d72b3e/%E5%90%8E%E5%BA%8F%E7%BA%BF%E7%B4%A2%E5%8C%96.png" class title="后序线索化"><p>==*加代码==</p><h5 id="1-2-2-3-三叉链表"><a href="#1-2-2-3-三叉链表" class="headerlink" title="1.2.2.3 三叉链表"></a>1.2.2.3 三叉链表</h5><h5 id="1-2-2-4-双亲链表"><a href="#1-2-2-4-双亲链表" class="headerlink" title="1.2.2.4 双亲链表"></a>1.2.2.4 双亲链表</h5><h2 id="2-树和森林"><a href="#2-树和森林" class="headerlink" title="2 树和森林"></a>2 树和森林</h2><h3 id="2-1-树的存储结构"><a href="#2-1-树的存储结构" class="headerlink" title="2.1 树的存储结构"></a>2.1 树的存储结构</h3><h4 id="2-1-1-双亲表示法"><a href="#2-1-1-双亲表示法" class="headerlink" title="2.1.1 双亲表示法"></a>2.1.1 双亲表示法</h4><img src="/posts/75d72b3e.htm/75d72b3e/%E5%8F%8C%E4%BA%B2%E8%A1%A8%E7%A4%BA%E6%B3%95.png" class title="双亲表示法"><p>==*加代码==</p><h4 id="2-1-2-孩子表示法"><a href="#2-1-2-孩子表示法" class="headerlink" title="2.1.2 孩子表示法"></a>2.1.2 孩子表示法</h4><img src="/posts/75d72b3e.htm/75d72b3e/%E5%AD%A9%E5%AD%90%E8%A1%A8%E7%A4%BA%E6%B3%95.png" class title="孩子表示法"><p>==*加代码==</p><h4 id="2-1-3-孩子兄弟表示法"><a href="#2-1-3-孩子兄弟表示法" class="headerlink" title="2.1.3 孩子兄弟表示法"></a>2.1.3 孩子兄弟表示法</h4><img src="/posts/75d72b3e.htm/75d72b3e/%E5%AD%A9%E5%AD%90%E5%85%84%E5%BC%9F%E8%A1%A8%E7%A4%BA%E6%B3%95.png" class title="孩子兄弟表示法"><p>==*加代码==</p><h3 id="2-2-树和二叉树的转换"><a href="#2-2-树和二叉树的转换" class="headerlink" title="2.2 树和二叉树的转换"></a>2.2 树和二叉树的转换</h3><p>树和二叉树均可以使用二叉链表为存储结构，则通过二叉链表作为媒介，树和二叉树可以相互转换</p><p>第一步：加线：在兄弟之间加一连线</p><p>第二步：抹线：对每个结点，除了其左孩子外，去除其与其余孩子之间的关系</p><p>第三步：旋转：横线顺时针旋转45°</p><img src="/posts/75d72b3e.htm/75d72b3e/%E6%A0%91%E5%92%8C%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E8%BD%AC%E6%8D%A2.png" class title="树和二叉树的转换"><p>==*加代码==</p><h3 id="2-3-森林和二叉树"><a href="#2-3-森林和二叉树" class="headerlink" title="2.3 森林和二叉树"></a>2.3 森林和二叉树</h3><p>树转换为二叉树后，右子树必为空。</p><p>将森林中的每棵树依次转换为二叉树，并将第i棵二叉树的根作为第i-1棵二叉树根的右孩子(2&lt;=i&lt;=m)。</p><p>如果F={T1,T2,…,Tm}是森林，则可按如下规则转换成一棵二叉树B=(root,LB,RB)</p><p>1.若F为空，则B为空树</p><p>2.若F非空，则B的根root即为森林中第一棵树的根ROOT(T1)；B的左子树LB是从T1中根结点的子树森林F1={T11,T12,…,T1m1}转换而成的二叉树；其右子树RB是从森林F’={T2,T3,…,Tm}转换而成的二叉树</p><h3 id="2-4-赫夫曼树"><a href="#2-4-赫夫曼树" class="headerlink" title="2.4 赫夫曼树"></a>2.4 赫夫曼树</h3><p>带权路径长度最短的树(最优二叉树)</p><p>树的路径长度：从树根到每一个结点的路径长度之和</p><p>结点的带权路径长度：带权结点(叶子)到根的路径长度与权的乘积</p><p>树的带权路径长度：树中所有结点的带权路径长度之和</p><img src="/posts/75d72b3e.htm/75d72b3e/%E6%9E%84%E9%80%A0%E8%B5%AB%E5%A4%AB%E6%9B%BC%E6%A0%91.png" class title="构造赫夫曼树"><p>赫夫曼树的应用——赫夫曼编码</p><img src="/posts/75d72b3e.htm/75d72b3e/%E8%B5%AB%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81.png" class title="赫夫曼编码"><img src="/posts/75d72b3e.htm/75d72b3e/%E8%B5%AB%E5%A4%AB%E6%9B%BC%E8%AF%91%E7%A0%81.png" class title="赫夫曼译码"><h2 id="3-习题"><a href="#3-习题" class="headerlink" title="3 习题"></a>3 习题</h2><h3 id="例题1："><a href="#例题1：" class="headerlink" title="例题1："></a>例题1：</h3><p>假设一棵完全二叉树有700个结点，则其叶子结点有多少个？</p><p>根据性质4，700个结点的完全二叉树为10层</p><p>根据性质2，前9层有511个结点，则第10层结点数为189个，均为叶子结点</p><p>根据性质1，第9层结点数为256个，其中前95个为第10层189个结点的双亲，因此第9层的叶子数为161个</p><p>所以叶子结点总数为189+161=350个</p><h3 id="例题2："><a href="#例题2：" class="headerlink" title="例题2："></a>例题2：</h3><p>1.若二叉树T，先序遍历序列为ABCDEF  ，中序遍历序列为CBAEDF ，则其后序遍历序列为？</p><p>C B E F D A</p><p>2.已知二叉树的先序序列为ABDEGCF，中序序列为DBGEACF，则后序序列为(     )</p><p>要点：先序或后序确定根；中序确定左右子树</p><h3 id="例题3："><a href="#例题3：" class="headerlink" title="例题3："></a>例题3：</h3><p>1.某二叉树的先序遍历和后序遍历的序列正好相反，则该二叉树一定是( )</p><p>A 空树或只有一个结点　B 完全二叉树</p><p>C 二叉排序树　D 高度与结点数相同</p><p>要点：先序：根左右；后序：左右根</p><p>2.一棵二叉树的先序遍历序列为abcdefg，它的中序遍历序列可能是( )</p><p>A cabdefg      B abcdefg</p><p>C dacefbg      D adcbgef</p><p>要点：先序：根左右；中序：左根右</p><p>3.如果二叉树结点的先序序列、中序序列和后序序列中，结点A、B的位置都是A在前B在后，则A B可能是兄弟么？A可能是B的双亲么？A可能是B的孩子么？</p><p>要点：先序：根左右；中序：左根右；后序：左右根</p><p>4.一棵二叉树的先序、中序和后序序列分别如下，其中一部分未显示出来。试求出空格处的内容，并画出该树</p><p>先序：（）B（）F（）I  C  E  H（） G</p><p>中序：  D（）K  F  I  A（）E  J  C （）</p><p>后序：（）K（）F  B  H  J （）G（）A</p><h3 id="例题4："><a href="#例题4：" class="headerlink" title="例题4："></a>例题4：</h3><p>==*加代码==</p><p>1.假设二叉树采用二叉链表存储结构，设计一个算法，求前序遍历序列中第K个结点的结点值。</p><p>2.假设二叉树采用二叉链表存储结构，设计一个算法，按层次遍历二叉树</p><p>3.假设二叉树采用二叉链表存储结构，设计一个算法，求二叉树T的宽度(即结点数最多的层次上的结点个数)。</p><p>4.假设二叉树采用二叉链表存储结构，设计一个算法，判断一棵二叉树是否为完全二叉树。</p><p>5.设计一个递归算法，将一棵二叉树逆时针90度打印出来。如下图左的二叉树，以图右的形式打印</p><p>6.设计在一棵中序线索二叉树中查找中序序列的最后一个结点和任一结点中序前驱结点的算法，并在此基础上设计非递归的中序反向遍历算法。</p><img src="/posts/75d72b3e.htm/75d72b3e/%E7%AE%97%E6%B3%95%E4%B9%A0%E9%A2%98.png" class title="算法习题"><h3 id="例题5："><a href="#例题5：" class="headerlink" title="例题5："></a>例题5：</h3><p>1.引入线索二叉树的目的是（ ）</p><p>  A 加快查找前驱和后继的速度</p><p>  B 为了在二叉树中方便的插入和删除</p><p>  C 为了方便的找到双亲</p><p>  D 使二叉树的遍历结果唯一</p><p>2.判断线索二叉树中*p结点有右孩子的条件是</p><p>P-&gt;rtag==0</p><p>3.在n个结点的线索二叉树上含有的线索数为</p><p> n+1</p><h3 id="例题6："><a href="#例题6：" class="headerlink" title="例题6："></a>例题6：</h3><p>1.给出在先序线索二叉树中查找*p的后继结点的过程。</p><p>2.先序线索中，若*p的左孩子不空，则左孩子为后继；否则其后继为右孩子或右线索。</p><p>3.给出在后序线索二叉树中查找*p的后继结点的过程。</p><p>4.在后序线索中，若*p有右线索，则右线索为其后继；否则，其后继为其双亲结点右子树后序序列中的第一个结点，若双亲无右子树，则后继即为双亲。</p><h2 id="4-附录——ADT定义"><a href="#4-附录——ADT定义" class="headerlink" title="4 附录——ADT定义"></a>4 附录——ADT定义</h2><h3 id="1-二叉树-1"><a href="#1-二叉树-1" class="headerlink" title="1.二叉树"></a>1.二叉树</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ADT BinaryTree&#123;</span><br><span class="line">数据对象： D＝&#123;ai|ai∈ElemSet,i=<span class="number">1</span>,<span class="number">2</span>,...,n, n≥<span class="number">0</span> &#125;</span><br><span class="line">数据关系： R</span><br><span class="line">基本操作：</span><br><span class="line">InitBiTree(&amp;T);</span><br><span class="line">DestroyBiTree(&amp;T);</span><br><span class="line">CreateBiTree(&amp;T, definition);</span><br><span class="line">ClearBiTree(&amp;T);</span><br><span class="line">BiTreeEmpty(T);</span><br><span class="line">BiTreeDepth(T);</span><br><span class="line">Assign(T, &amp;e, value); </span><br><span class="line">Root(T); </span><br><span class="line">Value(T, e);</span><br><span class="line">Parent (T, e);</span><br><span class="line">LeftChild (T, e);</span><br><span class="line">RightChild (T, e);</span><br><span class="line">LeftSibling (T, e);</span><br><span class="line">RightSibling (T, e);</span><br><span class="line">PreOrderTraverse(T, Visit());</span><br><span class="line">InOrderTraverse(T, Visit());</span><br><span class="line">PostOrderTraverse(T, Visit());</span><br><span class="line">LevelOrderTraverse(T, Visit());</span><br><span class="line">InsertChild(T, p, LR, c); </span><br><span class="line">DeleteChild(T, p, LR);</span><br><span class="line">&#125; ADT BinaryTree</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>递归问题算法（持续更新中）</title>
      <link href="posts/3216493d.html"/>
      <url>posts/3216493d.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about my organization of the data structure.   If you get any problems，you can ask me on <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.</p><h2 id="1-n"><a href="#1-n" class="headerlink" title="1 n!"></a>1 n!</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="type">double</span> x;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>) x=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span>  x=n* fun(n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">return</span>  x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-斐波那契数列第n项的值"><a href="#2-斐波那契数列第n项的值" class="headerlink" title="2 斐波那契数列第n项的值"></a>2 斐波那契数列第n项的值</h2><img src="/posts/3216493d.htm/3216493d/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91.png" class title="斐波那契"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span>  <span class="title function_">fun</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>||n==<span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> fun(n<span class="number">-1</span>)+fun(n<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-n阶汉诺塔"><a href="#3-n阶汉诺塔" class="headerlink" title="3 n阶汉诺塔"></a>3 n阶汉诺塔</h2><img src="/posts/3216493d.htm/3216493d/%E6%B1%89%E8%AF%BA%E5%A1%94.png" class title="汉诺塔"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> c=<span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">move</span><span class="params">(<span class="type">char</span> x,<span class="type">int</span> n,<span class="type">char</span> z)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d.move disk%d from %c to</span></span><br><span class="line"><span class="string">                      %c\n&quot;</span>,++c,n,x,z);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">hanoi</span><span class="params">(<span class="type">int</span> n,<span class="type">char</span> x,<span class="type">char</span> y,<span class="type">char</span> z)</span>&#123;  </span><br><span class="line">   <span class="keyword">if</span>(n==<span class="number">1</span>)</span><br><span class="line">      move(x,<span class="number">1</span>,z);</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">     hanoi(n<span class="number">-1</span>,x,z,y);</span><br><span class="line">     move(x,n,z);</span><br><span class="line">     hanoi(n<span class="number">-1</span>,y,x,z);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;   </span><br><span class="line">     hanoi(<span class="number">3</span> ,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;        </span><br></pre></td></tr></table></figure><h2 id="4-分析fun函数"><a href="#4-分析fun函数" class="headerlink" title="4 分析fun函数"></a>4 分析fun函数</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fun1函数功能：求前序遍历序列中第k个结点</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;my.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">char</span> TElemType;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span>&#123;</span></span><br><span class="line">  TElemType data;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">BiTNode</span> *<span class="title">lchild</span>,*<span class="title">rchild</span>;</span></span><br><span class="line">&#125;BiTNode,*BiTree;</span><br><span class="line"></span><br><span class="line">Status <span class="title function_">CreateBiTree</span><span class="params">(BiTree *T,FILE *fp)</span>&#123;</span><br><span class="line">  <span class="type">char</span> ch;</span><br><span class="line"></span><br><span class="line">  ch=fgetc(fp);</span><br><span class="line">  <span class="keyword">if</span>(ch==<span class="string">&#x27;#&#x27;</span>) *T=<span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">    *T=(BiTNode*) <span class="built_in">malloc</span> (<span class="keyword">sizeof</span>(BiTNode));</span><br><span class="line">    <span class="keyword">if</span>(!*T) <span class="built_in">exit</span>(OVERFLOW);</span><br><span class="line">    (*T)-&gt;data=ch;</span><br><span class="line">    CreateBiTree(&amp;(*T)-&gt;lchild,fp);</span><br><span class="line">    CreateBiTree(&amp;(*T)-&gt;rchild,fp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Status <span class="title function_">PreOrderTraverse</span><span class="params">(BiTree T,Status (*visit)(TElemType e))</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(T)&#123;</span><br><span class="line">    (*visit)(T-&gt;data);</span><br><span class="line">    PreOrderTraverse(T-&gt;lchild,visit);</span><br><span class="line">    PreOrderTraverse(T-&gt;rchild,visit);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>  <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Status <span class="title function_">PrintElement</span><span class="params">(TElemType e)</span>&#123;</span><br><span class="line">  <span class="built_in">putchar</span>(e);</span><br><span class="line">  <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">fun1</span><span class="params">(BiTree T,<span class="type">int</span> k,BiTree *p)</span>&#123;</span><br><span class="line">  <span class="type">static</span> <span class="type">int</span> n=<span class="number">0</span>;  </span><br><span class="line">  <span class="keyword">if</span>(T)&#123;</span><br><span class="line">    n++;   </span><br><span class="line">    <span class="keyword">if</span>(n==k) &#123;</span><br><span class="line">    *p=T;     </span><br><span class="line">&#125;</span><br><span class="line">    fun1(T-&gt;lchild,k,p);    </span><br><span class="line">    fun1(T-&gt;rchild,k,p);  </span><br><span class="line">  &#125;   </span><br><span class="line">  <span class="keyword">if</span>(T)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>,T-&gt;data);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Null &quot;</span>);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  BiTree T,p;</span><br><span class="line">  FILE* fp;</span><br><span class="line">  <span class="type">char</span> ch;  </span><br><span class="line"></span><br><span class="line">  fp=fopen(<span class="string">&quot;in.dat&quot;</span>,<span class="string">&quot;r&quot;</span>);</span><br><span class="line">  CreateBiTree(&amp;T,fp);</span><br><span class="line">  fclose(fp);</span><br><span class="line"></span><br><span class="line">  PreOrderTraverse(T,PrintElement);</span><br><span class="line">  <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">  fun1(T,<span class="number">6</span>,&amp;p);</span><br><span class="line">  <span class="built_in">putchar</span>(p-&gt;data);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   本题先创建了一个二叉树，然后通过先序遍历输出二叉树顺序为ABDEHCFIJKG，由顺序可知第六个结点对应的结点值应该是C。</span><br><span class="line">​  下面的思路就是在先序遍历过程中添加一个计数器n，若n等于k就将对应的结点地址传回去，在主函数中输出这个结点值。主要体现在fun1这个函数中。</span><br><span class="line">​  在fun1中，第一次执行就是先把根节点（A）传过来，（A）结点存在计数器加一(n=<span class="number">1</span>)且访问左孩子(B)，（B）结点存在计数器加一(n=<span class="number">2</span>)且访问左孩子(D),（D）结点存在计数器加一(n=<span class="number">3</span>)且访问左孩子（调用fun1），此时左孩子不存在，直接执行<span class="keyword">else</span>语句输出null并输出此时的n=<span class="number">3</span>。fun1函数第一次执行完。</span><br><span class="line">​  返回到调用处即（D）处访问他的右孩子（调用fun1），也不存在直接执行<span class="keyword">else</span>输出null并输出此时的n=<span class="number">3</span>。fun1函数第二次执行完。</span><br><span class="line">​  返回到调用处即（D）处，（D）结点存在输出结点值并输出此时的n=<span class="number">3</span>，fun1函数第三次执行完。</span><br><span class="line">​  返回到调用处即（B）处访问他的右孩子（E），（E）结点存在计数器加一(n=<span class="number">4</span>)且访问左孩子(H)，（H）结点存在计数器加一(n=<span class="number">5</span>)且访问左孩子（调用fun1），此时左孩子不存在，直接执行<span class="keyword">else</span>语句输出null并输出此时的n=<span class="number">5</span>。fun1函数第四次执行完。</span><br><span class="line">​  返回到调用处即（H）处访问他的右孩子（调用fun1），右孩子不存在直接执行<span class="keyword">else</span>输出null并输出此时的n=<span class="number">5</span>。fun1函数第五次执行完。</span><br><span class="line">​  返回到调用处即（H）处，（H）结点存在输出结点值并输出此时的n=<span class="number">5</span>，fun1函数第六次执行完。</span><br><span class="line">​  返回到调用处即（E）处访问他的右孩子（调用fun1），此时右孩子不存在，直接执行<span class="keyword">else</span>语句输出null并输出此时的n=<span class="number">5</span>。fun1函数第七次执行完。</span><br><span class="line">​  返回到调用处即（E）处，（E）结点存在输出结点值并输出此时的n=<span class="number">5</span>，fun1函数第八次执行完。</span><br><span class="line">​  返回到调用处即（B）处，（B）结点存在输出结点值并输出此时的n=<span class="number">5</span>，fun1函数第九次执行完。</span><br><span class="line">​  返回到调用处即（A）处，（A）结点存在开始访问右孩子.......像以上的顺序一样访问右子树，到访问（C）时n=<span class="number">6</span>=k，将（C）的地址通过形参传回主函数，最后在主函数中输出</span><br><span class="line">总结：</span><br><span class="line">​  <span class="number">1.</span>此过程n的值是先序序列的访问顺序</span><br><span class="line">​  <span class="number">2.</span>每当程序fun1执行完一次，便会有内容输出，且输出内容相当于后序遍历输出每个节点值（包含空结点），以及此时有效结点数（不包含空结点）</span><br><span class="line">​  <span class="number">3.</span>输出规律:每次从访问到一个空的结点开始（此时有效结点数即不为空的结点数是n），到访问到下一个不为空的结点（这个结点是先序遍历中的第n+<span class="number">1</span>个）或访问完 整个树（此情况是没有新结点可访问了）结束，中间fun1完成了几次执行，就输出几次n（n为第一个空的）。</span><br><span class="line">例如:</span><br><span class="line">​  <span class="number">1.</span>第一次访问到空结点，是（D）的左孩子（n=<span class="number">3</span>），下一个不为空的结点是（E），中间经过了<span class="number">3</span>次执行过程，所以输出了<span class="number">3</span>次<span class="number">3</span></span><br><span class="line">​  <span class="number">2.</span>接下来访问到空结点，是（H）的左孩子（n=<span class="number">5</span>）,下一个不为空的结点是（C）,中间经过了<span class="number">6</span>次执行过程，所以输出了<span class="number">6</span>次<span class="number">5</span></span><br><span class="line">​  <span class="number">3.</span>接下来访问到空结点，是（J）的左孩子（n=<span class="number">9</span>）,下一个不为空的结点是（K）,中间经过了<span class="number">3</span>次执行过程，所以输出了<span class="number">3</span>次<span class="number">9</span></span><br><span class="line">​  <span class="number">4.</span>接下来访问到空结点，是（K）的左孩子（n=<span class="number">10</span>）,下一个不为空的结点是（G）,中间经过了<span class="number">6</span>次执行过程，所以输出了<span class="number">6</span>次<span class="number">10</span></span><br><span class="line">​  <span class="number">5.</span>接下来访问到空结点，是（G）的左孩子（n=<span class="number">11</span>）,到访问完树结束,中间经过了<span class="number">5</span>次执行过程，所以输出了<span class="number">5</span>次<span class="number">11</span>。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>线性表（持续更新中）</title>
      <link href="posts/845ae956.html"/>
      <url>posts/845ae956.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about my organization of the data structure.   If you get any problems，you can ask me on <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.</p><h2 id="1-存储方式"><a href="#1-存储方式" class="headerlink" title="1 存储方式"></a>1 存储方式</h2><h3 id="1-1-顺序表示"><a href="#1-1-顺序表示" class="headerlink" title="1.1 顺序表示"></a>1.1 顺序表示</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> addsize 10</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> initsize 100</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ok 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OVERFLOW 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ERROR 0</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> elemtype;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> status;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">list</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">elemtype *elem;</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line"><span class="type">int</span> size;</span><br><span class="line">&#125;sqlist;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">status <span class="title function_">InitList</span><span class="params">(sqlist *l)</span></span><br><span class="line"> &#123;</span><br><span class="line">l-&gt;elem=(elemtype *)<span class="built_in">malloc</span>(initsize*<span class="keyword">sizeof</span>(elemtype));</span><br><span class="line"><span class="keyword">if</span>(!(l-&gt;elem)) <span class="built_in">exit</span>(OVERFLOW) ;</span><br><span class="line">l-&gt;length=<span class="number">0</span>;</span><br><span class="line">l-&gt;size=initsize;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">ListInsert</span><span class="params">(sqlist *l,<span class="type">int</span> i,elemtype e)</span></span><br><span class="line">&#123;</span><br><span class="line">elemtype *newelem,*p,*q;</span><br><span class="line"><span class="keyword">if</span>((i&gt;l-&gt;length+<span class="number">1</span>)||(i&lt;<span class="number">1</span>)) <span class="keyword">return</span> ERROR;</span><br><span class="line"><span class="keyword">if</span>((l-&gt;length)&gt;=(l-&gt;size))  </span><br><span class="line">&#123;</span><br><span class="line">newelem=(elemtype *)<span class="built_in">realloc</span>(l-&gt;elem,(l-&gt;size+addsize)*<span class="keyword">sizeof</span>(elemtype));</span><br><span class="line"><span class="keyword">if</span>(!newelem) <span class="built_in">exit</span>(OVERFLOW);</span><br><span class="line">l-&gt;elem=newelem;</span><br><span class="line">l-&gt;size+=addsize;</span><br><span class="line">&#125;</span><br><span class="line">q=&amp;(l-&gt;elem[i<span class="number">-1</span>]);</span><br><span class="line">p=&amp;(l-&gt;elem[l-&gt;length]);</span><br><span class="line"><span class="keyword">for</span>(p;p&gt;q;p--)</span><br><span class="line">*p=*(p<span class="number">-1</span>);</span><br><span class="line">*p=e;</span><br><span class="line">l-&gt;length+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line">status <span class="title function_">fun1</span><span class="params">(elemtype p,elemtype e)</span></span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(p%<span class="number">10</span>==e) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; </span><br><span class="line"> </span><br><span class="line"> status <span class="title function_">LocateElem</span><span class="params">(sqlist l,elemtype e,status (*fun1)(elemtype,elemtype))</span> </span><br><span class="line"> &#123;</span><br><span class="line"> <span class="type">int</span> i=<span class="number">1</span>;</span><br><span class="line"> elemtype *p=(l.elem);</span><br><span class="line"> <span class="keyword">while</span>((i&lt;=l.length)&amp;&amp;!(*fun1)(*p++,e)) ++i;</span><br><span class="line"> <span class="keyword">if</span>(i&lt;=l.length) <span class="keyword">return</span> i;</span><br><span class="line"> <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> status <span class="title function_">ListDelete</span><span class="params">(sqlist *l,<span class="type">int</span> i,elemtype *e)</span></span><br><span class="line"> &#123;</span><br><span class="line"> elemtype *p,*q;</span><br><span class="line"> <span class="keyword">if</span>(i&lt;<span class="number">1</span>||i&gt;l-&gt;length) <span class="keyword">return</span> ERROR;</span><br><span class="line"><span class="keyword">if</span>((!(l-&gt;length))||((l-&gt;elem[i<span class="number">-1</span>]%<span class="number">2</span>)!=<span class="number">0</span>)) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">p=&amp;(l-&gt;elem[l-&gt;length<span class="number">-1</span>]);</span><br><span class="line">q=&amp;(l-&gt;elem[i<span class="number">-1</span>]);</span><br><span class="line">*e=*q;</span><br><span class="line"><span class="keyword">for</span>(++q;q&lt;=p;q++)</span><br><span class="line">*(q<span class="number">-1</span>)=*q;</span><br><span class="line">l-&gt;length--;</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> status <span class="title function_">fun2</span><span class="params">(elemtype m)</span> </span><br><span class="line"> &#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,m);</span><br><span class="line"><span class="keyword">return</span> ok;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> status<span class="title function_">ListTraverse</span><span class="params">(sqlist l, status (*fun2) (elemtype m))</span></span><br><span class="line"> &#123;</span><br><span class="line"><span class="keyword">if</span>(!(l.length)) <span class="keyword">return</span> ERROR;</span><br><span class="line">elemtype *p=l.elem;</span><br><span class="line"><span class="type">int</span> i=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;遍历检验：&quot;</span>) ;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=l.length&amp;&amp;(*fun2)(*p++)) i++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n\n&quot;</span>) ;</span><br><span class="line"><span class="keyword">return</span> ok; </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">sqlist l;</span><br><span class="line"><span class="type">int</span> i,e,location,m,j=<span class="number">30</span>;</span><br><span class="line">InitList(&amp;l);<span class="comment">//操作A </span></span><br><span class="line">ListTraverse(l, fun2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;B测试: \n&quot;</span>); <span class="comment">//操作B </span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">30</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">e=rand()%<span class="number">100</span>+<span class="number">1</span>;</span><br><span class="line">ListInsert(&amp;l,i,e); </span><br><span class="line"> &#125; </span><br><span class="line">ListTraverse(l, fun2);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;C测试: \n&quot;</span>);<span class="comment">//操作C</span></span><br><span class="line">location=LocateElem(l,<span class="number">5</span>,fun1);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;第一个个位5的位置：%d\n&quot;</span>,location);</span><br><span class="line">ListTraverse(l, fun2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;D测试: \n&quot;</span>);<span class="comment">//操作D</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;删除的偶数：&quot;</span>); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=j;i++)</span><br><span class="line"> &#123;</span><br><span class="line"> e=<span class="number">0</span>;</span><br><span class="line"> m=ListDelete(&amp;l, i, &amp;e);</span><br><span class="line"> <span class="keyword">if</span>(m)</span><br><span class="line"> &#123;</span><br><span class="line"> i--;j--;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,e);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">ListTraverse(l, fun2);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure><h3 id="1-2-链式表示"><a href="#1-2-链式表示" class="headerlink" title="1.2 链式表示"></a>1.2 链式表示</h3><h4 id="1-2-1-单链表"><a href="#1-2-1-单链表" class="headerlink" title="1.2.1 单链表"></a>1.2.1 单链表</h4><h5 id="练习1-逆序插入"><a href="#练习1-逆序插入" class="headerlink" title="练习1 逆序插入"></a>练习1 逆序插入</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span>;</span> </span><br><span class="line">&#125;Node,*linklist;</span><br><span class="line"></span><br><span class="line">linklist <span class="title function_">create</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请输入测试数据：&quot;</span>);</span><br><span class="line">linklist h,r,s;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line">h=(linklist)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">r=h;</span><br><span class="line">r-&gt;next=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line"><span class="keyword">while</span>(x!=<span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line">s=(linklist)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">s-&gt;data=x;</span><br><span class="line">s-&gt;next=r-&gt;next;</span><br><span class="line">r-&gt;next=s;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> h; </span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">funa</span><span class="params">(linklist head)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;A:请输出链表结点值：&quot;</span>); </span><br><span class="line">linklist p;</span><br><span class="line">p=head-&gt;next;</span><br><span class="line"><span class="keyword">while</span>(p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,p-&gt;data);</span><br><span class="line">p=p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">funb</span><span class="params">(linklist head)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;B:请输出链表结点值：&quot;</span>);</span><br><span class="line">linklist p,q,s;</span><br><span class="line">p=head-&gt;next;</span><br><span class="line">q=head;</span><br><span class="line"><span class="keyword">while</span>(p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((p-&gt;data)%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">s=(linklist)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">s-&gt;data=<span class="number">3</span>*(p-&gt;data);</span><br><span class="line">s-&gt;next=q-&gt;next;</span><br><span class="line">q-&gt;next=s;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,s-&gt;data);</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"> q=p;</span><br><span class="line"> p=p-&gt;next;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,q-&gt;data);</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">(linklist head)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;C:请输出链表结点值：&quot;</span>);</span><br><span class="line">linklist p,q,s;</span><br><span class="line">p=head-&gt;next;</span><br><span class="line">q=head;</span><br><span class="line"><span class="keyword">while</span>(p)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>((p-&gt;data)%<span class="number">10</span>==<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">s=p;</span><br><span class="line">p=p-&gt;next;</span><br><span class="line">q-&gt;next=p;</span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">q=p;</span><br><span class="line">p=p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> p=head-&gt;next;</span><br><span class="line"> <span class="keyword">while</span>(p)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,p-&gt;data); </span><br><span class="line"> p=p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">linklist head;</span><br><span class="line">head=create();</span><br><span class="line">funa(head);</span><br><span class="line">funb(head);</span><br><span class="line">func(head);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="comment">/*1 2 3 4 5 -1*/</span> </span><br></pre></td></tr></table></figure><h5 id="练习2-求最值"><a href="#练习2-求最值" class="headerlink" title="练习2 求最值"></a>练习2 求最值</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span>;</span></span><br><span class="line"></span><br><span class="line">&#125;Node,*Linklist;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Linklist <span class="title function_">create</span><span class="params">()</span><span class="comment">//创建链表 </span></span><br><span class="line">&#123;</span><br><span class="line">Linklist h,r,s;</span><br><span class="line">h=(Linklist)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">r=h;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> m=<span class="number">1</span>;m!=<span class="number">-1</span>;m=s-&gt;data)<span class="comment">//以-1作结束标志 </span></span><br><span class="line">&#123;</span><br><span class="line">s=(Linklist)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s-&gt;data);</span><br><span class="line">r-&gt;next=s;</span><br><span class="line">r=s;</span><br><span class="line">&#125;</span><br><span class="line">r-&gt;next=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> h;</span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">find</span><span class="params">(Linklist listhead,<span class="type">int</span> *big,<span class="type">int</span> *small)</span><span class="comment">//求最值并输出 </span></span><br><span class="line">&#123;</span><br><span class="line">Linklist p;</span><br><span class="line">p=listhead-&gt;next;</span><br><span class="line">*big=p-&gt;data;</span><br><span class="line">*small=p-&gt;data;</span><br><span class="line"><span class="keyword">for</span>(;p-&gt;next!=<span class="number">0</span>;)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(p-&gt;data&gt;*big) *big=p-&gt;data;</span><br><span class="line"><span class="keyword">if</span>(p-&gt;data&lt;*small) *small=p-&gt;data;</span><br><span class="line">p=p-&gt;next;</span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span><span class="comment">//主函数 </span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> max,min;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请输入测试数据：&quot;</span>); </span><br><span class="line">Linklist head;</span><br><span class="line">head=create();</span><br><span class="line">find(head,&amp;max,&amp;min);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请输出最值：min=%d max=%d\n&quot;</span>,min,max) ;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br><span class="line"> <span class="comment">/*测试样例 4 25 90 34 17 86 63 48 51 15 -1*/</span></span><br></pre></td></tr></table></figure><h4 id="1-2-2-静态链表"><a href="#1-2-2-静态链表" class="headerlink" title="1.2.2 静态链表"></a>1.2.2 静态链表</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> maxsize 100</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">char</span> elemtype; </span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">elemtype data;</span><br><span class="line"><span class="type">int</span> cur;</span><br><span class="line">&#125;component,sqlinklist[maxsize];</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_list</span><span class="params">(sqlinklist space)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;maxsize<span class="number">-1</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">space[i].cur=i+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">space[maxsize<span class="number">-1</span>].cur=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">malloc_list</span><span class="params">(sqlinklist space)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> i=space[<span class="number">0</span>].cur;</span><br><span class="line"><span class="keyword">if</span>(i!=<span class="number">0</span>)</span><br><span class="line">space[<span class="number">0</span>].cur=space[i].cur;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line"> &#125; </span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">free_list</span><span class="params">(sqlinklist space,<span class="type">int</span> a)</span></span><br><span class="line">&#123;</span><br><span class="line">space[a].cur=space[<span class="number">0</span>].cur;</span><br><span class="line">space[<span class="number">0</span>].cur=a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">create_list</span><span class="params">(sqlinklist space,<span class="type">int</span> m)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> s,r,i;</span><br><span class="line">s=malloc_list(space);</span><br><span class="line">r=s;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">&#123;</span><br><span class="line">i=malloc_list(space);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;space[i].data);</span><br><span class="line">space[r].cur=i;</span><br><span class="line">r=i;</span><br><span class="line">&#125;</span><br><span class="line">space[r].cur=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">insert_list</span><span class="params">(sqlinklist space,<span class="type">int</span> r,elemtype b)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i=malloc_list(space);</span><br><span class="line">space[i].data=b;</span><br><span class="line">space[i].cur=space[r].cur;</span><br><span class="line">space[r].cur=i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">delete_list</span><span class="params">(sqlinklist space,<span class="type">int</span> s,elemtype c)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> p,q;</span><br><span class="line">q=s;</span><br><span class="line"><span class="keyword">while</span>(q)</span><br><span class="line">&#123;</span><br><span class="line">p=q;</span><br><span class="line">q=space[q].cur;</span><br><span class="line"><span class="keyword">if</span>(space[q].data==c) <span class="keyword">break</span>;</span><br><span class="line">&#125; </span><br><span class="line">space[p].cur=space[q].cur;</span><br><span class="line">free_list(space,q);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">locate_list</span><span class="params">(sqlinklist space,<span class="type">int</span> s,elemtype c)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> q;</span><br><span class="line">q=s;</span><br><span class="line"><span class="keyword">while</span>(q)</span><br><span class="line">&#123;</span><br><span class="line">q=space[q].cur;</span><br><span class="line"><span class="keyword">if</span>(space[q].data==c) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(q) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">traverse_list</span><span class="params">(sqlinklist space,<span class="type">int</span> s)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> q=space[s].cur;</span><br><span class="line"><span class="keyword">while</span>(q)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,space[q].data);</span><br><span class="line">q=space[q].cur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">sqlinklist space;</span><br><span class="line">init_list(space);</span><br><span class="line"><span class="type">int</span> m,n,s;</span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n);</span><br><span class="line">getchar();</span><br><span class="line">s=create_list(space,m);</span><br><span class="line"></span><br><span class="line">getchar();</span><br><span class="line"><span class="type">int</span> r=s;</span><br><span class="line"><span class="keyword">while</span>(r)</span><br><span class="line">&#123;</span><br><span class="line">r=space[r].cur;</span><br><span class="line"><span class="keyword">if</span>(space[r].cur==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;c);</span><br><span class="line"><span class="keyword">if</span>(locate_list(space,s,c)) delete_list(space,s,c);</span><br><span class="line"><span class="keyword">else</span> insert_list(space,r,c);</span><br><span class="line">&#125;</span><br><span class="line">traverse_list(space,s);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure><h4 id="1-2-3-循环链表"><a href="#1-2-3-循环链表" class="headerlink" title="1.2.3 循环链表"></a>1.2.3 循环链表</h4><p>将链表的最后一个结点与第一个结点连接起来，可从任意结点出发访问其它结点</p><h4 id="1-2-4-双向链表"><a href="#1-2-4-双向链表" class="headerlink" title="1.2.4 双向链表"></a>1.2.4 双向链表</h4><p>每个结点中有两个指针，一个指向其后继结点，另一个指向其前趋结点</p><h2 id="2-习题"><a href="#2-习题" class="headerlink" title="2 习题"></a>2 习题</h2><p>1.假设:有两个集合 A 和 B 分别用两个线性表 LA 和 LB 表示，设计算法，求一个新的集合A＝A∪B</p><p>==*加代码==</p><p>2.已知线性表LA和LB中的数据元素按值非递减有序排列，现要求将LA和LB归并为一个新的线性表LC，且LC中的数据元素仍按值非递减有序排列。</p><p>==*加代码==</p><h2 id="3-附录——ADT定义"><a href="#3-附录——ADT定义" class="headerlink" title="3 附录——ADT定义"></a>3 附录——ADT定义</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ADT List &#123;</span><br><span class="line">数据对象：D＝&#123;ai|ai∈ElemSet,i=<span class="number">1</span>,<span class="number">2</span>,...,n, n≥<span class="number">0</span> &#125;</span><br><span class="line">数据关系：R1＝&#123;&lt;ai<span class="number">-1</span> ,ai&gt;|ai<span class="number">-1</span> ,ai∈D, i=<span class="number">2</span>,...,n &#125;</span><br><span class="line">基本操作：</span><br><span class="line">InitList(&amp;L)</span><br><span class="line">    操作结果：构造一个空的线性表L。</span><br><span class="line">ListLength(L)</span><br><span class="line">    初始条件：线性表L已存在。</span><br><span class="line">    操作结果：返回L中元素个数。</span><br><span class="line">GetElem(L, i, &amp;e)</span><br><span class="line">    初始条件：线性表L已存在， <span class="number">1</span>≤i≤ListLength(L)</span><br><span class="line">    操作结果：用e返回L中第i个元素的值</span><br><span class="line">LocateElem(L, e, compare( ))</span><br><span class="line">    初始条件：线性表L已存在.</span><br><span class="line">    操作结果：返回L中第<span class="number">1</span>个与e满足关系compare( )的元素的位序，不存在则返回<span class="number">0</span>。重要：ADT中compare()这种形式，语言级别对应为函数指针！</span><br><span class="line">ListInsert(&amp;L, i, e)</span><br><span class="line">    初始条件：L已存在，<span class="number">1</span>≤i≤ListLength(L)+<span class="number">1</span></span><br><span class="line">    操作结果：在L的第i个位置插入新的元素e，L的长度增<span class="number">1</span></span><br><span class="line">ListDelete(&amp;L, i, &amp;e)</span><br><span class="line">    初始条件：L已存在且非空，<span class="number">1</span>≤i≤ListLength(L)</span><br><span class="line">    操作结果：删除L的第i个元素，并用e返回其值，L的长度减<span class="number">1</span></span><br><span class="line">ListTraverse(L, visit( ))</span><br><span class="line">    初始条件：线性表L已存在</span><br><span class="line">    操作结果：依次对L的每个数据元素调用visit()函数，若visit()失败则操作失败</span><br><span class="line">&#125;ADT  List</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>BASNet源码分析</title>
      <link href="posts/a5b7098.html"/>
      <url>posts/a5b7098.html</url>
      
        <content type="html"><![CDATA[<p>This article is mainly about my analysis of  basnet source code.  If you get any problems，you can ask me on the <a href="https://github.com/xiaoyue-hou/xiaoyue-hou.github.io">GitHub</a>.</p><h2 id="1-data-loader"><a href="#1-data-loader" class="headerlink" title="1. data_loader"></a>1. data_loader</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function, division    <span class="comment">#在版本2中使用3中功能</span></span><br><span class="line"><span class="keyword">import</span> glob                                        <span class="comment">#用于文件操作的模块</span></span><br><span class="line"><span class="keyword">import</span> torch                                       <span class="comment">#包含多维张量的数据结构及运算</span></span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> io, transform, color           <span class="comment">#数字图像处理包</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np                                 <span class="comment">#用于数学数组，矩阵计算</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt                    <span class="comment">#绘图</span></span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader   <span class="comment">#加载数据集</span></span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms, utils          <span class="comment">#对PIL.Image进行变换</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image                              <span class="comment">#图像处理</span></span><br></pre></td></tr></table></figure><h3 id="1-1-调整图片大小"><a href="#1-1-调整图片大小" class="headerlink" title="1.1 调整图片大小"></a>1.1 调整图片大小</h3><h4 id="1-1-1-缩放到输出大小——正方形"><a href="#1-1-1-缩放到输出大小——正方形" class="headerlink" title="1.1.1 缩放到输出大小——正方形"></a>1.1.1 缩放到输出大小——正方形</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RescaleT</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,output_size</span>):</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">isinstance</span>(output_size,(<span class="built_in">int</span>,<span class="built_in">tuple</span>))</span><br><span class="line">        <span class="comment">#判断output_size与元组展平列表是否类型相同，若不相同抛出异常</span></span><br><span class="line"><span class="variable language_">self</span>.output_size = output_size</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,sample</span>):</span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>],sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">h, w = image.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(<span class="variable language_">self</span>.output_size,<span class="built_in">int</span>):</span><br><span class="line"><span class="keyword">if</span> h &gt; w:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size*h/w,<span class="variable language_">self</span>.output_size</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size,<span class="variable language_">self</span>.output_size*w/h</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size</span><br><span class="line"></span><br><span class="line">new_h, new_w = <span class="built_in">int</span>(new_h), <span class="built_in">int</span>(new_w)</span><br><span class="line"></span><br><span class="line"><span class="comment"># #resize the image to new_h x new_w and convert image from range [0,255] to [0,1]</span></span><br><span class="line"><span class="comment"># img = transform.resize(image,(new_h,new_w),mode=&#x27;constant&#x27;)</span></span><br><span class="line"><span class="comment"># lbl = transform.resize(label,(new_h,new_w),mode=&#x27;constant&#x27;, order=0, preserve_range=True)</span></span><br><span class="line"></span><br><span class="line">img = transform.resize(image,(<span class="variable language_">self</span>.output_size,<span class="variable language_">self</span>.output_size),mode=<span class="string">&#x27;constant&#x27;</span>)</span><br><span class="line">lbl = transform.resize(label,(<span class="variable language_">self</span>.output_size,<span class="variable language_">self</span>.output_size),mode=<span class="string">&#x27;constant&#x27;</span>, order=<span class="number">0</span>, preserve_range=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>:img,<span class="string">&#x27;label&#x27;</span>:lbl&#125;</span><br></pre></td></tr></table></figure><h4 id="1-1-2-按比例缩放到输出大小"><a href="#1-1-2-按比例缩放到输出大小" class="headerlink" title="1.1.2 按比例缩放到输出大小"></a>1.1.2 按比例缩放到输出大小</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rescale</span>(<span class="title class_ inherited__">object</span>):<span class="comment">#将图像按比例缩放到输出大小（较小边为output_size）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,output_size</span>):</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">isinstance</span>(output_size,(<span class="built_in">int</span>,<span class="built_in">tuple</span>))</span><br><span class="line"><span class="variable language_">self</span>.output_size = output_size</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,sample</span>):</span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>],sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">h, w = image.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(<span class="variable language_">self</span>.output_size,<span class="built_in">int</span>):</span><br><span class="line"><span class="keyword">if</span> h &gt; w:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size*h/w,<span class="variable language_">self</span>.output_size</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size,<span class="variable language_">self</span>.output_size*w/h</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size</span><br><span class="line"></span><br><span class="line">new_h, new_w = <span class="built_in">int</span>(new_h), <span class="built_in">int</span>(new_w)</span><br><span class="line"></span><br><span class="line"><span class="comment"># #resize the image to new_h x new_w and convert image from range [0,255] to [0,1]</span></span><br><span class="line">img = transform.resize(image,(new_h,new_w),mode=<span class="string">&#x27;constant&#x27;</span>)</span><br><span class="line">lbl = transform.resize(label,(new_h,new_w),mode=<span class="string">&#x27;constant&#x27;</span>, order=<span class="number">0</span>, preserve_range=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>:img,<span class="string">&#x27;label&#x27;</span>:lbl&#125;</span><br></pre></td></tr></table></figure><h4 id="1-1-3-从中心剪裁成输出大小"><a href="#1-1-3-从中心剪裁成输出大小" class="headerlink" title="1.1.3 从中心剪裁成输出大小"></a>1.1.3 从中心剪裁成输出大小</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CenterCrop</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,output_size</span>):</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">isinstance</span>(output_size, (<span class="built_in">int</span>, <span class="built_in">tuple</span>))</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(output_size, <span class="built_in">int</span>):</span><br><span class="line"><span class="variable language_">self</span>.output_size = (output_size, output_size)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">len</span>(output_size) == <span class="number">2</span></span><br><span class="line"><span class="variable language_">self</span>.output_size = output_size</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,sample</span>):</span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>], sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">h, w = image.shape[:<span class="number">2</span>]</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;h: %d, w: %d, new_h: %d, new_w: %d&quot;%(h, w, new_h, new_w))</span></span><br><span class="line"><span class="keyword">assert</span>((h &gt;= new_h) <span class="keyword">and</span> (w &gt;= new_w))</span><br><span class="line"></span><br><span class="line">h_offset = <span class="built_in">int</span>(math.floor((h - new_h)/<span class="number">2</span>))</span><br><span class="line">w_offset = <span class="built_in">int</span>(math.floor((w - new_w)/<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">image = image[h_offset: h_offset + new_h, w_offset: w_offset + new_w] <span class="comment">#从中心裁剪</span></span><br><span class="line">label = label[h_offset: h_offset + new_h, w_offset: w_offset + new_w]</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>: image, <span class="string">&#x27;label&#x27;</span>: label&#125;</span><br></pre></td></tr></table></figure><h4 id="1-1-4-随机剪裁成输出大小"><a href="#1-1-4-随机剪裁成输出大小" class="headerlink" title="1.1.4 随机剪裁成输出大小"></a>1.1.4 随机剪裁成输出大小</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RandomCrop</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,output_size</span>):</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">isinstance</span>(output_size, (<span class="built_in">int</span>, <span class="built_in">tuple</span>))</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(output_size, <span class="built_in">int</span>):</span><br><span class="line"><span class="variable language_">self</span>.output_size = (output_size, output_size)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">len</span>(output_size) == <span class="number">2</span></span><br><span class="line"><span class="variable language_">self</span>.output_size = output_size</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,sample</span>):</span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>], sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">h, w = image.shape[:<span class="number">2</span>]</span><br><span class="line">new_h, new_w = <span class="variable language_">self</span>.output_size</span><br><span class="line"></span><br><span class="line">top = np.random.randint(<span class="number">0</span>, h - new_h)</span><br><span class="line">left = np.random.randint(<span class="number">0</span>, w - new_w)</span><br><span class="line"></span><br><span class="line">image = image[top: top + new_h, left: left + new_w]</span><br><span class="line">label = label[top: top + new_h, left: left + new_w]</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>: image, <span class="string">&#x27;label&#x27;</span>: label&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-将n维数组转换成张量"><a href="#1-2-将n维数组转换成张量" class="headerlink" title="1.2 将n维数组转换成张量"></a>1.2 将n维数组转换成张量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ToTensor</span>(<span class="title class_ inherited__">object</span>):<span class="comment">#</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;Convert ndarrays in sample to Tensors.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, sample</span>):</span><br><span class="line"></span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>], sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">tmpImg = np.zeros((image.shape[<span class="number">0</span>],image.shape[<span class="number">1</span>],<span class="number">3</span>))</span><br><span class="line">        <span class="comment">#zeros返回来一个给定形状和类型的用0填充的数组，是x行，y列，z层的</span></span><br><span class="line">tmpLbl = np.zeros(label.shape)</span><br><span class="line"></span><br><span class="line">image = image/np.<span class="built_in">max</span>(image) <span class="comment">#将范围调至0-1 </span></span><br><span class="line"><span class="keyword">if</span>(np.<span class="built_in">max</span>(label)&lt;<span class="number">1e-6</span>):</span><br><span class="line">label = label</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">label = label/np.<span class="built_in">max</span>(label)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> image.shape[<span class="number">2</span>]==<span class="number">1</span>:<span class="comment">#单色度</span></span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (image[:,:,<span class="number">1</span>]-<span class="number">0.456</span>)/<span class="number">0.224</span></span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (image[:,:,<span class="number">2</span>]-<span class="number">0.406</span>)/<span class="number">0.225</span></span><br><span class="line"></span><br><span class="line">tmpLbl[:,:,<span class="number">0</span>] = label[:,:,<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># change the r,g,b to b,r,g from [0,255] to [0,1]</span></span><br><span class="line"><span class="comment">#transforms.Normalize(mean = (0.485, 0.456, 0.406), std = (0.229, 0.224, 0.225)) mean和std表示图像集每个通道的均值和均方差序列，训练imagenet数据时通常设置为这些数</span></span><br><span class="line">tmpImg = tmpImg.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))<span class="comment">#类似矩阵转置</span></span><br><span class="line">tmpLbl = label.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>: torch.from_numpy(tmpImg),</span><br><span class="line"><span class="string">&#x27;label&#x27;</span>: torch.from_numpy(tmpLbl)&#125;</span><br><span class="line">    <span class="comment">#将n维数组转换成张量,返回的张量和ndarray共享同一内存。对张量的修改将反映在ndarray中，反之亦然。返回的张量是不能调整大小的。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ToTensorLab</span>(<span class="title class_ inherited__">object</span>):<span class="comment">#与上一个相同，但考虑到了颜色空间</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;Convert ndarrays in sample to Tensors.&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,flag=<span class="number">0</span></span>):</span><br><span class="line"><span class="variable language_">self</span>.flag = flag</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, sample</span>):</span><br><span class="line"></span><br><span class="line">image, label = sample[<span class="string">&#x27;image&#x27;</span>], sample[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">tmpLbl = np.zeros(label.shape)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(np.<span class="built_in">max</span>(label)&lt;<span class="number">1e-6</span>):</span><br><span class="line">label = label</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">label = label/np.<span class="built_in">max</span>(label)</span><br><span class="line"></span><br><span class="line"><span class="comment"># change the color space从RGB颜色空间转为LAB颜色空间，它是用数字化的方法来描述人的视觉感应。</span></span><br><span class="line"><span class="comment">#Lab颜色空间中的L分量用于表示像素的亮度，取值范围是[0,100],表示从纯黑到纯白；a表示从红色到绿色的范围，取值范围是[127,-128]；b表示从黄色到蓝色的范围，取值范围是[127,-128]。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="variable language_">self</span>.flag == <span class="number">2</span>: <span class="comment"># with rgb and Lab colors</span></span><br><span class="line">tmpImg = np.zeros((image.shape[<span class="number">0</span>],image.shape[<span class="number">1</span>],<span class="number">6</span>))</span><br><span class="line">tmpImgt = np.zeros((image.shape[<span class="number">0</span>],image.shape[<span class="number">1</span>],<span class="number">3</span>))</span><br><span class="line"><span class="keyword">if</span> image.shape[<span class="number">2</span>]==<span class="number">1</span>:</span><br><span class="line">tmpImgt[:,:,<span class="number">0</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line">tmpImgt[:,:,<span class="number">1</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line">tmpImgt[:,:,<span class="number">2</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">tmpImgt = image</span><br><span class="line">tmpImgtl = color.rgb2lab(tmpImgt)<span class="comment">#将RGB三元组转换成lab三元组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nomalize image to range [0,1]</span></span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (tmpImgt[:,:,<span class="number">0</span>]-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">0</span>]))/(np.<span class="built_in">max</span>(tmpImgt[:,:,<span class="number">0</span>])-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">0</span>]))<span class="comment">#3个通道是rgb</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (tmpImgt[:,:,<span class="number">1</span>]-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">1</span>]))/(np.<span class="built_in">max</span>(tmpImgt[:,:,<span class="number">1</span>])-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">1</span>]))</span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (tmpImgt[:,:,<span class="number">2</span>]-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">2</span>]))/(np.<span class="built_in">max</span>(tmpImgt[:,:,<span class="number">2</span>])-np.<span class="built_in">min</span>(tmpImgt[:,:,<span class="number">2</span>]))</span><br><span class="line">tmpImg[:,:,<span class="number">3</span>] = (tmpImgtl[:,:,<span class="number">0</span>]-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">0</span>]))/(np.<span class="built_in">max</span>(tmpImgtl[:,:,<span class="number">0</span>])-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">0</span>]))<span class="comment">#3个通道是lab</span></span><br><span class="line">tmpImg[:,:,<span class="number">4</span>] = (tmpImgtl[:,:,<span class="number">1</span>]-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">1</span>]))/(np.<span class="built_in">max</span>(tmpImgtl[:,:,<span class="number">1</span>])-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">1</span>]))</span><br><span class="line">tmpImg[:,:,<span class="number">5</span>] = (tmpImgtl[:,:,<span class="number">2</span>]-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">2</span>]))/(np.<span class="built_in">max</span>(tmpImgtl[:,:,<span class="number">2</span>])-np.<span class="built_in">min</span>(tmpImgtl[:,:,<span class="number">2</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># tmpImg = tmpImg/(np.max(tmpImg)-np.min(tmpImg))</span></span><br><span class="line"></span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (tmpImg[:,:,<span class="number">0</span>]-np.mean(tmpImg[:,:,<span class="number">0</span>]))/np.std(tmpImg[:,:,<span class="number">0</span>])<span class="comment">#与均值的差/均方差</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (tmpImg[:,:,<span class="number">1</span>]-np.mean(tmpImg[:,:,<span class="number">1</span>]))/np.std(tmpImg[:,:,<span class="number">1</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (tmpImg[:,:,<span class="number">2</span>]-np.mean(tmpImg[:,:,<span class="number">2</span>]))/np.std(tmpImg[:,:,<span class="number">2</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">3</span>] = (tmpImg[:,:,<span class="number">3</span>]-np.mean(tmpImg[:,:,<span class="number">3</span>]))/np.std(tmpImg[:,:,<span class="number">3</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">4</span>] = (tmpImg[:,:,<span class="number">4</span>]-np.mean(tmpImg[:,:,<span class="number">4</span>]))/np.std(tmpImg[:,:,<span class="number">4</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">5</span>] = (tmpImg[:,:,<span class="number">5</span>]-np.mean(tmpImg[:,:,<span class="number">5</span>]))/np.std(tmpImg[:,:,<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> <span class="variable language_">self</span>.flag == <span class="number">1</span>: <span class="comment">#with Lab color</span></span><br><span class="line">tmpImg = np.zeros((image.shape[<span class="number">0</span>],image.shape[<span class="number">1</span>],<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> image.shape[<span class="number">2</span>]==<span class="number">1</span>:</span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = image[:,:,<span class="number">0</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">tmpImg = image</span><br><span class="line"></span><br><span class="line">tmpImg = color.rgb2lab(tmpImg)</span><br><span class="line"></span><br><span class="line"><span class="comment"># tmpImg = tmpImg/(np.max(tmpImg)-np.min(tmpImg))</span></span><br><span class="line"></span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (tmpImg[:,:,<span class="number">0</span>]-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">0</span>]))/(np.<span class="built_in">max</span>(tmpImg[:,:,<span class="number">0</span>])-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">0</span>]))</span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (tmpImg[:,:,<span class="number">1</span>]-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">1</span>]))/(np.<span class="built_in">max</span>(tmpImg[:,:,<span class="number">1</span>])-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">1</span>]))</span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (tmpImg[:,:,<span class="number">2</span>]-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">2</span>]))/(np.<span class="built_in">max</span>(tmpImg[:,:,<span class="number">2</span>])-np.<span class="built_in">min</span>(tmpImg[:,:,<span class="number">2</span>]))</span><br><span class="line"></span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (tmpImg[:,:,<span class="number">0</span>]-np.mean(tmpImg[:,:,<span class="number">0</span>]))/np.std(tmpImg[:,:,<span class="number">0</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (tmpImg[:,:,<span class="number">1</span>]-np.mean(tmpImg[:,:,<span class="number">1</span>]))/np.std(tmpImg[:,:,<span class="number">1</span>])</span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (tmpImg[:,:,<span class="number">2</span>]-np.mean(tmpImg[:,:,<span class="number">2</span>]))/np.std(tmpImg[:,:,<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>: <span class="comment"># with rgb color</span></span><br><span class="line">tmpImg = np.zeros((image.shape[<span class="number">0</span>],image.shape[<span class="number">1</span>],<span class="number">3</span>))</span><br><span class="line">image = image/np.<span class="built_in">max</span>(image)</span><br><span class="line"><span class="keyword">if</span> image.shape[<span class="number">2</span>]==<span class="number">1</span>:</span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">tmpImg[:,:,<span class="number">0</span>] = (image[:,:,<span class="number">0</span>]-<span class="number">0.485</span>)/<span class="number">0.229</span></span><br><span class="line">tmpImg[:,:,<span class="number">1</span>] = (image[:,:,<span class="number">1</span>]-<span class="number">0.456</span>)/<span class="number">0.224</span></span><br><span class="line">tmpImg[:,:,<span class="number">2</span>] = (image[:,:,<span class="number">2</span>]-<span class="number">0.406</span>)/<span class="number">0.225</span></span><br><span class="line"></span><br><span class="line">tmpLbl[:,:,<span class="number">0</span>] = label[:,:,<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># change the r,g,b to b,r,g from [0,255] to [0,1]</span></span><br><span class="line"><span class="comment">#transforms.Normalize(mean = (0.485, 0.456, 0.406), std = (0.229, 0.224, 0.225))</span></span><br><span class="line">tmpImg = tmpImg.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">tmpLbl = label.transpose((<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> &#123;<span class="string">&#x27;image&#x27;</span>: torch.from_numpy(tmpImg),</span><br><span class="line"><span class="string">&#x27;label&#x27;</span>: torch.from_numpy(tmpLbl)&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-读取照片转换成数组"><a href="#1-3-读取照片转换成数组" class="headerlink" title="1.3  读取照片转换成数组"></a>1.3  读取照片转换成数组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SalObjDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,img_name_list,lbl_name_list,transform=<span class="literal">None</span></span>):</span><br><span class="line"><span class="comment"># self.root_dir = root_dir</span></span><br><span class="line"><span class="comment"># self.image_name_list = glob.glob(image_dir+&#x27;*.png&#x27;)</span></span><br><span class="line"><span class="comment"># self.label_name_list = glob.glob(label_dir+&#x27;*.png&#x27;)</span></span><br><span class="line"><span class="variable language_">self</span>.image_name_list = img_name_list</span><br><span class="line"><span class="variable language_">self</span>.label_name_list = lbl_name_list</span><br><span class="line"><span class="variable language_">self</span>.transform = transform</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.image_name_list)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self,idx</span>):</span><br><span class="line"><span class="comment">#image=Image.open(self.image_name_list[idx])#io.imread(self.image_name_list[idx])</span></span><br><span class="line"><span class="comment">#label = Image.open(self.label_name_list[idx])#io.imread(self.label_name_list[idx])</span></span><br><span class="line"></span><br><span class="line">image = io.imread(<span class="variable language_">self</span>.image_name_list[idx])</span><br><span class="line"><span class="comment">#用于读取图片文件。io.imread读出图片格式是uint8(unsigned int)；value是numpy array。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span>==<span class="built_in">len</span>(<span class="variable language_">self</span>.label_name_list)):<span class="comment">#读入标签，考虑了标签是否存在情况</span></span><br><span class="line">label_3 = np.zeros(image.shape)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">label_3 = io.imread(<span class="variable language_">self</span>.label_name_list[idx])</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(&quot;len of label3&quot;)</span></span><br><span class="line"><span class="comment">#print(len(label_3.shape))</span></span><br><span class="line"><span class="comment">#print(label_3.shape)</span></span><br><span class="line"></span><br><span class="line">label = np.zeros(label_3.shape[<span class="number">0</span>:<span class="number">2</span>])<span class="comment">#初始化标签数组值</span></span><br><span class="line"><span class="keyword">if</span>(<span class="number">3</span>==<span class="built_in">len</span>(label_3.shape)):</span><br><span class="line">label = label_3[:,:,<span class="number">0</span>]</span><br><span class="line"><span class="keyword">elif</span>(<span class="number">2</span>==<span class="built_in">len</span>(label_3.shape)):</span><br><span class="line">label = label_3</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">3</span>==<span class="built_in">len</span>(image.shape) <span class="keyword">and</span> <span class="number">2</span>==<span class="built_in">len</span>(label.shape)):<span class="comment">#将照片和标签都整成3维的</span></span><br><span class="line">label = label[:,:,np.newaxis]</span><br><span class="line"><span class="keyword">elif</span>(<span class="number">2</span>==<span class="built_in">len</span>(image.shape) <span class="keyword">and</span> <span class="number">2</span>==<span class="built_in">len</span>(label.shape)):</span><br><span class="line">image = image[:,:,np.newaxis]</span><br><span class="line">label = label[:,:,np.newaxis]</span><br><span class="line"></span><br><span class="line"><span class="comment"># #vertical flipping垂直翻转</span></span><br><span class="line"><span class="comment"># # fliph = np.random.randn(1)</span></span><br><span class="line"><span class="comment"># flipv = np.random.randn(1)</span></span><br><span class="line"><span class="comment">#randn函数返回一个或一组样本，具有标准正态分布。dn表示每个维度，返回值为指定维度的array</span></span><br><span class="line"><span class="comment"># if flipv&gt;0:</span></span><br><span class="line"><span class="comment"># image = image[::-1,:,:]#表示将图像向下翻转180°</span></span><br><span class="line"><span class="comment"># label = label[::-1,:,:]</span></span><br><span class="line"><span class="comment"># #vertical flip</span></span><br><span class="line"></span><br><span class="line">sample = &#123;<span class="string">&#x27;image&#x27;</span>:image, <span class="string">&#x27;label&#x27;</span>:label&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="variable language_">self</span>.transform:</span><br><span class="line">sample = <span class="variable language_">self</span>.transform(sample)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sample</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-basnet-train"><a href="#2-basnet-train" class="headerlink" title="2. basnet_train"></a>2. basnet_train</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision <span class="comment">#torchvision包含一些常用的数据集、模型、转换函数等</span></span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable </span><br><span class="line"><span class="comment">#动态变化求梯度，可逐渐生成计算图，将计算节点连接起来，进行误差反向传递</span></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn <span class="comment">#用于创建和训练神经网络</span></span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader<span class="comment">#加载数据集</span></span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms, utils<span class="comment">#对PIL.Image进行变换</span></span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim<span class="comment">#实现了各种优化算法的库</span></span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> standard_transforms</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> Rescale</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> RescaleT</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> RandomCrop</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> CenterCrop</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> ToTensor</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> ToTensorLab</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> SalObjDataset</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> BASNet</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pytorch_ssim</span><br><span class="line"><span class="keyword">import</span> pytorch_iou</span><br></pre></td></tr></table></figure><h3 id="2-1-损失函数"><a href="#2-1-损失函数" class="headerlink" title="2.1 损失函数"></a>2.1 损失函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">bce_loss = nn.BCELoss(size_average=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#计算目标值和预测值之间的二进制交叉熵损失函数。返回loss均值</span></span><br><span class="line">ssim_loss = pytorch_ssim.SSIM(window_size=<span class="number">11</span>,size_average=<span class="literal">True</span>)</span><br><span class="line">iou_loss = pytorch_iou.IOU(size_average=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bce_ssim_loss</span>(<span class="params">pred,target</span>):</span><br><span class="line"></span><br><span class="line">bce_out = bce_loss(pred,target)</span><br><span class="line">ssim_out = <span class="number">1</span> - ssim_loss(pred,target)</span><br><span class="line">iou_out = iou_loss(pred,target)</span><br><span class="line"></span><br><span class="line">loss = bce_out + ssim_out + iou_out</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> loss</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">muti_bce_loss_fusion</span>(<span class="params">d0, d1, d2, d3, d4, d5, d6, d7, labels_v</span>):</span><br><span class="line"></span><br><span class="line">loss0 = bce_ssim_loss(d0,labels_v)</span><br><span class="line">loss1 = bce_ssim_loss(d1,labels_v)</span><br><span class="line">loss2 = bce_ssim_loss(d2,labels_v)</span><br><span class="line">loss3 = bce_ssim_loss(d3,labels_v)</span><br><span class="line">loss4 = bce_ssim_loss(d4,labels_v)</span><br><span class="line">loss5 = bce_ssim_loss(d5,labels_v)</span><br><span class="line">loss6 = bce_ssim_loss(d6,labels_v)</span><br><span class="line">loss7 = bce_ssim_loss(d7,labels_v)</span><br><span class="line"><span class="comment">#ssim0 = 1 - ssim_loss(d0,labels_v)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iou0 = iou_loss(d0,labels_v)</span></span><br><span class="line"><span class="comment">#loss = torch.pow(torch.mean(torch.abs(labels_v-d0)),2)*(5.0*loss0 + loss1 + loss2 + loss3 + loss4 + loss5) #+ 5.0*lossa</span></span><br><span class="line">loss = loss0 + loss1 + loss2 + loss3 + loss4 + loss5 + loss6 + loss7<span class="comment">#+ 5.0*lossa</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;l0: %3f, l1: %3f, l2: %3f, l3: %3f, l4: %3f, l5: %3f, l6: %3f\n&quot;</span>%(loss0.data[<span class="number">0</span>],loss1.data[<span class="number">0</span>],loss2.data[<span class="number">0</span>],loss3.data[<span class="number">0</span>],loss4.data[<span class="number">0</span>],loss5.data[<span class="number">0</span>],loss6.data[<span class="number">0</span>]))</span><br><span class="line"><span class="comment"># print(&quot;BCE: l1:%3f, l2:%3f, l3:%3f, l4:%3f, l5:%3f, la:%3f, all:%3f\n&quot;%(loss1.data[0],loss2.data[0],loss3.data[0],loss4.data[0],loss5.data[0],lossa.data[0],loss.data[0]))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> loss0, loss</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-设置训练数据集的目录"><a href="#2-2-设置训练数据集的目录" class="headerlink" title="2.2 设置训练数据集的目录"></a>2.2 设置训练数据集的目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">data_dir = <span class="string">&#x27;./train_data/&#x27;</span></span><br><span class="line">tra_image_dir = <span class="string">&#x27;DUTS/DUTS-TR/DUTS-TR/im_aug/&#x27;</span></span><br><span class="line">tra_label_dir = <span class="string">&#x27;DUTS/DUTS-TR/DUTS-TR/gt_aug/&#x27;</span></span><br><span class="line"></span><br><span class="line">image_ext = <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">label_ext = <span class="string">&#x27;.png&#x27;</span></span><br><span class="line"></span><br><span class="line">model_dir = <span class="string">&quot;./saved_models/basnet_bsi/&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">epoch_num = <span class="number">100000</span><span class="comment">#训练几遍</span></span><br><span class="line">batch_size_train = <span class="number">8</span> <span class="comment">#1次训练使用的样本量</span></span><br><span class="line">batch_size_val = <span class="number">1</span></span><br><span class="line">train_num = <span class="number">0</span></span><br><span class="line">val_num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">tra_img_name_list = glob.glob(data_dir + tra_image_dir + <span class="string">&#x27;*&#x27;</span> + image_ext)<span class="comment">#返回所有匹配的文件路径列表&#x27;./train_data/DUTS/DUTS-TR/DUTS-TR/im_aug/*.jpg&#x27;</span></span><br><span class="line"></span><br><span class="line">tra_lbl_name_list = []</span><br><span class="line"><span class="keyword">for</span> img_path <span class="keyword">in</span> tra_img_name_list:</span><br><span class="line">img_name = img_path.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>]<span class="comment"># 以‘/ ’为分割符，保留最后一段*.jpg</span></span><br><span class="line"></span><br><span class="line">aaa = img_name.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">bbb = aaa[<span class="number">0</span>:-<span class="number">1</span>]</span><br><span class="line">imidx = bbb[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(bbb)):</span><br><span class="line">imidx = imidx + <span class="string">&quot;.&quot;</span> + bbb[i]</span><br><span class="line"></span><br><span class="line">tra_lbl_name_list.append(data_dir + tra_label_dir + imidx + label_ext)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;train images: &quot;</span>, <span class="built_in">len</span>(tra_img_name_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;train labels: &quot;</span>, <span class="built_in">len</span>(tra_lbl_name_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---&quot;</span>)</span><br><span class="line"></span><br><span class="line">train_num = <span class="built_in">len</span>(tra_img_name_list)</span><br><span class="line"></span><br><span class="line">salobj_dataset = SalObjDataset(</span><br><span class="line">    img_name_list=tra_img_name_list,</span><br><span class="line">    lbl_name_list=tra_lbl_name_list,</span><br><span class="line">    transform=transforms.Compose([ <span class="comment">#这个类的主要作用是串联多个图片变换的操作</span></span><br><span class="line">        RescaleT(<span class="number">256</span>),  <span class="comment">#将图像缩放到输出256*256</span></span><br><span class="line">        RandomCrop(<span class="number">224</span>),<span class="comment">#随机剪裁成224*224</span></span><br><span class="line">        ToTensorLab(flag=<span class="number">0</span>)]))<span class="comment">#将n维数组转换成张量（数值在0-1之间，且是brg）,flag=0是只有rgb空间</span></span><br><span class="line">salobj_dataloader = DataLoader(salobj_dataset, batch_size=batch_size_train, shuffle=<span class="literal">True</span>, num_workers=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#shuffle(是否进行shuffle操作), num_workers(加载数据的时候使用几个子进程)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-3-定义模型"><a href="#2-3-定义模型" class="headerlink" title="2.3 定义模型"></a>2.3 定义模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define the net</span></span><br><span class="line">net = BASNet(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    net.cuda()</span><br></pre></td></tr></table></figure><h3 id="2-4-优化"><a href="#2-4-优化" class="headerlink" title="2.4 优化"></a>2.4 优化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---define optimizer...&quot;</span>)</span><br><span class="line">optimizer = optim.Adam(net.parameters(), lr=<span class="number">0.001</span>, betas=(<span class="number">0.9</span>, <span class="number">0.999</span>), eps=<span class="number">1e-08</span>, weight_decay=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 待优化参数或参数组，构建好神经网络后，网络的参数都保存在parameters()函数当中</span></span><br><span class="line"><span class="comment">#lr (float, 可选) – 学习率（默认：1e-3）,lr：同样也称为学习率或步长因子，它控制了权重的更新比率（如 0.001）。较大的值（如 0.3）在学习率更新前会有更快的初始学习，而较小的值（如 1.0E-5）会令训练收敛到更好的性能。</span></span><br><span class="line"><span class="comment">#betas (Tuple[float, float], 可选) – 用于计算梯度以及梯度平方的运行平均值的系数（默认：0.9，0.999）beta1：一阶矩估计的指数衰减率（如 0.9）。beta2：二阶矩估计的指数衰减率（如 0.999）。该超参数在稀疏梯度（如在 NLP 或计算机视觉任务中）中应该设置为接近 1 的数。</span></span><br><span class="line"><span class="comment">#eps (float, 可选) – 为了增加数值计算的稳定性而加到分母里的项（默认：1e-8）</span></span><br><span class="line"><span class="comment">#weight_decay (float, 可选) – 权重衰减（L2惩罚）（默认: 0）</span></span><br></pre></td></tr></table></figure><h3 id="2-5-训练过程"><a href="#2-5-训练过程" class="headerlink" title="2.5 训练过程"></a>2.5 训练过程</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---start training...&quot;</span>)</span><br><span class="line">ite_num = <span class="number">0</span> <span class="comment">#从开始到训练结束的迭代次数</span></span><br><span class="line">running_loss = <span class="number">0.0</span> <span class="comment">#每2000次迭代累计的7个维度损失相加</span></span><br><span class="line">running_tar_loss = <span class="number">0.0</span> <span class="comment">#每2000次迭代累计的最后一层的损失相加</span></span><br><span class="line">ite_num4val = <span class="number">0</span> <span class="comment">#每训练一轮的迭代次数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, epoch_num): <span class="comment">#训练10w轮</span></span><br><span class="line">    net.train()</span><br><span class="line"><span class="comment">#net.eval（）在非训练的时候是需要加的，没有这句代码，一些网络层的值会发生变动，不会固定，神经网络每一次生成的结果也是不固定的，如droupout层和BN层，生成质量可能好也可能不好。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(salobj_dataloader): <span class="comment">#一次读8张</span></span><br><span class="line">        <span class="comment">#enumerate() 函数用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在 for 循环当中。</span></span><br><span class="line">        ite_num = ite_num + <span class="number">1</span></span><br><span class="line">        ite_num4val = ite_num4val + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        inputs, labels = data[<span class="string">&#x27;image&#x27;</span>], data[<span class="string">&#x27;label&#x27;</span>]</span><br><span class="line"></span><br><span class="line">        inputs = inputs.<span class="built_in">type</span>(torch.FloatTensor)<span class="comment">#张量转换成浮点型</span></span><br><span class="line">        labels = labels.<span class="built_in">type</span>(torch.FloatTensor)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># wrap them in Variable</span></span><br><span class="line">        <span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">            inputs_v, labels_v = Variable(inputs.cuda(), requires_grad=<span class="literal">False</span>), Variable(labels.cuda(),</span><br><span class="line">                                                                                        requires_grad=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            inputs_v, labels_v = Variable(inputs, requires_grad=<span class="literal">False</span>), Variable(labels, requires_grad=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># y zero the parameter gradients 优化置0</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># forward + backward + optimize</span></span><br><span class="line">        d0, d1, d2, d3, d4, d5, d6, d7 = net(inputs_v) <span class="comment">#net应该是个4维的，得到前向反馈结果</span></span><br><span class="line">        loss2, loss = muti_bce_loss_fusion(d0, d1, d2, d3, d4, d5, d6, d7, labels_v)</span><br><span class="line"></span><br><span class="line">        loss.backward() <span class="comment"># 反向传播,计算当前梯度</span></span><br><span class="line">        optimizer.step() <span class="comment">#根据梯度更新网络参数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># # print statistics</span></span><br><span class="line">        running_loss += loss.data[<span class="number">0</span>] <span class="comment">#每2000次迭代累计的7维度混和损失</span></span><br><span class="line">        running_tar_loss += loss2.data[<span class="number">0</span>] <span class="comment">#每2000次迭代最后一层（输出层）累计的混合损失</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># del temporary outputs and loss</span></span><br><span class="line">        <span class="keyword">del</span> d0, d1, d2, d3, d4, d5, d6, d7, loss2, loss</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;[epoch: %3d/%3d, batch: %5d/%5d, ite: %d] train loss: %3f, tar: %3f &quot;</span> % (</span><br><span class="line">        epoch + <span class="number">1</span>, epoch_num, (i + <span class="number">1</span>) * batch_size_train, train_num, ite_num, running_loss / ite_num4val, running_tar_loss / ite_num4val))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ite_num % <span class="number">2000</span> == <span class="number">0</span>:  <span class="comment"># save model every 2000 iterations</span></span><br><span class="line">            <span class="comment">#每2000次存一次模型</span></span><br><span class="line"></span><br><span class="line">            torch.save(net.state_dict(), model_dir + <span class="string">&quot;basnet_bsi_itr_%d_train_%3f_tar_%3f.pth&quot;</span> % (ite_num, running_loss / ite_num4val, running_tar_loss / ite_num4val))</span><br><span class="line">            running_loss = <span class="number">0.0</span></span><br><span class="line">            running_tar_loss = <span class="number">0.0</span></span><br><span class="line">            net.train()  <span class="comment"># resume train</span></span><br><span class="line">            ite_num4val = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-------------Congratulations! Training Done!!!-------------&#x27;</span>)</span><br></pre></td></tr></table></figure><img src="/posts/a5b7098.htm/a5b7098/1.jpg" class><img src="/posts/a5b7098.htm/a5b7098/2.jpg" class><h2 id="3-basnet-test"><a href="#3-basnet-test" class="headerlink" title="3. basnet_test"></a>3. basnet_test</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> skimage <span class="keyword">import</span> io, transform</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms<span class="comment">#, utils</span></span><br><span class="line"><span class="comment"># import torch.optim as optim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> RescaleT</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> CenterCrop</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> ToTensor</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> ToTensorLab</span><br><span class="line"><span class="keyword">from</span> data_loader <span class="keyword">import</span> SalObjDataset</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> BASNet</span><br></pre></td></tr></table></figure><h3 id="3-1-标准化"><a href="#3-1-标准化" class="headerlink" title="3.1 标准化"></a>3.1 标准化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">normPRED</span>(<span class="params">d</span>):<span class="comment">#标准化</span></span><br><span class="line">ma = torch.<span class="built_in">max</span>(d)</span><br><span class="line">mi = torch.<span class="built_in">min</span>(d)</span><br><span class="line"></span><br><span class="line">dn = (d-mi)/(ma-mi)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> dn</span><br></pre></td></tr></table></figure><h3 id="3-2-保存图片"><a href="#3-2-保存图片" class="headerlink" title="3.2 保存图片"></a>3.2 保存图片</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_output</span>(<span class="params">image_name,pred,d_dir</span>):<span class="comment">#存图片</span></span><br><span class="line"></span><br><span class="line">predict = pred</span><br><span class="line">predict = predict.squeeze()<span class="comment">#主要对数据的维度进行压缩，去掉维数为1的的维度</span></span><br><span class="line">predict_np = predict.cpu().data.numpy()</span><br><span class="line"><span class="comment">#.data是读取Variable中的tensor   .cpu是把数据转移到cpu上  .numpy()把tensor变成numpy</span></span><br><span class="line"></span><br><span class="line">im = Image.fromarray(predict_np*<span class="number">255</span>).convert(<span class="string">&#x27;RGB&#x27;</span>) <span class="comment">#array转成image</span></span><br><span class="line">img_name = image_name.split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>]</span><br><span class="line">image = io.imread(image_name) <span class="comment">#用于读取图片文件。value是numpy array</span></span><br><span class="line">imo = im.resize((image.shape[<span class="number">1</span>],image.shape[<span class="number">0</span>]),resample=Image.BILINEAR)</span><br><span class="line">        <span class="comment">#双线性插值，是一种通过平均周围像素颜色来添加像素的方法，输出的图像的每个像素都是原图中四个像素（2x2)运算的结果’</span></span><br><span class="line"><span class="comment">#由于它是从原图四个像素中运算的，因此这种算法很大程度上消除了锯齿现象，而且效果也比较好。</span></span><br><span class="line">pb_np = np.array(imo)</span><br><span class="line"></span><br><span class="line">aaa = img_name.split(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">bbb = aaa[<span class="number">0</span>:-<span class="number">1</span>]</span><br><span class="line">imidx = bbb[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(bbb)):</span><br><span class="line">imidx = imidx + <span class="string">&quot;.&quot;</span> + bbb[i]</span><br><span class="line"></span><br><span class="line">imo.save(d_dir+imidx+<span class="string">&#x27;.png&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="3-3-获得路径"><a href="#3-3-获得路径" class="headerlink" title="3.3 获得路径"></a>3.3 获得路径</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------- 1. get image path and name ---------</span></span><br><span class="line"></span><br><span class="line">image_dir = <span class="string">&#x27;./test_data/test_images/&#x27;</span></span><br><span class="line">prediction_dir = <span class="string">&#x27;./test_data/test_results/&#x27;</span></span><br><span class="line">model_dir = <span class="string">&#x27;./saved_models/basnet_bsi/basnet.pth&#x27;</span></span><br><span class="line"></span><br><span class="line">img_name_list = glob.glob(image_dir + <span class="string">&#x27;*.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="3-4-数据加载"><a href="#3-4-数据加载" class="headerlink" title="3.4 数据加载"></a>3.4 数据加载</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------- 2. dataloader ---------</span></span><br><span class="line"><span class="comment">#1. dataload</span></span><br><span class="line">test_salobj_dataset = SalObjDataset(img_name_list = img_name_list,</span><br><span class="line">                                    lbl_name_list = [],transform=transforms.Compose([RescaleT(<span class="number">256</span>),ToTensorLab(flag=<span class="number">0</span>)]))</span><br><span class="line"><span class="comment">#调成256*256，转成张量？数组</span></span><br><span class="line">test_salobj_dataloader = DataLoader(test_salobj_dataset, batch_size=<span class="number">1</span>,shuffle=<span class="literal">False</span>,num_workers=<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="3-5-模型定义"><a href="#3-5-模型定义" class="headerlink" title="3.5 模型定义"></a>3.5 模型定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------- 3. model define ---------</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;...load BASNet...&quot;</span>)</span><br><span class="line">net = BASNet(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">net.load_state_dict(torch.load(model_dir))<span class="comment">#加载模型的参数</span></span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">net.cuda()</span><br><span class="line">net.<span class="built_in">eval</span>()</span><br></pre></td></tr></table></figure><h3 id="3-6-推断每张图"><a href="#3-6-推断每张图" class="headerlink" title="3.6 推断每张图"></a>3.6 推断每张图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------- 4. inference for each image ---------</span></span><br><span class="line"><span class="keyword">for</span> i_test, data_test <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_salobj_dataloader):</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;inferencing:&quot;</span>,img_name_list[i_test].split(<span class="string">&quot;/&quot;</span>)[-<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">inputs_test = data_test[<span class="string">&#x27;image&#x27;</span>]</span><br><span class="line">inputs_test = inputs_test.<span class="built_in">type</span>(torch.FloatTensor)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">inputs_test = Variable(inputs_test.cuda())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">inputs_test = Variable(inputs_test)</span><br><span class="line"></span><br><span class="line">d1,d2,d3,d4,d5,d6,d7,d8 = net(inputs_test)</span><br><span class="line"></span><br><span class="line"><span class="comment"># normalization</span></span><br><span class="line">pred = d1[:,<span class="number">0</span>,:,:]<span class="comment">#最后一个阶段stage</span></span><br><span class="line">pred = normPRED(pred)</span><br><span class="line"></span><br><span class="line"><span class="comment"># save results to test_results folder</span></span><br><span class="line">save_output(img_name_list[i_test],pred,prediction_dir)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> d1,d2,d3,d4,d5,d6,d7,d8</span><br></pre></td></tr></table></figure><h2 id="4-resnet-model"><a href="#4-resnet-model" class="headerlink" title="4. resnet_model"></a>4. resnet_model</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## code from: https://github.com/pytorch/vision/blob/master/torchvision/models/resnet.py</span></span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> torch.utils.model_zoo <span class="keyword">as</span> model_zoo</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="comment"># __all__ = [&#x27;ResNet&#x27;, &#x27;resnet18&#x27;, &#x27;resnet34&#x27;, &#x27;resnet50&#x27;, &#x27;resnet101&#x27;,</span></span><br><span class="line"><span class="comment">#            &#x27;resnet152&#x27;, &#x27;ResNet34P&#x27;,&#x27;ResNet50S&#x27;,&#x27;ResNet50P&#x27;,&#x27;ResNet101P&#x27;]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># resnet18_dir = &#x27;/local/sda4/yqian3/RoadNets/resnet_model/resnet18-5c106cde.pth&#x27;</span></span><br><span class="line"><span class="comment"># resnet34_dir = &#x27;/local/sda4/yqian3/RoadNets/resnet_model/resnet34-333f7ec4.pth&#x27;</span></span><br><span class="line"><span class="comment"># resnet50_dir = &#x27;/local/sda4/yqian3/RoadNets/resnet_model/resnet50-19c8e357.pth&#x27;</span></span><br><span class="line"><span class="comment"># resnet101_dir = &#x27;/local/sda4/yqian3/RoadNets/resnet_model/resnet101-5d3b4d8f.pth&#x27;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># model_urls = &#123;</span></span><br><span class="line"><span class="comment">#     &#x27;resnet18&#x27;: &#x27;https://download.pytorch.org/models/resnet18-5c106cde.pth&#x27;,</span></span><br><span class="line"><span class="comment">#     &#x27;resnet34&#x27;: &#x27;https://download.pytorch.org/models/resnet34-333f7ec4.pth&#x27;,</span></span><br><span class="line"><span class="comment">#     &#x27;resnet50&#x27;: &#x27;https://download.pytorch.org/models/resnet50-19c8e357.pth&#x27;,</span></span><br><span class="line"><span class="comment">#     &#x27;resnet101&#x27;: &#x27;https://download.pytorch.org/models/resnet101-5d3b4d8f.pth&#x27;,</span></span><br><span class="line"><span class="comment">#     &#x27;resnet152&#x27;: &#x27;https://download.pytorch.org/models/resnet152-b121ed2d.pth&#x27;,</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-1-生成卷积层"><a href="#4-1-生成卷积层" class="headerlink" title="4.1 生成卷积层"></a>4.1 生成卷积层</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">conv3x3</span>(<span class="params">in_planes, out_planes, stride=<span class="number">1</span></span>):</span><br><span class="line">    <span class="string">&quot;3x3 convolution with padding&quot;</span></span><br><span class="line">    <span class="keyword">return</span> nn.Conv2d(in_planes, out_planes, kernel_size=<span class="number">3</span>, stride=stride,</span><br><span class="line">                     padding=<span class="number">1</span>, bias=<span class="literal">False</span>)<span class="comment">#bias为偏置值，卷积之后，如果要接BN操作，最好是不设置偏置，因为不起作用，而且占显卡内存。</span></span><br></pre></td></tr></table></figure><h3 id="4-2-定义基础块"><a href="#4-2-定义基础块" class="headerlink" title="4.2  定义基础块"></a>4.2  定义基础块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BasicBlock</span>(nn.Module):</span><br><span class="line">    expansion = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, inplanes, planes, stride=<span class="number">1</span>, downsample=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(BasicBlock, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv1 = conv3x3(inplanes, planes, stride)</span><br><span class="line">        <span class="variable language_">self</span>.bn1 = nn.BatchNorm2d(planes)<span class="comment">#以通道为单位批量标准化</span></span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU(inplace=<span class="literal">True</span>)<span class="comment">#inplace = True ,会改变输入数据的值,节省反复申请与释放内存的空间与时间,只是将原来的地址传递,效率更好</span></span><br><span class="line">        <span class="variable language_">self</span>.conv2 = conv3x3(planes, planes)</span><br><span class="line">        <span class="variable language_">self</span>.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.downsample = downsample</span><br><span class="line">        <span class="variable language_">self</span>.stride = stride</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        residual = x <span class="comment">#x是什么</span></span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn1(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv2(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn2(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            residual = <span class="variable language_">self</span>.downsample(x)</span><br><span class="line"></span><br><span class="line">        out += residual</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicBlockDe</span>(nn.Module):<span class="comment">#与上一个一样，但多一层卷积</span></span><br><span class="line">    expansion = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, inplanes, planes, stride=<span class="number">1</span>, downsample=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(BasicBlockDe, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.convRes = conv3x3(inplanes,planes,stride)</span><br><span class="line">        <span class="variable language_">self</span>.bnRes = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.reluRes = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv1 = conv3x3(inplanes, planes, stride)</span><br><span class="line">        <span class="variable language_">self</span>.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.conv2 = conv3x3(planes, planes)</span><br><span class="line">        <span class="variable language_">self</span>.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.downsample = downsample</span><br><span class="line">        <span class="variable language_">self</span>.stride = stride</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        residual = <span class="variable language_">self</span>.convRes(x)</span><br><span class="line">        residual = <span class="variable language_">self</span>.bnRes(residual)</span><br><span class="line">        residual = <span class="variable language_">self</span>.reluRes(residual)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn1(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv2(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn2(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            residual = <span class="variable language_">self</span>.downsample(x)</span><br><span class="line"></span><br><span class="line">        out += residual</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-3-瓶颈块"><a href="#4-3-瓶颈块" class="headerlink" title="4.3 瓶颈块"></a>4.3 瓶颈块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bottleneck</span>(nn.Module):<span class="comment">#瓶颈块</span></span><br><span class="line">    expansion = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, inplanes, planes, stride=<span class="number">1</span>, downsample=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(Bottleneck, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Conv2d(inplanes, planes, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.conv2 = nn.Conv2d(planes, planes, kernel_size=<span class="number">3</span>, stride=stride,</span><br><span class="line">                               padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        <span class="variable language_">self</span>.conv3 = nn.Conv2d(planes, planes * <span class="number">4</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn3 = nn.BatchNorm2d(planes * <span class="number">4</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.downsample = downsample</span><br><span class="line">        <span class="variable language_">self</span>.stride = stride</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        residual = x</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv1(x)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn1(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv2(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn2(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        out = <span class="variable language_">self</span>.conv3(out)</span><br><span class="line">        out = <span class="variable language_">self</span>.bn3(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            residual = <span class="variable language_">self</span>.downsample(x)</span><br><span class="line"></span><br><span class="line">        out += residual</span><br><span class="line">        out = <span class="variable language_">self</span>.relu(out)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h2 id="5-BASNet"><a href="#5-BASNet" class="headerlink" title="5. BASNet"></a>5. BASNet</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> Fs</span><br><span class="line"><span class="keyword">from</span> .resnet_model <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure><h3 id="5-1-优化模块"><a href="#5-1-优化模块" class="headerlink" title="5.1 优化模块"></a>5.1 优化模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RefUnet</span>(nn.Module):<span class="comment">#优化模块</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,in_ch,inc_ch</span>):</span><br><span class="line">        <span class="built_in">super</span>(RefUnet, <span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv0 = nn.Conv2d(in_ch,inc_ch,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="comment">#in_channels：输入的通道数目 【必选】</span></span><br><span class="line">        <span class="comment">#out_channels： 输出的通道数目 【必选】</span></span><br><span class="line">        <span class="comment">#kernel_size：卷积核的大小，类型为int 或者元组，当卷积是方形的时候，只需要一个整数边长即可，卷积不是方形，要输入一个元组表示 高和宽。【必选】</span></span><br><span class="line">        <span class="comment">#stride： 卷积每次滑动的步长为多少，默认是 1 【可选】</span></span><br><span class="line">        <span class="comment">#padding： 设置在所有边界增加 值为 0 的边距的大小（也就是在feature map 外围增加几圈 0 ），例如当 padding =1 的时候，如果原来大小为 3 × 3 ，那么之后的大小为 5 × 5 。即在外围加了一圈 0 。【可选】</span></span><br><span class="line">        <span class="comment">#dilation：控制卷积核之间的间距【可选】</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv1 = nn.Conv2d(inc_ch,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool1 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment">#kernel_size(int or tuple) - max pooling的窗口大小，</span></span><br><span class="line">        <span class="comment">#stride(int or tuple, optional) - max pooling的窗口移动的步长。默认值是kernel_size</span></span><br><span class="line">        <span class="comment">#padding(int or tuple, optional) - 输入的每一条边补充0的层数</span></span><br><span class="line">        <span class="comment">#dilation(int or tuple, optional) – 一个控制窗口中元素步幅的参数</span></span><br><span class="line">        <span class="comment">#return_indices - 如果等于True，会返回输出最大值的序号，对于上采样操作会有帮助</span></span><br><span class="line">        <span class="comment">#ceil_mode - 如果等于True，计算输出信号大小的时候，会使用向上取整，代替默认的向下取整的操作</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv2 = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool2 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv3 = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn3 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu3 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool3 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv4 = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn4 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu4 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool4 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#####</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv5 = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn5 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu5 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#####</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv_d4 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn_d4 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu_d4 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv_d3 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn_d3 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu_d3 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv_d2 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn_d2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu_d2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv_d1 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn_d1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu_d1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv_d0 = nn.Conv2d(<span class="number">64</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.upscore2 = nn.Upsample(scale_factor=<span class="number">2</span>, mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="comment">#scale_factor指定输出为输入的多少倍数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line"></span><br><span class="line">        hx = x</span><br><span class="line">        hx = <span class="variable language_">self</span>.conv0(hx)</span><br><span class="line"></span><br><span class="line">        hx1 = <span class="variable language_">self</span>.relu1(<span class="variable language_">self</span>.bn1(<span class="variable language_">self</span>.conv1(hx)))<span class="comment">#224*224*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool1(hx1)</span><br><span class="line"></span><br><span class="line">        hx2 = <span class="variable language_">self</span>.relu2(<span class="variable language_">self</span>.bn2(<span class="variable language_">self</span>.conv2(hx)))<span class="comment">#112*112*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool2(hx2)</span><br><span class="line"></span><br><span class="line">        hx3 = <span class="variable language_">self</span>.relu3(<span class="variable language_">self</span>.bn3(<span class="variable language_">self</span>.conv3(hx)))<span class="comment">#56*56*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool3(hx3)</span><br><span class="line"></span><br><span class="line">        hx4 = <span class="variable language_">self</span>.relu4(<span class="variable language_">self</span>.bn4(<span class="variable language_">self</span>.conv4(hx)))<span class="comment">#28*28*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool4(hx4)</span><br><span class="line"></span><br><span class="line">        hx5 = <span class="variable language_">self</span>.relu5(<span class="variable language_">self</span>.bn5(<span class="variable language_">self</span>.conv5(hx)))<span class="comment">#14*14*64 类似于预测模块中的桥</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hx5)</span><br><span class="line"></span><br><span class="line">        d4 = <span class="variable language_">self</span>.relu_d4(<span class="variable language_">self</span>.bn_d4(<span class="variable language_">self</span>.conv_d4(torch.cat((hx,hx4),<span class="number">1</span>))))<span class="comment">#28*28*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(d4)</span><br><span class="line">        <span class="comment">#torch.cat是按维数1拼接在一起，即在通道的维度拼接</span></span><br><span class="line"></span><br><span class="line">        d3 = <span class="variable language_">self</span>.relu_d3(<span class="variable language_">self</span>.bn_d3(<span class="variable language_">self</span>.conv_d3(torch.cat((hx,hx3),<span class="number">1</span>))))<span class="comment">#56*56*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(d3)</span><br><span class="line"></span><br><span class="line">        d2 = <span class="variable language_">self</span>.relu_d2(<span class="variable language_">self</span>.bn_d2(<span class="variable language_">self</span>.conv_d2(torch.cat((hx,hx2),<span class="number">1</span>))))<span class="comment">#112*112*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(d2)</span><br><span class="line"></span><br><span class="line">        d1 = <span class="variable language_">self</span>.relu_d1(<span class="variable language_">self</span>.bn_d1(<span class="variable language_">self</span>.conv_d1(torch.cat((hx,hx1),<span class="number">1</span>))))<span class="comment">#224*224*64</span></span><br><span class="line"></span><br><span class="line">        residual = <span class="variable language_">self</span>.conv_d0(d1)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x + residual</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-2-预测模块"><a href="#5-2-预测模块" class="headerlink" title="5.2 预测模块"></a>5.2 预测模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BASNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n_channels,n_classes</span>):</span><br><span class="line">        <span class="built_in">super</span>(BASNet,<span class="variable language_">self</span>).__init__()</span><br><span class="line"></span><br><span class="line">        resnet = models.resnet34(pretrained=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Encoder--------------</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.inconv = nn.Conv2d(n_channels,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.inbn = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.inrelu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 1</span></span><br><span class="line">        <span class="variable language_">self</span>.encoder1 = resnet.layer1 <span class="comment">#224*224*64</span></span><br><span class="line">        <span class="comment">#stage 2</span></span><br><span class="line">        <span class="variable language_">self</span>.encoder2 = resnet.layer2 <span class="comment">#112*112*128</span></span><br><span class="line">        <span class="comment">#stage 3</span></span><br><span class="line">        <span class="variable language_">self</span>.encoder3 = resnet.layer3 <span class="comment">#56*56*256</span></span><br><span class="line">        <span class="comment">#stage 4</span></span><br><span class="line">        <span class="variable language_">self</span>.encoder4 = resnet.layer4 <span class="comment">#28*28*512</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool4 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 5</span></span><br><span class="line">        <span class="variable language_">self</span>.resb5_1 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resb5_2 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resb5_3 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>) <span class="comment">#14*14*512</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.pool5 = nn.MaxPool2d(<span class="number">2</span>,<span class="number">2</span>,ceil_mode=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 6</span></span><br><span class="line">        <span class="variable language_">self</span>.resb6_1 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resb6_2 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.resb6_3 = BasicBlock(<span class="number">512</span>,<span class="number">512</span>) <span class="comment">#7*7*512</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Bridge--------------</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage Bridge</span></span><br><span class="line">        <span class="variable language_">self</span>.convbg_1 = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,dilation=<span class="number">2</span>, padding=<span class="number">2</span>) <span class="comment">#7*7*512</span></span><br><span class="line">        <span class="variable language_">self</span>.bnbg_1 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relubg_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.convbg_m = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,dilation=<span class="number">2</span>, padding=<span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bnbg_m = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relubg_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        <span class="variable language_">self</span>.convbg_2 = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,dilation=<span class="number">2</span>, padding=<span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bnbg_2 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relubg_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Decoder--------------</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 6d</span></span><br><span class="line">        <span class="variable language_">self</span>.conv6d_1 = nn.Conv2d(<span class="number">1024</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>) </span><br><span class="line">        <span class="variable language_">self</span>.bn6d_1 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu6d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv6d_m = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,dilation=<span class="number">2</span>, padding=<span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn6d_m = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu6d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv6d_2 = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,dilation=<span class="number">2</span>, padding=<span class="number">2</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn6d_2 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu6d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 5d</span></span><br><span class="line">        <span class="variable language_">self</span>.conv5d_1 = nn.Conv2d(<span class="number">1024</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn5d_1 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu5d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv5d_m = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn5d_m = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu5d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv5d_2 = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn5d_2 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu5d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 4d</span></span><br><span class="line">        <span class="variable language_">self</span>.conv4d_1 = nn.Conv2d(<span class="number">1024</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>) </span><br><span class="line">        <span class="variable language_">self</span>.bn4d_1 = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu4d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv4d_m = nn.Conv2d(<span class="number">512</span>,<span class="number">512</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn4d_m = nn.BatchNorm2d(<span class="number">512</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu4d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv4d_2 = nn.Conv2d(<span class="number">512</span>,<span class="number">256</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn4d_2 = nn.BatchNorm2d(<span class="number">256</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu4d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 3d</span></span><br><span class="line">        <span class="variable language_">self</span>.conv3d_1 = nn.Conv2d(<span class="number">512</span>,<span class="number">256</span>,<span class="number">3</span>,padding=<span class="number">1</span>) </span><br><span class="line">        <span class="variable language_">self</span>.bn3d_1 = nn.BatchNorm2d(<span class="number">256</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu3d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv3d_m = nn.Conv2d(<span class="number">256</span>,<span class="number">256</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn3d_m = nn.BatchNorm2d(<span class="number">256</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu3d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv3d_2 = nn.Conv2d(<span class="number">256</span>,<span class="number">128</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn3d_2 = nn.BatchNorm2d(<span class="number">128</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu3d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 2d</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv2d_1 = nn.Conv2d(<span class="number">256</span>,<span class="number">128</span>,<span class="number">3</span>,padding=<span class="number">1</span>) </span><br><span class="line">        <span class="variable language_">self</span>.bn2d_1 = nn.BatchNorm2d(<span class="number">128</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu2d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv2d_m = nn.Conv2d(<span class="number">128</span>,<span class="number">128</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn2d_m = nn.BatchNorm2d(<span class="number">128</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu2d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv2d_2 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn2d_2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu2d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#stage 1d</span></span><br><span class="line">        <span class="variable language_">self</span>.conv1d_1 = nn.Conv2d(<span class="number">128</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>) </span><br><span class="line">        <span class="variable language_">self</span>.bn1d_1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu1d_1 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv1d_m = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn1d_m = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu1d_m = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.conv1d_2 = nn.Conv2d(<span class="number">64</span>,<span class="number">64</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.bn1d_2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        <span class="variable language_">self</span>.relu1d_2 = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Bilinear Upsampling--------------</span></span><br><span class="line">        <span class="variable language_">self</span>.upscore6 = nn.Upsample(scale_factor=<span class="number">32</span>,mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.upscore5 = nn.Upsample(scale_factor=<span class="number">16</span>,mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.upscore4 = nn.Upsample(scale_factor=<span class="number">8</span>,mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.upscore3 = nn.Upsample(scale_factor=<span class="number">4</span>,mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.upscore2 = nn.Upsample(scale_factor=<span class="number">2</span>, mode=<span class="string">&#x27;bilinear&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Side Output--------------</span></span><br><span class="line">        <span class="variable language_">self</span>.outconvb = nn.Conv2d(<span class="number">512</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv6 = nn.Conv2d(<span class="number">512</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv5 = nn.Conv2d(<span class="number">512</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv4 = nn.Conv2d(<span class="number">256</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv3 = nn.Conv2d(<span class="number">128</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv2 = nn.Conv2d(<span class="number">64</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.outconv1 = nn.Conv2d(<span class="number">64</span>,<span class="number">1</span>,<span class="number">3</span>,padding=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Refine Module-------------</span></span><br><span class="line">        <span class="variable language_">self</span>.refunet = RefUnet(<span class="number">1</span>,<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self,x</span>):</span><br><span class="line"></span><br><span class="line">        hx = x</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Encoder-------------</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.inconv(hx)<span class="comment">#输入层</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.inbn(hx)</span><br><span class="line">        hx = <span class="variable language_">self</span>.inrelu(hx)</span><br><span class="line"></span><br><span class="line">        h1 = <span class="variable language_">self</span>.encoder1(hx) <span class="comment">#224*224*64</span></span><br><span class="line">        h2 = <span class="variable language_">self</span>.encoder2(h1) <span class="comment">#112*112*128</span></span><br><span class="line">        h3 = <span class="variable language_">self</span>.encoder3(h2) <span class="comment">#56*56*256</span></span><br><span class="line">        h4 = <span class="variable language_">self</span>.encoder4(h3) <span class="comment">#28*28*512</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool4(h4) </span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.resb5_1(hx)  <span class="comment">#14*14*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.resb5_2(hx)</span><br><span class="line">        h5 = <span class="variable language_">self</span>.resb5_3(hx)</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.pool5(h5) </span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.resb6_1(hx)  <span class="comment">#7*7*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.resb6_2(hx)</span><br><span class="line">        h6 = <span class="variable language_">self</span>.resb6_3(hx)</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Bridge-------------</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relubg_1(<span class="variable language_">self</span>.bnbg_1(<span class="variable language_">self</span>.convbg_1(h6))) <span class="comment">#7*7*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relubg_m(<span class="variable language_">self</span>.bnbg_m(<span class="variable language_">self</span>.convbg_m(hx)))</span><br><span class="line">        hbg = <span class="variable language_">self</span>.relubg_2(<span class="variable language_">self</span>.bnbg_2(<span class="variable language_">self</span>.convbg_2(hx)))</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Decoder-------------</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu6d_1(<span class="variable language_">self</span>.bn6d_1(<span class="variable language_">self</span>.conv6d_1(torch.cat((hbg,h6),<span class="number">1</span>))))<span class="comment">#7*7*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu6d_m(<span class="variable language_">self</span>.bn6d_m(<span class="variable language_">self</span>.conv6d_m(hx)))</span><br><span class="line">        hd6 = <span class="variable language_">self</span>.relu6d_2(<span class="variable language_">self</span>.bn6d_2(<span class="variable language_">self</span>.conv6d_2(hx)))</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hd6) <span class="comment"># 7 -&gt; 14</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu5d_1(<span class="variable language_">self</span>.bn5d_1(<span class="variable language_">self</span>.conv5d_1(torch.cat((hx,h5),<span class="number">1</span>))))<span class="comment">#14*14*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu5d_m(<span class="variable language_">self</span>.bn5d_m(<span class="variable language_">self</span>.conv5d_m(hx)))</span><br><span class="line">        hd5 = <span class="variable language_">self</span>.relu5d_2(<span class="variable language_">self</span>.bn5d_2(<span class="variable language_">self</span>.conv5d_2(hx)))</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hd5) <span class="comment"># 14 -&gt; 28</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu4d_1(<span class="variable language_">self</span>.bn4d_1(<span class="variable language_">self</span>.conv4d_1(torch.cat((hx,h4),<span class="number">1</span>))))<span class="comment">#28*28*512</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu4d_m(<span class="variable language_">self</span>.bn4d_m(<span class="variable language_">self</span>.conv4d_m(hx)))</span><br><span class="line">        hd4 = <span class="variable language_">self</span>.relu4d_2(<span class="variable language_">self</span>.bn4d_2(<span class="variable language_">self</span>.conv4d_2(hx)))</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hd4) <span class="comment"># 28 -&gt; 56</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu3d_1(<span class="variable language_">self</span>.bn3d_1(<span class="variable language_">self</span>.conv3d_1(torch.cat((hx,h3),<span class="number">1</span>))))<span class="comment">#56*56*256</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu3d_m(<span class="variable language_">self</span>.bn3d_m(<span class="variable language_">self</span>.conv3d_m(hx)))</span><br><span class="line">        hd3 = <span class="variable language_">self</span>.relu3d_2(<span class="variable language_">self</span>.bn3d_2(<span class="variable language_">self</span>.conv3d_2(hx)))</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hd3) <span class="comment"># 56 -&gt; 112</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu2d_1(<span class="variable language_">self</span>.bn2d_1(<span class="variable language_">self</span>.conv2d_1(torch.cat((hx,h2),<span class="number">1</span>))))<span class="comment">#112*112*128</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu2d_m(<span class="variable language_">self</span>.bn2d_m(<span class="variable language_">self</span>.conv2d_m(hx)))</span><br><span class="line">        hd2 = <span class="variable language_">self</span>.relu2d_2(<span class="variable language_">self</span>.bn2d_2(<span class="variable language_">self</span>.conv2d_2(hx)))</span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.upscore2(hd2) <span class="comment"># 112 -&gt; 224</span></span><br><span class="line"></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu1d_1(<span class="variable language_">self</span>.bn1d_1(<span class="variable language_">self</span>.conv1d_1(torch.cat((hx,h1),<span class="number">1</span>))))<span class="comment">#224*224*64</span></span><br><span class="line">        hx = <span class="variable language_">self</span>.relu1d_m(<span class="variable language_">self</span>.bn1d_m(<span class="variable language_">self</span>.conv1d_m(hx)))</span><br><span class="line">        hd1 = <span class="variable language_">self</span>.relu1d_2(<span class="variable language_">self</span>.bn1d_2(<span class="variable language_">self</span>.conv1d_2(hx)))</span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Side Output 7个阶段的最后一层上采样-------------</span></span><br><span class="line">        db = <span class="variable language_">self</span>.outconvb(hbg)</span><br><span class="line">        db = <span class="variable language_">self</span>.upscore6(db) <span class="comment"># 7-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d6 = <span class="variable language_">self</span>.outconv6(hd6)</span><br><span class="line">        d6 = <span class="variable language_">self</span>.upscore6(d6) <span class="comment"># 7-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d5 = <span class="variable language_">self</span>.outconv5(hd5)</span><br><span class="line">        d5 = <span class="variable language_">self</span>.upscore5(d5) <span class="comment"># 14-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d4 = <span class="variable language_">self</span>.outconv4(hd4)</span><br><span class="line">        d4 = <span class="variable language_">self</span>.upscore4(d4) <span class="comment"># 28-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d3 = <span class="variable language_">self</span>.outconv3(hd3)</span><br><span class="line">        d3 = <span class="variable language_">self</span>.upscore3(d3) <span class="comment"># 56-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d2 = <span class="variable language_">self</span>.outconv2(hd2)</span><br><span class="line">        d2 = <span class="variable language_">self</span>.upscore2(d2) <span class="comment"># 112-&gt;224</span></span><br><span class="line"></span><br><span class="line">        d1 = <span class="variable language_">self</span>.outconv1(hd1) <span class="comment"># 224</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">## -------------Refine Module 最后一层经过优化-------------</span></span><br><span class="line">        dout = <span class="variable language_">self</span>.refunet(d1) <span class="comment"># 224</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> F.sigmoid(dout), F.sigmoid(d1), F.sigmoid(d2), F.sigmoid(d3), F.sigmoid(d4), F.sigmoid(d5), F.sigmoid(d6), F.sigmoid(db)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-IOU"><a href="#6-IOU" class="headerlink" title="6.IOU"></a>6.IOU</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_iou</span>(<span class="params">pred, target, size_average = <span class="literal">True</span></span>):</span><br><span class="line"></span><br><span class="line">    b = pred.shape[<span class="number">0</span>]<span class="comment">#是照片序号</span></span><br><span class="line">    IoU = <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,b):</span><br><span class="line">        <span class="comment">#compute the IoU of the foreground</span></span><br><span class="line">        Iand1 = torch.<span class="built_in">sum</span>(target[i,:,:,:]*pred[i,:,:,:])<span class="comment">#torch.sum()对输入的tensor数据的某一维度求和</span></span><br><span class="line">        <span class="comment">#tensor([[1, 1, 1],[1, 1, 1]])</span></span><br><span class="line">        <span class="comment">#a1 =  torch.sum(a)  a2 =  torch.sum(a, dim=0)  a3 =  torch.sum(a, dim=1)</span></span><br><span class="line">        <span class="comment">#tensor([[6.]])     tensor([[2., 2., 2.]])      tensor([[3.], [3.]])</span></span><br><span class="line">        Ior1 = torch.<span class="built_in">sum</span>(target[i,:,:,:]) + torch.<span class="built_in">sum</span>(pred[i,:,:,:])-Iand1</span><br><span class="line">        IoU1 = Iand1/Ior1</span><br><span class="line"></span><br><span class="line">        <span class="comment">#IoU loss is (1-IoU1)</span></span><br><span class="line">        IoU = IoU + (<span class="number">1</span>-IoU1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> IoU/b</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IOU</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, size_average = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(IOU, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.size_average = size_average</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, pred, target</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> _iou(pred, target, <span class="variable language_">self</span>.size_average)</span><br></pre></td></tr></table></figure><h2 id="7-SSIM"><a href="#7-SSIM" class="headerlink" title="7.SSIM"></a>7.SSIM</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://github.com/Po-Hsun-Su/pytorch-ssim/blob/master/pytorch_ssim/__init__.py</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> exp</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gaussian</span>(<span class="params">window_size, sigma</span>): <span class="comment">#生成一维高斯核</span></span><br><span class="line">    gauss = torch.Tensor([exp(-(x - window_size//<span class="number">2</span>)**<span class="number">2</span>/<span class="built_in">float</span>(<span class="number">2</span>*sigma**<span class="number">2</span>)) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(window_size)])</span><br><span class="line">    <span class="keyword">return</span> gauss/gauss.<span class="built_in">sum</span>()<span class="comment">#归一化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_window</span>(<span class="params">window_size, channel</span>):<span class="comment">#通过一维高斯核生成二维</span></span><br><span class="line">    _1D_window = gaussian(window_size, <span class="number">1.5</span>).unsqueeze(<span class="number">1</span>)<span class="comment">#升维</span></span><br><span class="line">    _2D_window = _1D_window.mm(_1D_window.t()).<span class="built_in">float</span>().unsqueeze(<span class="number">0</span>).unsqueeze(<span class="number">0</span>)</span><br><span class="line">    window = Variable(_2D_window.expand(channel, <span class="number">1</span>, window_size, window_size).contiguous())</span><br><span class="line">    <span class="comment">#expand参数中 第一个参数是输出通道 即卷积核数量，输出通道数=channel说明经过卷积后通道数不变</span></span><br><span class="line">    <span class="comment"># 第二个参数是inchannel(输入通道,与输入图像相同的通道数)/groups,由于groups=channel,所以在这里等于1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> window</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_ssim</span>(<span class="params">img1, img2, window, window_size, channel, size_average = <span class="literal">True</span></span>):</span><br><span class="line">    mu1 = F.conv2d(img1, window, padding = window_size//<span class="number">2</span>, groups = channel) <span class="comment">#卷积求均值</span></span><br><span class="line">    mu2 = F.conv2d(img2, window, padding = window_size//<span class="number">2</span>, groups = channel)</span><br><span class="line"></span><br><span class="line">    mu1_sq = mu1.<span class="built_in">pow</span>(<span class="number">2</span>)</span><br><span class="line">    mu2_sq = mu2.<span class="built_in">pow</span>(<span class="number">2</span>)</span><br><span class="line">    mu1_mu2 = mu1*mu2</span><br><span class="line">    <span class="comment"># 在计算方差和协方差时用到了公式Var(X)=E[X^2]-E[X]^2, cov(X,Y)=E[XY]-E[X]E[Y].</span></span><br><span class="line">    sigma1_sq = F.conv2d(img1*img1, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu1_sq <span class="comment">#求方差</span></span><br><span class="line">    sigma2_sq = F.conv2d(img2*img2, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu2_sq</span><br><span class="line">    sigma12 = F.conv2d(img1*img2, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu1_mu2  <span class="comment">#求协方差</span></span><br><span class="line"></span><br><span class="line">    C1 = <span class="number">0.01</span>**<span class="number">2</span></span><br><span class="line">    C2 = <span class="number">0.03</span>**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    ssim_map = ((<span class="number">2</span>*mu1_mu2 + C1)*(<span class="number">2</span>*sigma12 + C2))/((mu1_sq + mu2_sq + C1)*(sigma1_sq + sigma2_sq + C2))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> size_average:</span><br><span class="line">        <span class="keyword">return</span> ssim_map.mean()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> ssim_map.mean(<span class="number">1</span>).mean(<span class="number">1</span>).mean(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SSIM</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, window_size = <span class="number">11</span>, size_average = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(SSIM, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.window_size = window_size </span><br><span class="line">        <span class="variable language_">self</span>.size_average = size_average</span><br><span class="line">        <span class="variable language_">self</span>.channel = <span class="number">1</span> </span><br><span class="line">        <span class="variable language_">self</span>.window = create_window(window_size, <span class="variable language_">self</span>.channel) <span class="comment">#用初始化的channel创建window</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, img1, img2</span>):</span><br><span class="line">        (_, channel, _, _) = img1.size()<span class="comment">#取img1的通道数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> channel == <span class="variable language_">self</span>.channel <span class="keyword">and</span> <span class="variable language_">self</span>.window.data.<span class="built_in">type</span>() == img1.data.<span class="built_in">type</span>():<span class="comment">#判断初始化通道与img1通道数 判断window的数据类型与img1数据类型</span></span><br><span class="line">            window = <span class="variable language_">self</span>.window</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            window = create_window(<span class="variable language_">self</span>.window_size, channel) <span class="comment">#若不相等，创建img1 channel的window</span></span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> img1.is_cuda:</span><br><span class="line">                window = window.cuda(img1.get_device())</span><br><span class="line">            window = window.type_as(img1) <span class="comment">#将window的数据类型转换为与img1相同</span></span><br><span class="line"></span><br><span class="line">            <span class="variable language_">self</span>.window = window <span class="comment">#使用通过img channel创建的window</span></span><br><span class="line">            <span class="variable language_">self</span>.channel = channel <span class="comment">#使用img1 channel</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> _ssim(img1, img2, window, <span class="variable language_">self</span>.window_size, channel, <span class="variable language_">self</span>.size_average)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_logssim</span>(<span class="params">img1, img2, window, window_size, channel, size_average = <span class="literal">True</span></span>):</span><br><span class="line">    mu1 = F.conv2d(img1, window, padding = window_size//<span class="number">2</span>, groups = channel)</span><br><span class="line">    mu2 = F.conv2d(img2, window, padding = window_size//<span class="number">2</span>, groups = channel)</span><br><span class="line"></span><br><span class="line">    mu1_sq = mu1.<span class="built_in">pow</span>(<span class="number">2</span>)</span><br><span class="line">    mu2_sq = mu2.<span class="built_in">pow</span>(<span class="number">2</span>)</span><br><span class="line">    mu1_mu2 = mu1*mu2</span><br><span class="line"></span><br><span class="line">    sigma1_sq = F.conv2d(img1*img1, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu1_sq</span><br><span class="line">    sigma2_sq = F.conv2d(img2*img2, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu2_sq</span><br><span class="line">    sigma12 = F.conv2d(img1*img2, window, padding = window_size//<span class="number">2</span>, groups = channel) - mu1_mu2</span><br><span class="line"></span><br><span class="line">    C1 = <span class="number">0.01</span>**<span class="number">2</span></span><br><span class="line">    C2 = <span class="number">0.03</span>**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">    ssim_map = ((<span class="number">2</span>*mu1_mu2 + C1)*(<span class="number">2</span>*sigma12 + C2))/((mu1_sq + mu2_sq + C1)*(sigma1_sq + sigma2_sq + C2))</span><br><span class="line">    ssim_map = (ssim_map - torch.<span class="built_in">min</span>(ssim_map))/(torch.<span class="built_in">max</span>(ssim_map)-torch.<span class="built_in">min</span>(ssim_map))</span><br><span class="line">    ssim_map = -torch.log(ssim_map + <span class="number">1e-8</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> size_average:</span><br><span class="line">        <span class="keyword">return</span> ssim_map.mean()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> ssim_map.mean(<span class="number">1</span>).mean(<span class="number">1</span>).mean(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LOGSSIM</span>(torch.nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, window_size = <span class="number">11</span>, size_average = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(LOGSSIM, <span class="variable language_">self</span>).__init__()</span><br><span class="line">        <span class="variable language_">self</span>.window_size = window_size</span><br><span class="line">        <span class="variable language_">self</span>.size_average = size_average</span><br><span class="line">        <span class="variable language_">self</span>.channel = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">self</span>.window = create_window(window_size, <span class="variable language_">self</span>.channel)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, img1, img2</span>):</span><br><span class="line">        (_, channel, _, _) = img1.size()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> channel == <span class="variable language_">self</span>.channel <span class="keyword">and</span> <span class="variable language_">self</span>.window.data.<span class="built_in">type</span>() == img1.data.<span class="built_in">type</span>():</span><br><span class="line">            window = <span class="variable language_">self</span>.window</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            window = create_window(<span class="variable language_">self</span>.window_size, channel)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> img1.is_cuda:</span><br><span class="line">                window = window.cuda(img1.get_device())</span><br><span class="line">            window = window.type_as(img1)</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">self</span>.window = window</span><br><span class="line">            <span class="variable language_">self</span>.channel = channel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> _logssim(img1, img2, window, <span class="variable language_">self</span>.window_size, channel, <span class="variable language_">self</span>.size_average)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ssim</span>(<span class="params">img1, img2, window_size = <span class="number">11</span>, size_average = <span class="literal">True</span></span>):</span><br><span class="line">    (_, channel, _, _) = img1.size()</span><br><span class="line">    window = create_window(window_size, channel)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> img1.is_cuda:</span><br><span class="line">        window = window.cuda(img1.get_device())</span><br><span class="line">    window = window.type_as(img1)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _ssim(img1, img2, window, window_size, channel, size_average)</span><br><span class="line"><span class="built_in">print</span>(create_window(<span class="number">11</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure><h2 id="8-测试"><a href="#8-测试" class="headerlink" title="8.测试"></a>8.测试</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">img_path = path_data1 + os.listdir(path_data1)[<span class="number">0</span>]</span><br><span class="line">im1 = PIL.Image.<span class="built_in">open</span>(path_data2 + <span class="string">&quot;1.jpg&quot;</span>)  <span class="comment">#原图</span></span><br><span class="line">im1 = im1.convert(<span class="string">&quot;RGBA&quot;</span>)</span><br><span class="line">tmp = cv2.imread(img_path)</span><br><span class="line">ret, tmp = cv2.threshold(tmp, <span class="number">127</span>, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br><span class="line">cv2.imwrite(img_path, tmp)</span><br><span class="line">im2 = PIL.Image.<span class="built_in">open</span>(img_path)  <span class="comment">#二值化后的黑白图</span></span><br><span class="line">im2 = im2.convert(<span class="string">&quot;RGBA&quot;</span>)</span><br><span class="line">height, width = im1.size</span><br><span class="line"><span class="keyword">for</span> h <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, height):</span><br><span class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, width):</span><br><span class="line">        b, g, r = im2.getpixel((h, w))[<span class="number">0</span>], im2.getpixel(</span><br><span class="line">            (h, w))[<span class="number">1</span>], im2.getpixel((h, w))[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">if</span> (b, g, r) == (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">            im1.putpixel((h, w), (<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
